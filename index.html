<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthara â€” Your Ultimate Sahara</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Add face-api.js for emotion detection -->
    <script defer src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    <script src="https://cdn.botpress.cloud/webchat/v3.3/inject.js" defer></script>
<script src="https://files.bpcontent.cloud/2025/11/02/15/20251102150649-Q4UJ24LP.js" defer></script>
    <style>
        :root {
            --bg-primary: #0B0F19;
            --bg-secondary: #1a1f2e;
            --accent: #BC13FE;
            --accent-light: #dd24a6;
            --purple: #A855F7;
            --text-primary: #ffffff;
            --text-secondary: #b8c1ec;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --card-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            --transition: all 0.3s ease;
            --success: #4ade80;
            --warning: #fbbf24;
            --danger: #f87171;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            transition: var(--transition);
        }

        body.light-mode {
            --bg-primary: #f5f7fa;
            --bg-secondary: #ffffff;
            --text-primary: #1a1f2e;
            --text-secondary: #5a6785;
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(0, 0, 0, 0.1);
        }

        /* Splash Screen */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--bg-primary);
            z-index: 1000;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .desert-ripple {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg,#dd24a6 0%, #BC13FE 100%);
            opacity: 0.1;
            z-index: -1;
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(188, 19, 254, 0.3) 0%, rgba(168, 85, 247, 0.1) 70%);
            transform: scale(0);
            animation: ripple-animation 8s infinite ease-out;
        }

        @keyframes ripple-animation {
            0% {
                transform: scale(0);
                opacity: 0.8;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        .logo {
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(188, 19, 254, 0.5);
            margin-bottom: 1rem;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 30px rgba(188, 19, 254, 0.5);
            }
            to {
                text-shadow: 0 0 40px rgba(188, 19, 254, 0.8), 0 0 50px rgba(168, 85, 247, 0.5);
            }
        }

        .tagline {
            font-size: 1.5rem;
            color: var(--text-secondary);
            animation: fade-in 2s ease-out;
        }

        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Login/Signup Screen */
        .auth-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .auth-container.active {
            display: flex;
        }

        .auth-card {
            width: 90%;
            max-width: 450px;
            padding: 2.5rem;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            color: var(--accent);
            transform: rotate(180deg);
        }

        .auth-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-align: center;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* Auth Tabs */
        .auth-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 0.5rem;
            margin-bottom: 2rem;
        }

        .auth-tab {
            flex: 1;
            padding: 0.8rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 10px;
            transition: var(--transition);
            font-weight: 500;
        }

        .auth-tab.active {
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            color: white;
        }

        .auth-tab:hover:not(.active) {
            color: var(--text-primary);
        }

        /* Auth Forms */
        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(188, 19, 254, 0.2);
        }

        .form-group .generated-email {
            background: rgba(188, 19, 254, 0.1);
            border-color: var(--accent);
            color: var(--accent-light);
            font-size: 0.9rem;
            margin-top: 0.5rem;
            padding: 0.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .remember-me {
            display: flex;
            align-items: center;
        }

        .remember-me input {
            margin-right: 0.5rem;
        }

        .forgot-password {
            color: var(--accent);
            text-decoration: none;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .forgot-password:hover {
            text-decoration: underline;
        }

        .btn {
            width: 100%;
            padding: 0.8rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            margin-top: 1rem;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: scale(0);
            animation: ripple-effect 0.6s ease-out;
        }

        @keyframes ripple-effect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Main App Container */
        .app-container {
            display: none;
            min-height: 100vh;
            padding: 1rem;
        }

        .app-container.active {
            display: block;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 2rem;
            border: 1px solid var(--glass-border);
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 600;
        }

        .logout-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
        }

        .logout-btn:hover {
            color: var(--accent);
        }

        /* Navigation */
        nav {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .nav-tabs {
            display: flex;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 0.5rem;
            border: 1px solid var(--glass-border);
            overflow-x: auto;
        }

        .nav-tab {
            padding: 0.8rem 1.5rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 10px;
            transition: var(--transition);
            font-weight: 500;
            white-space: nowrap;
        }

        .nav-tab.active {
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            color: white;
        }

        .nav-tab:hover:not(.active) {
            color: var(--text-primary);
        }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Dashboard */
        .greeting {
            font-size: 2rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .daily-quote {
            font-size: 1.2rem;
            color: var(--text-secondary);
            text-align: center;
            margin-bottom: 2rem;
            font-style: italic;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
            text-align: center;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(31, 38, 135, 0.5);
            border-color: var(--accent);
        }

        .dashboard-card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .dashboard-card-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .dashboard-card-description {
            color: var(--text-secondary);
        }

        /* Analytics Dashboard */
        .analytics-container {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
        }

        .analytics-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 1.5rem;
            height: 300px;
            position: relative;
        }

        .chart-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
            color: var(--text-secondary);
        }

        /* Progress Bars */
        .progress-bars {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid var(--glass-border);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .progress-value {
            color: var(--text-secondary);
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 1s ease;
        }

        .progress-fill.sleep {
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
        }

        .progress-fill.steps {
            background: linear-gradient(90deg, #10b981, #34d399);
        }

        .progress-fill.hydration {
            background: linear-gradient(90deg, #06b6d4, #22d3ee);
        }

        /* Daily Indicators */
        .daily-indicators {
            display: flex;
            justify-content: space-around;
            margin-bottom: 2rem;
        }

        .indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .indicator-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--glass-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
        }

        .indicator-icon.completed {
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
        }

        .indicator-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Reminders Bar */
        .reminders-bar {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1rem;
            border: 1px solid var(--glass-border);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reminder {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .reminder-icon {
            font-size: 1.2rem;
        }

        /* Rewards Section */
        .rewards-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid var(--glass-border);
            margin-bottom: 2rem;
        }

        .rewards-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .badges-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            transition: var(--transition);
        }

        .badge.unlocked {
            background: linear-gradient(135deg, rgba(188, 19, 254, 0.2), rgba(168, 85, 247, 0.2));
            border: 1px solid var(--accent);
        }

        .badge-icon {
            font-size: 2rem;
        }

        .badge-name {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent);
            position: absolute;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Physical Health Section */
        .health-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .health-feature {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .health-feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(31, 38, 135, 0.5);
            border-color: var(--accent);
        }

        .feature-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .feature-icon {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .feature-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        /* Mental Health Section */
        .mental-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .mental-feature {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .mental-feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(31, 38, 135, 0.5);
            border-color: var(--accent);
        }

        /* Feature Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border-radius: 20px;
            padding: 2rem;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            border: 1px solid var(--glass-border);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--accent);
        }

        .modal-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* CV-Insight Feature */
        .cv-insight-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .cv-insight-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .cv-insight-subtitle {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .cv-insight-content {
            display: flex;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .cv-camera-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .cv-camera-preview {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        .cv-camera-placeholder {
            font-size: 3rem;
            color: var(--text-secondary);
        }

        .cv-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .cv-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .cv-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .cv-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cv-analysis-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .cv-stress-meter {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .stress-meter-title {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .stress-bar-container {
            height: 30px;
            background: linear-gradient(90deg, #4ade80 0%, #fbbf24 50%, #f87171 100%);
            border-radius: 15px;
            position: relative;
            margin-bottom: 0.5rem;
        }

        .stress-indicator {
            position: absolute;
            top: -10px;
            width: 10px;
            height: 50px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            transition: left 0.5s ease;
        }

        .stress-labels {
            display: flex;
            justify-content: space-between;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .stress-value {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin: 1rem 0;
        }

        .stress-value.low {
            color: var(--success);
        }

        .stress-value.medium {
            color: var(--warning);
        }

        .stress-value.high {
            color: var(--danger);
        }

        .cv-current-mood {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.2rem;
        }

        .cv-snapshot-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .cv-snapshot-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 222, 128, 0.3);
        }

        /* Releasing Ritual Feature */
        .releasing-ritual-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .ritual-header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .ritual-subtitle {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .ritual-step {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .ritual-step-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ritual-step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: 600;
        }

        .emotion-input {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 1rem;
        }

        .mood-selector {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1rem;
        }

        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .mood-option:hover {
            transform: scale(1.1);
        }

        .mood-option.selected {
            transform: scale(1.2);
        }

        .mood-emoji {
            font-size: 2rem;
        }

        .mood-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .release-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin: 1rem auto;
            display: block;
        }

        .release-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .release-animation {
            height: 300px;
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            margin: 1rem 0;
            display: none;
            background: linear-gradient(to bottom, #0B0F19 0%, #1a1f2e 100%);
        }

        .release-animation.active {
            display: block;
        }

        .burn-text {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-primary);
            font-size: 1.2rem;
            padding: 1rem;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            max-width: 80%;
            text-align: center;
            opacity: 1;
            transition: opacity 2s ease-in-out;
        }

        .burn-text.burning {
            opacity: 0;
            animation: burn-text 3s ease-in-out forwards;
        }

        @keyframes burn-text {
            0% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
                color: var(--text-primary);
            }
            50% {
                opacity: 0.8;
                transform: translateX(-50%) translateY(-20px);
                color: #ff6b35;
            }
            100% {
                opacity: 0;
                transform: translateX(-50%) translateY(-40px);
                color: #ff4500;
            }
        }

        .fire-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            display: none;
        }

        .fire-container.active {
            display: block;
        }

        .flame {
            position: absolute;
            bottom: 0;
            width: 20px;
            height: 40px;
            background: linear-gradient(to top, #ff4500, #ff8c00, #ffd700);
            border-radius: 50% 50% 0 0;
            opacity: 0.8;
            animation: flicker 0.5s infinite alternate;
        }

        @keyframes flicker {
            0% {
                transform: scaleY(1);
                opacity: 0.8;
            }
            100% {
                transform: scaleY(1.2);
                opacity: 1;
            }
        }

        .lantern-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
        }

        .lantern-container.active {
            display: block;
        }

        .lantern {
            position: absolute;
            width: 60px;
            height: 80px;
            opacity: 0;
            animation: float-lantern 10s ease-out forwards;
        }

        @keyframes float-lantern {
            0% {
                transform: translateX(-50%) translateY(0);
                opacity: 0;
            }
            10% {
                transform: translateX(-50%) translateY(-50px);
                opacity: 1;
            }
            90% {
                transform: translateX(-50%) translateY(-250px);
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(-300px);
                opacity: 0;
            }
        }

        .lantern-body {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.8) 0%, rgba(255, 140, 0, 0.6) 70%);
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .lantern-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(255, 255, 200, 0.9) 0%, rgba(255, 215, 0, 0.7) 70%);
            border-radius: 50%;
        }

        .breathing-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 150px;
            margin: 1rem 0;
        }

        .breathing-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(188, 19, 254, 0.3) 0%, rgba(168, 85, 247, 0.1) 70%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1rem;
            font-weight: 600;
            animation: breathe 4s infinite ease-in-out;
        }

        @keyframes breathe {
            0%, 100% {
                transform: scale(0.8);
            }
            50% {
                transform: scale(1.2);
            }
        }

        .affirmation-text {
            text-align: center;
            font-size: 1.2rem;
            font-style: italic;
            color: var(--text-secondary);
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
        }

        .mood-after {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .mood-after-label {
            font-weight: 600;
        }

        .mood-after-slider {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mood-emoji-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .mood-emoji-btn:hover {
            transform: scale(1.2);
        }

        .mood-emoji-btn.selected {
            transform: scale(1.3);
            filter: drop-shadow(0 0 10px rgba(188, 19, 254, 0.5));
        }

        .save-ritual-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin: 1rem auto;
            display: block;
        }

        .save-ritual-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 222, 128, 0.3);
        }

        /* CalorieSmart Feature */
        .caloriesmart-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .calorie-setup {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .calorie-input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .calorie-input {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .meal-scanner {
            display: flex;
            gap: 2rem;
        }

        .camera-section {
            flex: 1;
        }

        .camera-preview {
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            margin-bottom: 1rem;
        }

        .camera-placeholder {
            font-size: 3rem;
            color: var(--text-secondary);
        }

        .meal-input {
            width: 100%;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .scan-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .scan-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .nutrition-section {
            flex: 1;
        }

        .calorie-circle-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .calorie-circle {
            width: 200px;
            height: 200px;
            position: relative;
        }

        .calorie-chart {
            width: 100%;
            height: 100%;
        }

        .calorie-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .calorie-consumed {
            font-size: 2rem;
            font-weight: 700;
        }

        .calorie-total {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .nutrition-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .nutrition-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .nutrition-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .nutrition-label {
            color: var(--text-secondary);
        }

        .nutrition-value {
            font-weight: 600;
        }

        .daily-meals {
            margin-top: 1.5rem;
        }

        .meal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }

        .meal-name {
            font-weight: 500;
        }

        .meal-calories {
            color: var(--text-secondary);
        }

        /* Water Tracker */
        .water-tracker {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .water-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .water-droplet {
            width: 150px;
            height: 200px;
            position: relative;
            margin: 1rem 0;
        }

        .water-droplet svg {
            width: 100%;
            height: 100%;
        }

        .water-fill {
            fill: #06b6d4;
            transition: height 0.5s ease;
        }

        .water-controls {
            display: flex;
            gap: 1rem;
        }

        .water-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(90deg, #06b6d4 0%, #22d3ee 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .water-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.3);
        }

        .water-info {
            text-align: center;
            margin-top: 1rem;
        }

        .water-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: #06b6d4;
        }

        /* Recipe Generator */
        .recipe-generator {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .ingredients-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .ingredients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
            max-height: 200px;
            overflow-y: auto;
        }

        .ingredient-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .ingredient-checkbox:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .ingredient-checkbox input {
            accent-color: var(--accent);
        }

        .craving-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .craving-select {
            width: 100%;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            margin-top: 1rem;
        }

        .recipe-result {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            display: none;
        }

        .recipe-result.active {
            display: block;
        }

        .recipe-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .recipe-ingredients {
            margin-bottom: 1rem;
        }

        .recipe-ingredients h4 {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .recipe-ingredients ul {
            padding-left: 1.5rem;
        }

        .recipe-instructions {
            margin-bottom: 1rem;
        }

        .recipe-instructions h4 {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .recipe-instructions ol {
            padding-left: 1.5rem;
        }

        .recipe-nutrition {
            margin-bottom: 1rem;
        }

        .recipe-nutrition h4 {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .health-score {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .score-badge {
            padding: 0.3rem 0.8rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Posture Tracker */
        .posture-tracker {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .posture-camera {
            width: 100%;
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            border: 2px solid var(--purple);
        }

        .posture-status {
            font-size: 1.5rem;
            font-weight: 600;
            text-align: center;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            width: 100%;
        }

        .posture-status.good {
            color: var(--success);
        }

        .posture-status.bad {
            color: var(--danger);
        }

        /* Daily Wellness Check */
        .wellness-check {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .wellness-questions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .question-card {
            margin-bottom: 1.5rem;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .answer-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .answer-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .answer-btn.selected {
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border-color: transparent;
        }

        .wellness-report {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            display: none;
        }

        .wellness-report.active {
            display: block;
        }

        .report-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .report-score {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(
                var(--success) 0% 70%,
                var(--warning) 70% 90%,
                var(--danger) 90% 100%
            );
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .score-inner {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-secondary);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .score-label {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .report-recommendations {
            margin-top: 1.5rem;
        }

        .report-recommendations h4 {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .recommendation-list {
            padding-left: 1.5rem;
        }

        .recommendation-list li {
            margin-bottom: 0.5rem;
        }

        /* Know About Me */
        .about-me {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .about-me-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-field label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-field input, .form-field textarea {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .form-field textarea {
            resize: vertical;
            min-height: 100px;
        }

        .save-profile-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .save-profile-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .about-me-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            display: none;
        }

        .about-me-card.active {
            display: block;
        }

        .about-me-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            text-align: center;
        }

        .about-me-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .about-me-item {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .about-me-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .about-me-value {
            font-weight: 500;
        }

        /* Mind Garden */
        .mind-garden {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .garden-container {
            width: 100%;
            height: 400px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D98E 60%, #7CB342 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .garden-ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 120px;
            background: linear-gradient(to bottom, #7CB342 0%, #689F38 100%);
        }

        .deed-input-container {
            display: flex;
            gap: 1rem;
        }

        .deed-input {
            flex: 1;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .add-deed-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .add-deed-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 222, 128, 0.3);
        }

        .flower {
            position: absolute;
            bottom: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            animation: grow-flower 2s ease-out;
        }

        @keyframes grow-flower {
            0% {
                transform: scale(0) translateY(20px);
                opacity: 0;
            }
            20% {
                transform: scale(0.3) translateY(15px);
                opacity: 0.3;
            }
            40% {
                transform: scale(0.6) translateY(10px);
                opacity: 0.6;
            }
            60% {
                transform: scale(0.8) translateY(5px);
                opacity: 0.8;
            }
            80% {
                transform: scale(0.95) translateY(2px);
                opacity: 0.95;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .flower:hover {
            transform: scale(1.1);
        }

        .flower-stem {
            width: 4px;
            height: 60px;
            background: linear-gradient(to top, #4CAF50, #8BC34A);
            border-radius: 2px;
            animation: grow-stem 1.5s ease-out;
        }

        @keyframes grow-stem {
            0% {
                height: 0;
            }
            100% {
                height: 60px;
            }
        }

        .flower-head {
            font-size: 2.5rem;
            margin-top: -10px;
            animation: bloom-flower 1s ease-out 0.5s both;
        }

        @keyframes bloom-flower {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(180deg);
                opacity: 0.8;
            }
            100% {
                transform: scale(1) rotate(360deg);
                opacity: 1;
            }
        }

        .flower-tooltip {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 10;
            max-width: 200px;
            text-align: center;
        }

        .flower:hover .flower-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Daily Affirmation */
        .daily-affirmation {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            text-align: center;
        }

        .affirmation-text {
            font-size: 1.2rem;
            font-style: italic;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .refresh-affirmation-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .refresh-affirmation-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Mindful Hub */
        .mindful-hub {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .meditation-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .meditation-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .meditation-tracks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .meditation-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition);
        }

        .meditation-track:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .track-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .track-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .track-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .play-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .breathing-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .breathing-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .breathing-animation {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            position: relative;
        }

        .breathing-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(188, 19, 254, 0.3) 0%, rgba(168, 85, 247, 0.1) 70%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .breathing-circle.inhale {
            animation: inhale 4s ease-in-out infinite;
        }

        .breathing-circle.hold {
            animation: hold 4s ease-in-out infinite;
        }

        .breathing-circle.exhale {
            animation: exhale 4s ease-in-out infinite;
        }

        @keyframes inhale {
            0% {
                transform: scale(0.8);
            }
            100% {
                transform: scale(1.2);
            }
        }

        @keyframes hold {
            0% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1.2);
            }
        }

        @keyframes exhale {
            0% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(0.8);
            }
        }

        .breathing-modes {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .breathing-mode {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .breathing-mode:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .breathing-mode.active {
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border-color: transparent;
        }

        .breathing-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        .breathing-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .breathing-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .breathing-result {
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        .breathing-result.active {
            display: block;
        }

        .breathing-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* Mood Journal */
        .mood-journal {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .mood-selector {
            display: flex;
            justify-content: space-around;
            margin-bottom: 1rem;
        }

        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .mood-option:hover {
            transform: scale(1.1);
        }

        .mood-option.selected {
            transform: scale(1.2);
        }

        .mood-emoji {
            font-size: 2rem;
        }

        .mood-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .journal-textarea {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: vertical;
        }

        .journal-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .media-controls {
            display: flex;
            gap: 1rem;
        }

        .media-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .media-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .save-journal-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .save-journal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .download-journal-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .download-journal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 222, 128, 0.3);
        }

        /* Mind Assessment */
        .mind-assessment {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .assessment-questions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .assessment-question {
            margin-bottom: 1.5rem;
        }

        .assessment-question-text {
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .assessment-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .assessment-option {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .assessment-option:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .assessment-option.selected {
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border-color: transparent;
        }

        .submit-assessment-btn {
            padding: 1rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .submit-assessment-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .assessment-result {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            display: none;
        }

        .assessment-result.active {
            display: block;
        }

        .result-score {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .result-advice {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .result-recommendations {
            margin-top: 1.5rem;
        }

        .result-recommendations h4 {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .recommendation-list {
            padding-left: 1.5rem;
        }

        .recommendation-list li {
            margin-bottom: 0.5rem;
        }

        /* Health Card Tab */
        .health-card-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .health-card-form {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
        }

        .health-card-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .health-card-icon {
            font-size: 1.8rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .form-field {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-field label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-field input, .form-field select {
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
        }

        /* Fixed dropdown styles */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23b8c1ec' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.5rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        select option {
            background-color: var(--bg-secondary);
            color: #000000; /* Black text for dropdown options */
        }

        .generate-card-btn {
            padding: 0.8rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .generate-card-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .download-card-btn {
            padding: 0.8rem;
            background: linear-gradient(90deg, #4ade80 0%, #22c55e 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .download-card-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(74, 222, 128, 0.3);
        }

        .generated-card {
            background: white;
            color: #1a1f2e;
            border-radius: 15px;
            padding: 2rem;
            margin-top: 2rem;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .generated-card.active {
            display: block;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .card-date {
            color: #5a6785;
            font-size: 0.9rem;
        }

        .card-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .card-info-item {
            display: flex;
            flex-direction: column;
        }

        .card-info-label {
            color: #5a6785;
            font-size: 0.8rem;
            margin-bottom: 0.2rem;
        }

        .card-info-value {
            font-weight: 600;
        }

        .card-bmi {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(188, 19, 254, 0.1);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }

        .bmi-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #BC13FE;
        }

        .bmi-category {
            padding: 0.3rem 0.8rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            border-radius: 20px;
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Reports Section */
        .reports-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .report-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
        }

        .report-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .report-icon {
            font-size: 1.8rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* pH Test Report */
        .ph-meter {
            width: 100%;
            height: 30px;
            background: linear-gradient(90deg, #f87171 0%, #fbbf24 50%, #4ade80 100%);
            border-radius: 15px;
            position: relative;
            margin: 2rem 0;
        }

        .ph-indicator {
            position: absolute;
            top: -10px;
            width: 10px;
            height: 50px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            transition: left 1s ease;
        }

        .ph-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .ph-value {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin: 1rem 0;
        }

        .ph-suggestion {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1rem;
            margin-top: 1rem;
        }

        /* Saved Reports */
        .saved-reports {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
        }

        .saved-reports-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .reports-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .report-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .report-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .report-info {
            flex: 1;
        }

        .report-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .report-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .report-actions {
            display: flex;
            gap: 0.5rem;
        }

        .view-report-btn, .download-report-btn {
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .view-report-btn:hover, .download-report-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Settings Tab */
        .settings-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .settings-card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--card-shadow);
        }

        .settings-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .settings-icon {
            font-size: 1.8rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--glass-border);
        }

        .settings-option:last-child {
            border-bottom: none;
        }

        .settings-label {
            font-weight: 500;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 25px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            cursor: pointer;
            transition: var(--transition);
        }

        .toggle-switch.active {
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
        }

        .toggle-slider {
            position: absolute;
            top: 2.5px;
            left: 2.5px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: var(--transition);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(25px);
        }

        .settings-btn {
            padding: 0.8rem 1.5rem;
            background: linear-gradient(90deg, #BC13FE,#dd24a6);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .settings-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(188, 19, 254, 0.3);
        }

        .settings-btn.danger {
            background: linear-gradient(90deg, #f87171 0%, #ef4444 100%);
        }

        .settings-btn.danger:hover {
            box-shadow: 0 10px 20px rgba(248, 113, 113, 0.3);
        }

        /* File upload styling */
        .file-upload {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }

        .file-upload input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .file-upload-label {
            display: block;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            text-align: center;
            transition: var(--transition);
        }

        .file-upload-label:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .toast {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            border: 1px solid var(--glass-border);
            animation: slide-in 0.3s ease-out;
        }

        @keyframes slide-in {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        .toast-message {
            flex: 1;
        }

        .toast-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .logo {
                font-size: 3rem;
            }

            .tagline {
                font-size: 1.2rem;
            }

            .meal-scanner {
                flex-direction: column;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .card-info {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                overflow-x: scroll;
            }

            .daily-indicators {
                flex-wrap: wrap;
            }

            .reminders-bar {
                flex-direction: column;
                gap: 0.5rem;
            }

            .auth-card {
                max-width: 400px;
            }
        }
    
        .mood-music-container {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            margin-bottom: 2rem;
        }
        
        .mood-dropdown {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--glass-border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .activity-suggestions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .activity-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
        }


        /* Quiz Modal Styles */
        .quiz-modal-content {
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .quiz-name-screen {
            text-align: center;
            padding: 2rem;
        }

        .quiz-name-input {
            width: 100%;
            max-width: 400px;
            padding: 1rem;
            margin: 2rem auto;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            color: var(--text-primary);
            font-size: 1.2rem;
            text-align: center;
            transition: var(--transition);
        }

        .quiz-name-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(188, 19, 254, 0.2);
        }

        .quiz-question-screen {
            display: none;
            padding: 2rem;
        }

        .quiz-question-screen.active {
            display: block;
        }

        .quiz-question {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--text-primary);
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .quiz-option {
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--glass-border);
            border-radius: 15px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
            font-size: 1rem;
        }

        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--accent-light);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: linear-gradient(90deg, rgba(188, 19, 254, 0.2), rgba(221, 36, 166, 0.2));
            border-color: var(--accent);
        }

        .quiz-progress {
            text-align: center;
            color: var(--text-secondary);
            margin-top: 2rem;
            font-size: 0.9rem;
        }

        .quiz-results {
            display: none;
            padding: 2rem;
            text-align: center;
        }

        .quiz-results.active {
            display: block;
        }

        .quiz-results h3 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .quiz-recommendations {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            text-align: left;
            margin-top: 2rem;
        }

        .quiz-recommendations h4 {
            color: var(--accent);
            margin-bottom: 1rem;
        }

        .quiz-recommendations ul {
            list-style: none;
            padding: 0;
        }

        .quiz-recommendations li {
            padding: 0.8rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid var(--accent);
        }

        /* Video Thumbnail Styles */
        .daily-motivation-section {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--glass-border);
            margin-bottom: 2rem;
        }

        .motivation-date {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .motivation-title {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, #BC13FE, #dd24a6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .video-thumbnail-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: var(--transition);
        }

        .video-thumbnail-container:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(188, 19, 254, 0.3);
        }

        .video-thumbnail {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 15px;
        }

        .video-play-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(188, 19, 254, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: var(--transition);
        }

        .video-thumbnail-container:hover .video-play-overlay {
            background: rgba(221, 36, 166, 0.9);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .video-play-overlay i {
            font-size: 2rem;
            color: white;
            margin-left: 5px;
        }

    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="desert-ripple">
            <div class="ripple" style="top: 20%; left: 30%; width: 200px; height: 200px;"></div>
            <div class="ripple" style="top: 60%; left: 70%; width: 300px; height: 300px; animation-delay: 2s;"></div>
            <div class="ripple" style="top: 40%; left: 50%; width: 250px; height: 250px; animation-delay: 4s;"></div>
        </div>
        <h1 class="logo">Healthara</h1>
        <p class="tagline">Your Ultimate Sahara.</p>
    </div>

    <!-- Login/Signup Screen -->
    <div class="auth-container" id="authContainer">
        <div class="auth-card">
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <h2 class="auth-title">Welcome to Healthara</h2>
            
            <!-- Auth Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" data-auth="login">Login</button>
                <button class="auth-tab" data-auth="signup">Sign Up</button>
            </div>
            
            <!-- Login Form -->
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <div class="form-options">
                    <div class="remember-me">
                        <input type="checkbox" id="rememberMe">
                        <label for="rememberMe">Remember Me</label>
                    </div>
                    <a href="#" class="forgot-password">Forgot Password?</a>
                </div>
                <button type="submit" class="btn">Login</button>
                <button type="button" class="btn btn-secondary" id="guestLoginBtn">Login as Guest</button>
            </form>
            
            <!-- Signup Form -->
            <form class="auth-form" id="signupForm">
                <div class="form-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" placeholder="Choose a username" required>
                    <div class="generated-email" id="generatedEmail" style="display: none;"></div>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="Create a password" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
                </div>
                <div class="form-options">
                    <div class="remember-me">
                        <input type="checkbox" id="agreeTerms">
                        <label for="agreeTerms">I agree to the terms and conditions</label>
                    </div>
                </div>
                <button type="submit" class="btn">Sign Up</button>
                <button type="button" class="btn btn-secondary" id="guestSignupBtn">Login as Guest</button>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer">
        <header>
            <h1 class="header-title">Healthara</h1>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <span id="userName">User</span>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <nav>
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">Dashboard</button>
                <button class="nav-tab" data-tab="mental">Mental Health</button>
                <button class="nav-tab" data-tab="physical">Physical Health</button>
                <button class="nav-tab" data-tab="healthcard">Health Card</button>
                <button class="nav-tab" data-tab="reports">Reports</button>
                <button class="nav-tab" data-tab="gamecenter">Game Center</button>
                <button class="nav-tab" data-tab="settings">Settings</button>
                <button class="nav-tab" data-tab="aboutteam">About the Team</button>
            </div>
        </nav>

        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard">
            <h2 class="greeting">Welcome, <span id="greetingName">User</span>! ðŸ‘‹</h2>
            <p class="daily-quote" id="dailyQuote">"The greatest wealth is health." - Virgil</p>
            <div style="text-align: center; margin: 2rem 0;">
                <button class="btn" id="startHealthQuizBtn" style="max-width: 300px; display: inline-block;">
                    <i class="fas fa-clipboard-list"></i> Start Health Quiz
                </button>
            </div>

            
            <div class="dashboard-cards">
                <div class="dashboard-card" data-section="mental">
                    <div class="dashboard-card-icon">ðŸ§ </div>
                    <h3 class="dashboard-card-title">Mental Health</h3>
                    <p class="dashboard-card-description">Nurture your mind with mood tracking and mindfulness</p>
                </div>
                <div class="dashboard-card" data-section="physical">
                    <div class="dashboard-card-icon">ðŸ’ª</div>
                    <h3 class="dashboard-card-title">Physical Health</h3>
                    <p class="dashboard-card-description">Track your nutrition, posture, and daily wellness</p>
                </div>
                <div class="dashboard-card" data-section="healthcard">
                    <div class="dashboard-card-icon">ðŸ’³</div>
                    <h3 class="dashboard-card-title">Health Card</h3>
                    <p class="dashboard-card-description">Your personal health information card</p>
                </div>
                <div class="dashboard-card" data-section="reports">
                    <div class="dashboard-card-icon">ðŸ“Š</div>
                    <h3 class="dashboard-card-title">Reports</h3>
                    <p class="dashboard-card-description">View your health reports and analytics</p>
                </div>
            </div>

            <div class="analytics-container">
                <h3 class="analytics-title">Health Analytics Overview</h3>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h4 class="chart-title">Weekly Calm Score</h4>
                        <canvas id="weeklyActivityChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4 class="chart-title">Sleep vs. Mood</h4>
                        <canvas id="sleepMoodChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4 class="chart-title">Daily Stability Score</h4>
                        <canvas id="stabilityChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4 class="chart-title">Calories vs. Goal</h4>
                        <canvas id="caloriesChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="progress-bars">
                <div class="progress-card">
                    <div class="progress-header">
                        <div class="progress-title">
                            <i class="fas fa-bed"></i> Sleep Tracker
                        </div>
                        <div class="progress-value">7.5/8 hrs</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill sleep" style="width: 94%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <div class="progress-title">
                            <i class="fas fa-walking"></i> Step Count
                        </div>
                        <div class="progress-value">7,200/10,000</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill steps" style="width: 72%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <div class="progress-title">
                            <i class="fas fa-tint"></i> Hydration
                        </div>
                        <div class="progress-value">6/8 glasses</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill hydration" style="width: 75%;"></div>
                    </div>
                </div>
            </div>

            <div class="daily-indicators">
                <div class="indicator">
                    <div class="indicator-icon completed">
                        <i class="fas fa-smile"></i>
                    </div>
                    <div class="indicator-label">Mood Logged</div>
                </div>
                <div class="indicator">
                    <div class="indicator-icon completed">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="indicator-label">Meal Logged</div>
                </div>
                <div class="indicator">
                    <div class="indicator-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="indicator-label">Journal Updated</div>
                </div>
            </div>

            <div class="reminders-bar">
                <div class="reminder">
                    <span class="reminder-icon">ðŸ’§</span>
                    <span>Time for a glass of water!</span>
                </div>
                <div class="reminder">
                    <span class="reminder-icon">ðŸ§ </span>
                    <span>Mood check reminder!</span>
                </div>
                <div class="reminder">
                    <span class="reminder-icon">ðŸ½</span>
                    <span>Don't forget to log your lunch!</span>
                </div>
            </div>

            <div class="rewards-section">
                <h3 class="rewards-title">Your Achievements</h3>
                <div class="badges-container">
                    <div class="badge unlocked">
                        <div class="badge-icon">ðŸ”¥</div>
                        <div class="badge-name">Calm Streak</div>
                    </div>
                    <div class="badge">
                        <div class="badge-icon">ðŸ‘Ÿ</div>
                        <div class="badge-name">Step Champ</div>
                    </div>
                    <div class="badge unlocked">
                        <div class="badge-icon">ðŸ˜Š</div>
                        <div class="badge-name">Mood Master</div>
                    </div>
                    <div class="badge">
                        <div class="badge-icon">ðŸ’§</div>
                        <div class="badge-name">Hydration Hero</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mental Health Section -->
        <div class="content-section" id="mental">
            <div class="mental-features">
                <div class="mental-feature" data-feature="cvinsight">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ‘ï¸</div>
                        <h3 class="feature-title">CV-Insight</h3>
                    </div>
                    <p class="feature-description">Real-time emotion & stress level detector using webcam</p>
                </div>
                <div class="mental-feature" data-feature="releasing">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸŒ¬ï¸</div>
                        <h3 class="feature-title">Releasing Ritual</h3>
                    </div>
                    <p class="feature-description">Let it go, glow again with guided emotional release</p>
                </div>
                <div class="mental-feature" data-feature="mindful">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ§˜</div>
                        <h3 class="feature-title">Mindful Hub</h3>
                    </div>
                    <p class="feature-description">Meditation & breathing exercises for calm and focus</p>
                </div>
                <div class="mental-feature" data-feature="mindvault">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ”</div>
                        <h3 class="feature-title">Mind Vault</h3>
                    </div>
                    <p class="feature-description">Your personal space for mood and gratitude journaling</p>
                </div>
                <div class="mental-feature" data-feature="mindgarden">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸŒ¸</div>
                        <h3 class="feature-title">Mind Garden</h3>
                    </div>
                    <p class="feature-description">Grow your digital garden with positive actions</p>
                </div>
                
                <div class="mental-feature" data-feature="moodmusic">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸŽµ</div>
                        <h3 class="feature-title">Mood-to-Music</h3>
                    </div>
                    <p class="feature-description">Match your mood with curated music and activities</p>
                </div>

                <div class="mental-feature" data-feature="assessment">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸŒ¬ï¸</div>
                        <h3 class="feature-title">Mind Assessment</h3>
                    </div>
                    <p class="feature-description">Comprehensive mental health assessment with recommendations</p>
                </div>
            </div>
        </div>

        <!-- Physical Health Section -->
        <div class="content-section" id="physical">
            <div class="health-features">

            <!-- Daily Motivation Video Section -->
            <div class="daily-motivation-section">
                <div class="motivation-date" id="motivationDate">Today's Motivational Video</div>
                <h3 class="motivation-title">ðŸŽ¬ Daily Motivation</h3>
                <div id="dailyVideoContainer">
                    <!-- Video thumbnail will be inserted here -->
                </div>
            </div>


                <div class="health-feature" data-feature="caloriesmart">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸŽ</div>
                        <h3 class="feature-title">Smart Calorie</h3>
                    </div>
                    <p class="feature-description">Track calories and nutrients with AI meal analysis</p>
                </div>
                <div class="health-feature" data-feature="recipe">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ¥—</div>
                        <h3 class="feature-title">Aaj Kya Khayen (à¤†à¤œ à¤•à¥à¤¯à¤¾ à¤–à¤¾à¤à¤?)</h3>
                    </div>
                    <p class="feature-description">Smart recipe generator using ingredients you have</p>
                </div>
                <div class="health-feature" data-feature="posture">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ§</div>
                        <h3 class="feature-title">Posture Tracker</h3>
                    </div>
                    <p class="feature-description">Uses camera to detect sitting/standing posture</p>
                </div>
                <div class="health-feature" data-feature="wellness">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ’–</div>
                        <h3 class="feature-title">Daily Wellness Check</h3>
                    </div>
                    <p class="feature-description">Self-assessment questions to track your wellness</p>
                </div>
                
                

                <div class="health-feature" data-feature="dietplan">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ¥—</div>
                        <h3 class="feature-title">7-Day Diet Planner</h3>
                    </div>
                    <p class="feature-description">Get personalized weekly meal plans based on your preferences</p>
                </div>

                <div class="health-feature" data-feature="habitbooster">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ”—</div>
                        <h3 class="feature-title">Habit Booster</h3>
                    </div>
                    <p class="feature-description">Stack new habits onto existing ones for lasting change</p>
                </div>

                <div class="health-feature" data-feature="todolist">
                    <div class="feature-header">
                        <div class="feature-icon">âœ…</div>
                        <h3 class="feature-title">Daily To-Do List</h3>
                    </div>
                    <p class="feature-description">Manage daily tasks with smart reminders and progress tracking</p>
                </div>

                <div class="health-feature" data-feature="aboutme">
                    <div class="feature-header">
                        <div class="feature-icon">ðŸ‘¤</div>
                        <h3 class="feature-title">Know About Me</h3>
                    </div>
                    <p class="feature-description">Personalize your experience with your health profile</p>
                </div>
            </div>
        </div>

        <!-- Health Card Section -->
        <div class="content-section" id="healthcard">
            <div class="health-card-container">
                <div class="health-card-form">
                    <h3 class="health-card-title">
                        <span class="health-card-icon">ðŸ’³</span>
                        Generate Your Health Card
                    </h3>
                    <form id="healthCardForm">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="cardName">Name</label>
                                <input type="text" id="cardName" required>
                            </div>
                            <div class="form-field">
                                <label for="cardAge">Age</label>
                                <input type="number" id="cardAge" required>
                            </div>
                            <div class="form-field">
                                <label for="cardGender">Gender</label>
                                <select id="cardGender" required>
                                    <option value="">Select</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-field">
                                <label for="cardWeight">Weight (kg)</label>
                                <input type="number" id="cardWeight" required>
                            </div>
                            <div class="form-field">
                                <label for="cardHeight">Height (cm)</label>
                                <input type="number" id="cardHeight" required>
                            </div>
                            <div class="form-field">
                                <label for="cardBloodGroup">Blood Group</label>
                                <select id="cardBloodGroup" required>
                                    <option value="">Select</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-field">
                                <label for="cardAllergies">Allergies</label>
                                <input type="text" id="cardAllergies">
                            </div>
                            <div class="form-field">
                                <label for="cardActivityLevel">Activity Level</label>
                                <select id="cardActivityLevel" required>
                                    <option value="">Select</option>
                                    <option value="sedentary">Sedentary</option>
                                    <option value="light">Light</option>
                                    <option value="moderate">Moderate</option>
                                    <option value="active">Active</option>
                                    <option value="very-active">Very Active</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-field">
                            <label for="cardHealthGoal">Health Goal</label>
                            <input type="text" id="cardHealthGoal" required>
                        </div>
                        <button type="submit" class="generate-card-btn">Generate Health Card</button>
                    </form>
                    <div class="generated-card" id="generatedCard">
                        <div class="card-header">
                            <div class="card-logo">Healthara</div>
                            <div class="card-date" id="cardDate"></div>
                        </div>
                        <div class="card-info">
                            <div class="card-info-item">
                                <div class="card-info-label">Name</div>
                                <div class="card-info-value" id="cardInfoName"></div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">Age</div>
                                <div class="card-info-value" id="cardInfoAge"></div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">Gender</div>
                                <div class="card-info-value" id="cardInfoGender"></div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">Blood Group</div>
                                <div class="card-info-value" id="cardInfoBloodGroup"></div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">Allergies</div>
                                <div class="card-info-value" id="cardInfoAllergies"></div>
                            </div>
                            <div class="card-info-item">
                                <div class="card-info-label">Activity Level</div>
                                <div class="card-info-value" id="cardInfoActivityLevel"></div>
                            </div>
                        </div>
                        <div class="card-bmi">
                            <div>
                                <div class="card-info-label">BMI</div>
                                <div class="bmi-value" id="bmiValue"></div>
                            </div>
                            <div class="bmi-category" id="bmiCategory"></div>
                        </div>
                        <div class="card-info-item">
                            <div class="card-info-label">Health Goal</div>
                            <div class="card-info-value" id="cardInfoHealthGoal"></div>
                        </div>
                    </div>
                    <button class="download-card-btn" id="downloadCardBtn" style="display: none;">Download Health Card (PDF)</button>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div class="content-section" id="reports">
            <div class="reports-container">
                <div class="report-card">
                    <h3 class="report-title">
                        <span class="report-icon">ðŸ’§</span>
                        pH Test Report
                    </h3>
                    <div class="ph-meter">
                        <div class="ph-indicator" id="phIndicator" style="left: 50%;"></div>
                    </div>
                    <div class="ph-labels">
                        <span>Acidic (4.5)</span>
                        <span>Neutral (7.0)</span>
                        <span>Alkaline (9.0)</span>
                    </div>
                    <div class="ph-value" id="phValue">7.0</div>
                    <div class="ph-suggestion">
                        <p>Your urine pH is in the normal range. Continue to stay hydrated and maintain a balanced diet.</p>
                    </div>
                    <button class="scan-btn" id="connectPhSensorBtn">Connect pH Sensor</button>
                </div>

                <div class="saved-reports">
                    <h3 class="saved-reports-title">
                        <span class="report-icon">ðŸ“</span>
                        Saved Reports
                    </h3>
                    <div class="reports-list" id="reportsList">
                        <!-- Reports will be dynamically added here -->
                    </div>
                </div>
            </div>
        </div>


        <!-- About the Team Section -->
        <div class="content-section" id="aboutteam">
            <div class="about-team-container">
                <h2 class="section-title" style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem; background: linear-gradient(90deg, #BC13FE, #dd24a6); -webkit-background-clip: text; background-clip: text; color: transparent;">Meet Our Team</h2>
                
                <div class="team-cards-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 3rem; margin-bottom: 3rem;">
                    <!-- Fiona's Card -->
                    <div style="background: var(--glass-bg); backdrop-filter: blur(10px); border-radius: 20px; padding: 2.5rem; border: 1px solid var(--glass-border); box-shadow: var(--card-shadow); display: flex; flex-direction: column; align-items: center;">
                        <div style="width: 150px; height: 150px; border-radius: 50%; overflow: hidden; border: 3px solid transparent; background: linear-gradient(90deg, #BC13FE,#dd24a6); padding: 3px; margin-bottom: 1.5rem;">
    <img src="fiona.jpeg" alt="Fiona Sachdeva" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
</div>

                        <h3 style="font-size: 1.8rem; margin-bottom: 0.5rem; background: linear-gradient(90deg, #BC13FE, #00FFFF); -webkit-background-clip: text; background-clip: text; color: transparent;">Fiona Sachdeva</h3>
                        <p style="color: var(--text-secondary); font-size: 1rem; margin-bottom: 1.5rem; font-weight: 500;">Co-Founder & Lead Developer</p>
                        <p style="color: var(--text-secondary); line-height: 1.8; text-align: justify; font-size: 0.95rem;">
                            I'm Fiona Sachdeva, a student driven by a genuine passion for coding, creativity, and building technology solutions that create real social impact. What began as simple curiosity has evolved into a purposeful journey of developing meaningful digital projects that make everyday life healthier, safer, and more connected. I work with Python, HTML, CSS, JavaScript, and I am currently exploring C++ to strengthen my problem-solving skills and deepen my understanding of core programming principles. I frequently design and code in environments such as VS Code, Jupyter Notebook, Scratch, Thunkable, MIT App Inventor, CodePen, Canva, Adobe Express, Figma, and Python IDLE, which help me bring ideas to life.
                            <br><br>
                            I have developed several socially driven applications focused on real-world needs. Namaste AI, an AI-powered cultural learning platform, won a National-Level Innovation Competition organized by STEMROBO for its engaging approach to cultural awareness. Healthara, my AI-based wellness app, promotes physical and mental wellbeing through personalized, accessible guidance. Mitti encourages environmental responsibility through mindful daily actions, and SheSafe empowers women's safety through smart and accessible protection features. Additionally, projects like Seikai have allowed me to explore innovation and refine my practical thinking.
                            <br><br>
                            Beyond programming, I have a strong interest in graphic designing. I have worked extensively with Canva, Adobe Express, and Figma, and I've explored numerous AI creativity tools to enhance my design capabilities. I have won multiple competitions, including AI for Art and several school-level and interschool design and innovation contests. Competitions such as the CBSE Skill Expo and various design exhibitions hold a special place for me, as they have not only recognized my work but also strengthened my confidence and commitment to learn more.
                            <br><br>
                            I am known as a creative thinker with a problem-solving mindset, someone who can work with dedication, clarity, and discipline. I have often worked over 20 hours a day when deeply focused on building or improving a project. I proudly balance both my academic excellence and my technical project work, always striving to evolve as a learner and creator.
                            <br><br>
                            My future goal is to become an entrepreneur who builds meaningful, human-centered solutions. I believe that technology should serve society with empathy, awareness, and purpose, and I am continuously working toward that vision.
                        </p>
                    </div>
                    
                    <!-- Arhita's Card -->
                    <div style="background: var(--glass-bg); backdrop-filter: blur(10px); border-radius: 20px; padding: 2.5rem; border: 1px solid var(--glass-border); box-shadow: var(--card-shadow); display: flex; flex-direction: column; align-items: center;">
                        <div style="width: 150px; height: 150px; border-radius: 50%; overflow: hidden; border: 3px solid transparent; background: linear-gradient(90deg, #BC13FE,#dd24a6); padding: 3px; margin-bottom: 1.5rem;">
    <img src="arhita.jpeg" alt="Arhita Jain" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
</div>

                        <h3 style="font-size: 1.8rem; margin-bottom: 0.5rem; background: linear-gradient(90deg, #BC13FE, #00FFFF); -webkit-background-clip: text; background-clip: text; color: transparent;">Arhita Jain</h3>
                        <p style="color: var(--text-secondary); font-size: 1rem; margin-bottom: 1.5rem; font-weight: 500;">Co-Founder & Lead Counselor</p>
                        <p style="color: var(--text-secondary); line-height: 1.8; text-align: justify; font-size: 0.95rem;">
                            My name is Arhita Jain, and I am a student of Class 8. I have always been deeply curious about technology and innovation. My journey with programming began when I was in third grade, and since then, I have continued to explore, experiment, and create with great enthusiasm. Coding for me is not just a skillâ€”it's a way to express ideas, solve real-world problems, and make an impact.
                            <br><br>
                            Over the years, I have learned and mastered several programming languages and tools. I can code in Python, HTML, CSS, and JavaScript (GSS), and I also have hands-on experience with block-based coding platforms such as Scratch, Thunkable, MIT App Inventor, and CodePen. I frequently work on professional environments like VS Code, Python IDLE, Jupyter Notebook, and Sublime Text, which help me bring my creative ideas to life through technology.
                            <br><br>
                            I have developed several innovative and socially driven apps such as Namaste AI, Healthara, Mitti, and SheSafe. Each app has a unique purpose and reflects my belief that technology should be used for positive change. Namaste AI, an AI-powered cultural learning app, won a national-level competition organized by STEMROBO, while Healthara, my wellness-focused app, promotes healthy living through AI-powered suggestions. My other projects, Mitti and SheSafe, focus on environmental sustainability and women's safety respectively.
                            <br><br>
                            I have proudly represented my school in multiple competitions and exhibitions, including the CBSE Skill Expo, where I showcased my projects and innovative ideas before a wide audience. I am also an active participant in ATL (Atal Tinkering Lab) and Computer Science activities, where I constantly challenge myself to think beyond the ordinary.
                            <br><br>
                            Apart from technology, I love learning new languages and exploring different cultures. I can speak English, Hindi, German, and Mandarin, which helps me connect with people across the world and enhances my global perspective. I believe that being multilingual and tech-savvy gives me the power to bridge cultures through innovation.
                            <br><br>
                            I am a firm believer in using creativity and technology hand in hand to make the world a better place. My goal is to continue developing impactful apps and projects that solve real-life problems, inspire others, and contribute to building a smarter, kinder, and more sustainable future.
                        </p>
                    </div>
                </div>
                
                <div class="team-mission" style="background: var(--glass-bg); backdrop-filter: blur(10px); border-radius: 20px; padding: 2rem; border: 1px solid var(--glass-border); box-shadow: var(--card-shadow); text-align: center;">
                    <p style="font-size: 1.2rem; line-height: 1.8; color: var(--text-secondary);">
                        Together, Fiona and Arhita are passionate young innovators who aim to create technology that supports both mental and physical well-being. Their vision is to make wellness feel gentle, accessible, and meaningful for everyone through the power of innovation and empathy.
                    </p>
                </div>
            </div>
        </div>


        <!-- Settings Section -->
        <!-- Game Center Section -->
        <div class="content-section" id="gamecenter">
            <div class="game-center-container">
                <h2 class="section-title" style="text-align: center; font-size: 2.5rem; margin-bottom: 2rem; background: linear-gradient(90deg, #BC13FE, #00FFFF); -webkit-background-clip: text; background-clip: text; color: transparent;">Game Center</h2>
                <p style="text-align: center; color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 3rem;">Play interactive wellness games to learn about health in a fun way!</p>
                
                <div class="games-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmin(300px, 1fr)); gap: 2rem;">
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ·ï¸</div>
                        <h3 class="dashboard-card-title">The Label Trap</h3>
                        <p class="dashboard-card-description">Learn to read food labels correctly</p>
                        <a href="https://frihita.github.io/The_label_trap/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ¬</div>
                        <h3 class="dashboard-card-title">Sugar Illusion</h3>
                        <p class="dashboard-card-description">Discover hidden sugars in everyday foods</p>
                        <a href="https://frihita.github.io/Sugar-illusion/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ’§</div>
                        <h3 class="dashboard-card-title">Water Quest</h3>
                        <p class="dashboard-card-description">Master the art of staying hydrated</p>
                        <a href="https://frihita.github.io/water-quest/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">âš–ï¸</div>
                        <h3 class="dashboard-card-title">BMI Battle</h3>
                        <p class="dashboard-card-description">Understand BMI and healthy weight ranges</p>
                        <a href="https://frihita.github.io/BMI-battle/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ‡®ðŸ‡³</div>
                        <h3 class="dashboard-card-title">Label Padega India</h3>
                        <p class="dashboard-card-description">Know your food labels for healthier choices</p>
                        <a href="https://frihita.github.io/label-padega-india/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸŒ±</div>
                        <h3 class="dashboard-card-title">Mind Garden Quiz</h3>
                        <p class="dashboard-card-description">Test your mental wellness knowledge</p>
                        <a href="https://frihita.github.io/mind-garden-quiz/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ˜Š</div>
                        <h3 class="dashboard-card-title">Smile Spark</h3>
                        <p class="dashboard-card-description">Boost your mood with positive activities</p>
                        <a href="https://frihita.github.io/smile-spark/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ§©</div>
                        <h3 class="dashboard-card-title">Mind Myths</h3>
                        <p class="dashboard-card-description">Bust common mental health misconceptions</p>
                        <a href="https://frihita.github.io/mind-myths/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">âœ¨</div>
                        <h3 class="dashboard-card-title">Modern Mirage</h3>
                        <p class="dashboard-card-description">See through modern health myths</p>
                        <a href="https://frihita.github.io/Morden_mirage/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸŽ­</div>
                        <h3 class="dashboard-card-title">Everyday Illusion</h3>
                        <p class="dashboard-card-description">Challenge your perception of daily health habits</p>
                        <a href="https://frihita.github.io/everyday-illusion/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸ‹ï¸</div>
                        <h3 class="dashboard-card-title">The Fitness Confusion</h3>
                        <p class="dashboard-card-description">Clear up fitness myths and facts</p>
                        <a href="https://frihita.github.io/The-Fitness-Confusion/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                    
                    <div class="dashboard-card" style="text-align: center;">
                        <div class="dashboard-card-icon" style="font-size: 3rem;">ðŸŒ¿</div>
                        <h3 class="dashboard-card-title">The Natural Deception</h3>
                        <p class="dashboard-card-description">Learn what 'natural' really means in food</p>
                        <a href="https://frihita.github.io/The_natural_deception/" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                            <button class="btn" style="margin-top: 1rem; width: auto; padding: 0.6rem 1.5rem;">Play Now</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section" id="settings">
            <div class="settings-container">
                <div class="settings-card">
                    <h3 class="settings-title">
                        <span class="settings-icon">ðŸ‘¤</span>
                        Profile Settings
                    </h3>
                    <div class="settings-option">
                        <div class="settings-label">Edit Profile</div>
                        <button class="settings-btn">Edit</button>
                    </div>
                    <div class="settings-option">
                        <div class="settings-label">Reset Progress</div>
                        <button class="settings-btn danger">Reset</button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3 class="settings-title">
                        <span class="settings-icon">ðŸ””</span>
                        Notification Settings
                    </h3>
                    <div class="settings-option">
                        <div class="settings-label">Water Reminders</div>
                        <div class="toggle-switch active" id="waterToggle">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="settings-option">
                        <div class="settings-label">Mood Check Reminders</div>
                        <div class="toggle-switch active" id="moodToggle">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="settings-option">
                        <div class="settings-label">Meal Logging Reminders</div>
                        <div class="toggle-switch active" id="mealToggle">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <h3 class="settings-title">
                        <span class="settings-icon">ðŸŽ¨</span>
                        Appearance Settings
                    </h3>
                    <div class="settings-option">
                        <div class="settings-label">Dark Mode</div>
                        <div class="toggle-switch active" id="darkModeToggle">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="settings-card">
                    <h3 class="settings-title">
                        <span class="settings-icon">ðŸšª</span>
                        Account Settings
                    </h3>
                    <div class="settings-option">
                        <div class="settings-label">Logout</div>
                        <button class="settings-btn danger" id="settingsLogoutBtn">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Feature Modals -->
    <!-- CV-Insight Modal -->
    <div class="modal" id="cvinsightModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="cvinsightModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">CV-Insight â€” Real-Time Emotion & Stress Detector</h2>
            <div class="cv-insight-container">
                <div class="cv-insight-header">
                    <h3>Track your emotions in real-time</h3>
                    <p class="cv-insight-subtitle">Allow camera access to begin emotion detection</p>
                </div>
                
                <div class="cv-insight-content">
                    <div class="cv-camera-section">
                        <div class="cv-camera-preview" id="cvCameraPreview">
                            <div class="cv-camera-placeholder">
                                <i class="fas fa-video"></i>
                            </div>
                        </div>
                        <div class="cv-controls">
                            <button class="cv-btn" id="startCvBtn">Start Detection</button>
                            <button class="cv-btn" id="stopCvBtn" disabled>Stop Detection</button>
                        </div>
                        <button class="cv-snapshot-btn" id="cvSnapshotBtn" disabled>ðŸ“¸ Capture Snapshot</button>
                    </div>
                    
                    <div class="cv-analysis-section">
                        <div class="cv-stress-meter">
                            <h4 class="stress-meter-title">Stress Level</h4>
                            <div class="stress-bar-container">
                                <div class="stress-indicator" id="stressIndicator" style="left: 20%;"></div>
                            </div>
                            <div class="stress-labels">
                                <span>Low</span>
                                <span>Medium</span>
                                <span>High</span>
                            </div>
                            <div class="stress-value low" id="stressValue">20%</div>
                        </div>
                        
                        <div class="cv-current-mood" id="currentMood">
                            Current Mood: Neutral ðŸ˜
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Releasing Ritual Modal -->
    <div class="modal" id="releasingModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="releasingModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Releasing Ritual â€” Let It Go, Glow Again âœ¨</h2>
            <div class="releasing-ritual-container">
                <div class="ritual-header">
                    <h3>Take a moment to release what no longer serves you</h3>
                    <p class="ritual-subtitle">A guided emotional detox experience</p>
                </div>
                
                <div class="ritual-step">
                    <div class="ritual-step-title">
                        <div class="ritual-step-number">1</div>
                        <span>Emotional Input</span>
                    </div>
                    <p>What's been weighing on your mind?</p>
                    <textarea class="emotion-input" id="emotionInput" placeholder="Express your thoughts and feelings here..."></textarea>
                    
                    <div class="mood-selector">
                        <div class="mood-option" data-mood="sad">
                            <div class="mood-emoji">ðŸ˜¢</div>
                            <div class="mood-label">Sad</div>
                        </div>
                        <div class="mood-option" data-mood="anxious">
                            <div class="mood-emoji">ðŸ˜°</div>
                            <div class="mood-label">Anxious</div>
                        </div>
                        <div class="mood-option" data-mood="guilty">
                            <div class="mood-emoji">ðŸ˜”</div>
                            <div class="mood-label">Guilty</div>
                        </div>
                        <div class="mood-option" data-mood="angry">
                            <div class="mood-emoji">ðŸ˜ </div>
                            <div class="mood-label">Angry</div>
                        </div>
                        <div class="mood-option" data-mood="confused">
                            <div class="mood-emoji">ðŸ˜•</div>
                            <div class="mood-label">Confused</div>
                        </div>
                    </div>
                </div>
                
                <button class="release-btn" id="releaseBtn">Release It ðŸŒ¬ï¸</button>
                
                <div class="release-animation" id="releaseAnimation">
                    <div class="burn-text" id="burnText"></div>
                    <div class="fire-container" id="fireContainer">
                        <!-- Fire flames will be added here -->
                    </div>
                    <div class="lantern-container" id="lanternContainer">
                        <!-- Lanterns will be added here -->
                    </div>
                </div>
                
                <div class="ritual-step" id="breathingStep" style="display: none;">
                    <div class="ritual-step-title">
                        <div class="ritual-step-number">2</div>
                        <span>Breathing Exercise</span>
                    </div>
                    <div class="breathing-animation">
                        <div class="breathing-circle">Breathe</div>
                    </div>
                </div>
                
                <div class="ritual-step" id="affirmationStep" style="display: none;">
                    <div class="ritual-step-title">
                        <div class="ritual-step-number">3</div>
                        <span>Reflective Moment</span>
                    </div>
                    <div class="affirmation-text" id="affirmationText">
                        You are allowed to heal at your own pace.
                    </div>
                </div>
                
                <div class="ritual-step" id="moodAfterStep" style="display: none;">
                    <div class="ritual-step-title">
                        <div class="ritual-step-number">4</div>
                        <span>Mood Tracking</span>
                    </div>
                    <p>How do you feel now?</p>
                    <div class="mood-after">
                        <span class="mood-after-label">Before:</span>
                        <div class="mood-after-slider">
                            <button class="mood-emoji-btn" data-mood="very-sad">ðŸ˜­</button>
                            <button class="mood-emoji-btn" data-mood="sad">ðŸ˜¢</button>
                            <button class="mood-emoji-btn" data-mood="neutral">ðŸ˜</button>
                            <button class="mood-emoji-btn" data-mood="happy">ðŸ˜Š</button>
                            <button class="mood-emoji-btn" data-mood="very-happy">ðŸ˜„</button>
                        </div>
                    </div>
                    <div class="mood-after">
                        <span class="mood-after-label">After:</span>
                        <div class="mood-after-slider">
                            <button class="mood-emoji-btn" data-mood="very-sad">ðŸ˜­</button>
                            <button class="mood-emoji-btn" data-mood="sad">ðŸ˜¢</button>
                            <button class="mood-emoji-btn" data-mood="neutral">ðŸ˜</button>
                            <button class="mood-emoji-btn" data-mood="happy">ðŸ˜Š</button>
                            <button class="mood-emoji-btn" data-mood="very-happy">ðŸ˜„</button>
                        </div>
                    </div>
                    <button class="save-ritual-btn" id="saveRitualBtn">Save Ritual</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mindful Hub Modal -->
    <div class="modal" id="mindfulModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="mindfulModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Mindful Hub</h2>
            <div class="mindful-hub">
                <div class="meditation-section">
                    <h3 class="meditation-title">Meditation Tracks</h3>
                    <div class="meditation-tracks">
                        <!-- Your meditation tracks -->
<div class="meditation-track">
    <div class="track-icon">ðŸŒ™</div>
    <div class="track-name">Moonlight Serenity</div>
    <div class="track-description">Calming evening meditation music</div>
    <button class="play-btn" data-track="moonlight">Play</button>
</div>
<div class="meditation-track">
    <div class="track-icon">â˜€ï¸</div>
    <div class="track-name">Sunrise Clarity</div>
    <div class="track-description">Morning positivity track</div>
    <button class="play-btn" data-track="sunrise">Play</button>
</div>
<div class="meditation-track">
    <div class="track-icon">ðŸŒŠ</div>
    <div class="track-name">Ocean Flow</div>
    <div class="track-description">Deep focus & relaxation loop</div>
    <button class="play-btn" data-track="ocean">Play</button>
</div>

<script>
    const tracks = {
        moonlight: "moonlight-serenity.mp3",
        sunrise: "sunrise-clarity.mp3",
        ocean: "ocean-flow.mp3"
    };

    const audio = new Audio();
    let currentTrack = null; // Keep track of which track is playing
    const buttons = document.querySelectorAll(".play-btn");

    buttons.forEach(button => {
        button.addEventListener("click", () => {
            const trackName = button.getAttribute("data-track");

            // If clicking the same track that's already playing, pause it
            if (currentTrack === trackName && !audio.paused) {
                audio.pause();
                button.textContent = "Play";
                currentTrack = null;
                return;
            }

            // Pause any current track and reset all buttons
            audio.pause();
            buttons.forEach(btn => btn.textContent = "Play");

            // Play new track
            audio.src = tracks[trackName];
            audio.play();
            button.textContent = "Stop";
            currentTrack = trackName;
        });
    });

    // Reset button text when audio ends
    audio.addEventListener("ended", () => {
        buttons.forEach(btn => btn.textContent = "Play");
        currentTrack = null;
    });
</script>


                    </div>
                </div>
                
                <div class="breathing-section">
                    <h3 class="breathing-title">Breathing Exercise</h3>
                    <div class="breathing-modes">
                        <button class="breathing-mode active" data-mode="30sec">30 seconds</button>
                        <button class="breathing-mode" data-mode="1min">1 minute</button>
                        <button class="breathing-mode" data-mode="478">4-7-8 technique</button>
                    </div>
                    <div class="breathing-animation">
                        <div class="breathing-circle" id="breathingCircle">Breathe</div>
                    </div>
                    <div class="breathing-controls">
                        <button class="breathing-btn" id="startBreathingBtn">Start</button>
                        <button class="breathing-btn" id="stopBreathingBtn">Stop</button>
                    </div>
                    <div class="breathing-result" id="breathingResult">
                        <div class="breathing-badge">Breathing Master</div>
                        <p>You mastered today's breath flow ðŸŒ¿</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mind Vault Modal -->
    <div class="modal" id="mindvaultModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="mindvaultModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Mind Vault</h2>
            <div class="mind-vault">
                <p class="gratitude-intro">"God has gifted us with another beautiful day â€” let's reflect with gratitude."</p>
                
                <div class="mood-selector">
                    <div class="mood-option" data-mood="very-happy">
                        <div class="mood-emoji">ðŸ˜„</div>
                        <div class="mood-label">Very Happy</div>
                    </div>
                    <div class="mood-option" data-mood="happy">
                        <div class="mood-emoji">ðŸ˜Š</div>
                        <div class="mood-label">Happy</div>
                    </div>
                    <div class="mood-option" data-mood="neutral">
                        <div class="mood-emoji">ðŸ˜</div>
                        <div class="mood-label">Neutral</div>
                    </div>
                    <div class="mood-option" data-mood="sad">
                        <div class="mood-emoji">ðŸ˜¢</div>
                        <div class="mood-label">Sad</div>
                    </div>
                    <div class="mood-option" data-mood="very-sad">
                        <div class="mood-emoji">ðŸ˜­</div>
                        <div class="mood-label">Very Sad</div>
                    </div>
                </div>
                
                <div class="journal-section">
                    <h3>Gratitude Journal</h3>
                    <textarea class="journal-textarea" id="gratitudeText" placeholder="What are you grateful for today?"></textarea>
                </div>
                
                <div class="journal-section">
                    <h3>Mood Journal</h3>
                    <textarea class="journal-textarea" id="moodText" placeholder="How are you feeling today? Write your thoughts here..."></textarea>
                </div>
                
                <div class="journal-actions">
                    <button class="save-journal-btn" id="saveJournalBtn">Save Entry</button>
                    <button class="download-journal-btn" id="downloadJournalBtn">Download Entry</button>
                </div>
                
                <div class="streak-indicator">
                    <h4>Consistency Streak</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 70%; background: linear-gradient(90deg, #BC13FE, #00FFFF);"></div>
                    </div>
                    <p>7 days in a row! Keep it up!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Mind Garden Modal -->
    <div class="modal" id="mindgardenModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="mindgardenModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Mind Garden</h2>
            <div class="mind-garden">
                <div class="garden-container" id="gardenContainer">
                    <div class="garden-ground"></div>
                </div>
                <div class="deed-input-container">
                    <input type="text" class="deed-input" id="deedInput" placeholder="Enter a good deed you did today...">
                    <button class="add-deed-btn" id="addDeedBtn">Add Deed</button>
                </div>
                
                <div class="daily-affirmation">
                    <div class="affirmation-text" id="affirmationText">"You are capable of amazing things."</div>
                    <button class="refresh-affirmation-btn" id="refreshAffirmationBtn">New Affirmation</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mind Assessment Modal -->
    <div class="modal" id="assessmentModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="assessmentModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Mind Assessment</h2>
            <div class="mind-assessment">
                <div class="assessment-questions" id="assessmentQuestions">
                    <!-- Questions will be added here -->
                </div>
                <button class="submit-assessment-btn" id="submitAssessmentBtn">Submit Assessment</button>
                <div class="assessment-result" id="assessmentResult">
                    <div class="result-score" id="mentalHealthScore">Mental Health Score: 75/100</div>
                    <div class="result-advice">
                        <p>Your mental health assessment results:</p>
                    </div>
                    <div class="result-recommendations">
                        <h4>Recommendations:</h4>
                        <ul class="recommendation-list" id="assessmentRecommendations">
                            <!-- Recommendations will be added here -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- CalorieSmart Modal -->
    <div class="modal" id="caloriesmartModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="caloriesmartModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Smart Calorie</h2>
            <div class="caloriesmart-container">
                <div class="calorie-setup">
                    <h3>Set Your Personalized Calorie Budget</h3>
                    <div class="calorie-input-group">
                        <input type="text" class="calorie-input" id="calorieNameInput" placeholder="Your Name">
                        <input type="number" class="calorie-input" id="ageInput" placeholder="Your Age">
                        <select class="calorie-input" id="genderSelect">
                            <option value="">Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                        </select>
                        <input type="number" class="calorie-input" id="weightInput" placeholder="Weight (kg)">
                        <input type="number" class="calorie-input" id="heightInput" placeholder="Height (cm)">
                        <select class="calorie-input" id="activitySelect">
                            <option value="">Activity Level</option>
                            <option value="sedentary">Sedentary</option>
                            <option value="light">Light</option>
                            <option value="moderate">Moderate</option>
                            <option value="active">Active</option>
                            <option value="very-active">Very Active</option>
                        </select>
                        <select class="calorie-input" id="goalSelect">
                            <option value="">Goal</option>
                            <option value="lose">Lose Weight</option>
                            <option value="maintain">Maintain Weight</option>
                            <option value="gain">Gain Weight</option>
                        </select>
                    </div>
                    <button class="scan-btn" id="calculateCaloriesBtn">Calculate Calorie Budget</button>
                    <div class="calorie-alert" id="calorieAlert" style="display: none; margin-top: 1rem; padding: 1rem; background: rgba(248, 113, 113, 0.2); border-radius: 10px; border: 1px solid var(--danger);">
                        <p>âš ï¸ You're over your daily calorie budget!</p>
                    </div>
                </div>
                
                <div class="meal-scanner">
                    <div class="camera-section">
                        <div class="camera-preview" id="mealCameraPreview">
                            <div class="camera-placeholder">
                                <i class="fas fa-camera"></i>
                            </div>
                        </div>
                        <div class="file-upload">
                            <input type="file" id="mealImageUpload" accept="image/*">
                            <label for="mealImageUpload" class="file-upload-label">
                                <i class="fas fa-upload"></i> Upload Food Image
                            </label>
                        </div>
                        <input type="text" class="meal-input" id="mealNameInput" placeholder="Enter meal name (optional)">
                        <button class="scan-btn" id="analyzeMealBtn">ðŸ“¸ Analyze Meal</button>
                    </div>
                    
                    <div class="nutrition-section">
                        <div class="calorie-circle-container">
                            <div class="calorie-circle">
                                <canvas id="calorieChart" class="calorie-chart"></canvas>
                                <div class="calorie-text">
                                    <div class="calorie-consumed" id="calorieConsumed">0</div>
                                    <div class="calorie-total" id="calorieTotal">2000 kcal</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="nutrition-info">
                            <h4>Today's Nutrition</h4>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Calories</span>
                                <span class="nutrition-value" id="totalCalories">0 kcal</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Proteins</span>
                                <span class="nutrition-value" id="totalProteins">0g</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Carbs</span>
                                <span class="nutrition-value" id="totalCarbs">0g</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Fats</span>
                                <span class="nutrition-value" id="totalFats">0g</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Sugar</span>
                                <span class="nutrition-value" id="totalSugar">0g</span>
                            </div>
                        </div>
                        
                        <div class="daily-meals">
                            <h4>Today's Meals</h4>
                            <div id="mealsList">
                                <!-- Meals will be added here -->
                            </div>
                        </div>
                        
                        <div class="water-tracker">
                            <h4>Water Tracker</h4>
                            <div class="water-container">
                                <div class="water-droplet">
                                    <svg viewBox="0 0 100 120">
                                        <path d="M50,10 C30,40 10,60 10,85 C10,105 25,115 50,115 C75,115 90,105 90,85 C90,60 70,40 50,10 Z" fill="rgba(255,255,255,0.2)" />
                                        <path d="M50,10 C30,40 10,60 10,85 C10,105 25,115 50,115 C75,115 90,105 90,85 C90,60 70,40 50,10 Z" fill="url(#waterGradient)" id="waterFill" style="height: 30%;" />
                                        <defs>
                                            <linearGradient id="waterGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                                <stop offset="0%" style="stop-color:#06b6d4;stop-opacity:0.8" />
                                                <stop offset="100%" style="stop-color:#22d3ee;stop-opacity:1" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                                <div class="water-controls">
                                    <button class="water-btn" id="addWaterBtn">+ Glass</button>
                                    <button class="water-btn" id="resetWaterBtn">Reset</button>
                                </div>
                                <div class="water-info">
                                    <div class="water-amount" id="waterAmount">3/8 glasses</div>
                                    <p>Hydrate and shine! ðŸ’§</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recipe Generator Modal -->
    <div class="modal" id="recipeModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="recipeModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Aaj Kya Khayen (à¤†à¤œ à¤•à¥à¤¯à¤¾ à¤–à¤¾à¤à¤?)</h2>
            <div class="recipe-generator">
                <div class="ingredients-section">
                    <h3>Select Ingredients You Have</h3>
                    <div class="ingredients-grid" id="ingredientsGrid">
                        <!-- Ingredients will be added here -->
                    </div>
                </div>
                
                <div class="craving-section">
                    <h3>Unhealthy Craving?</h3>
                    <select class="craving-select" id="cravingSelect">
                        <option value="">Select a craving</option>
                        <option value="ice-cream">Ice Cream</option>
                        <option value="chocolate">Chocolate</option>
                        <option value="chips">Chips</option>
                        <option value="pizza">Pizza</option>
                        <option value="burger">Burger</option>
                        <option value="soda">Soda</option>
                        <option value="candy">Candy</option>
                        <option value="fried-food">Fried Food</option>
                    </select>
                </div>
                
                <button class="scan-btn" id="generateRecipeBtnModal">Generate Recipe</button>
                
                <div class="recipe-result" id="recipeResult">
                    <h3 class="recipe-title" id="recipeTitle">Healthy Recipe</h3>
                    <div class="recipe-ingredients">
                        <h4>Ingredients:</h4>
                        <ul id="recipeIngredients">
                            <!-- Ingredients will be added here -->
                        </ul>
                    </div>
                    <div class="recipe-instructions">
                        <h4>Instructions:</h4>
                        <ol id="recipeInstructions">
                            <!-- Instructions will be added here -->
                        </ol>
                    </div>
                    <div class="recipe-nutrition">
                        <h4>Nutrition per serving:</h4>
                        <div class="nutrition-info">
                            <div class="nutrition-item">
                                <span class="nutrition-label">Calories</span>
                                <span class="nutrition-value" id="recipeCalories">250 kcal</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Protein</span>
                                <span class="nutrition-value" id="recipeProtein">15g</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Carbs</span>
                                <span class="nutrition-value" id="recipeCarbs">30g</span>
                            </div>
                            <div class="nutrition-item">
                                <span class="nutrition-label">Fiber</span>
                                <span class="nutrition-value" id="recipeFiber">5g</span>
                            </div>
                        </div>
                    </div>
                    <div class="health-score">
                        <span>Health Score:</span>
                        <span class="score-badge" id="healthScore">8.5/10</span>
                    </div>
                    <button class="scan-btn" id="cookNowBtn">Cook This Now!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Posture Tracker Modal -->
    <div class="modal" id="postureModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="postureModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Posture Tracker</h2>
            <div class="posture-tracker">
                <div class="posture-camera" id="postureCamera">
                    <div class="camera-placeholder">
                        <i class="fas fa-video"></i>
                    </div>
                </div>
                <div class="posture-status good" id="postureStatus">Perfect Posture ðŸŒŸ</div>
                <button class="scan-btn" id="startPostureTracking">Start Tracking</button>
            </div>
        </div>
    </div>

    <!-- Daily Wellness Check Modal -->
    <div class="modal" id="wellnessModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="wellnessModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Daily Wellness Check</h2>
            <div class="wellness-check">
                <div class="wellness-questions">
                    <div id="wellnessQuestionsContainer">
                        <!-- Questions will be added here -->
                    </div>
                    <button class="scan-btn" id="submitWellnessCheck">Submit Check</button>
                </div>
                
                <div class="wellness-report" id="wellnessReport">
                    <h3 class="report-title">Your Wellness Report</h3>
                    <div class="report-score">
                        <div class="score-circle">
                            <div class="score-inner" id="wellnessScore">75%</div>
                        </div>
                        <div class="score-label">Wellness Score</div>
                    </div>
                    <div class="report-recommendations">
                        <h4>Recommendations:</h4>
                        <ul class="recommendation-list" id="wellnessRecommendations">
                            <!-- Recommendations will be added here -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Know About Me Modal -->
    <div class="modal" id="aboutmeModal">
        <div class="modal-content">
            <button class="modal-close" data-modal="aboutmeModal">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="modal-title">Know About Me</h2>
            <div class="about-me">
                <div class="about-me-form">
                    <h3>Personalize Your Health Profile</h3>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="favFood">Favorite Food ðŸ•</label>
                            <input type="text" id="favFood" placeholder="e.g., Pizza">
                        </div>
                        <div class="form-field">
                            <label for="guiltyPleasure">Guilty Pleasure ðŸ«</label>
                            <input type="text" id="guiltyPleasure" placeholder="e.g., Chocolate">
                        </div>
                        <div class="form-field">
                            <label for="favRestaurant">Favorite Restaurant ðŸ½</label>
                            <input type="text" id="favRestaurant" placeholder="e.g., Italian Bistro">
                        </div>
                        <div class="form-field">
                            <label for="favDish">Favorite Dish</label>
                            <input type="text" id="favDish" placeholder="e.g., Pasta Carbonara">
                        </div>
                        <div class="form-field">
                            <label for="favSnack">Favorite Snack</label>
                            <input type="text" id="favSnack" placeholder="e.g., Mixed Nuts">
                        </div>
                        <div class="form-field">
                            <label for="myRecipe">My Own Recipe âœï¸</label>
                            <textarea id="myRecipe" placeholder="Share your special recipe..."></textarea>
                        </div>
                    </div>
                    <div class="form-field">
                        <label for="healthPhilosophy">My Health Philosophy ðŸ’­</label>
                        <textarea id="healthPhilosophy" placeholder="What does health mean to you?"></textarea>
                    </div>
                    <button class="save-profile-btn" id="saveProfileBtn">Save Profile</button>
                </div>
                
                <div class="about-me-card" id="aboutMeCard">
                    <h3 class="about-me-title">My Health Profile</h3>
                    <div class="about-me-info">
                        <div class="about-me-item">
                            <div class="about-me-label">Favorite Food</div>
                            <div class="about-me-value" id="profileFavFood"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">Guilty Pleasure</div>
                            <div class="about-me-value" id="profileGuiltyPleasure"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">Favorite Restaurant</div>
                            <div class="about-me-value" id="profileFavRestaurant"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">Favorite Dish</div>
                            <div class="about-me-value" id="profileFavDish"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">Favorite Snack</div>
                            <div class="about-me-value" id="profileFavSnack"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">My Recipe</div>
                            <div class="about-me-value" id="profileMyRecipe"></div>
                        </div>
                        <div class="about-me-item">
                            <div class="about-me-label">Health Philosophy</div>
                            <div class="about-me-value" id="profileHealthPhilosophy"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // App State
        const appState = {
            user: null,
            theme: 'dark',
            wellnessStreak: 3,
            gardenFlowers: [],
            selectedMood: null,
            postureTracking: false,
            dailyCalorieGoal: 2000,
            consumedCalories: 0,
            dailyMeals: [],
            nutritionData: {
                calories: 0,
                proteins: 0,
                carbs: 0,
                fats: 0,
                sugar: 0
            },
            savedReports: [],
            journalEntries: [],
            uploadedMealImage: null,
            waterIntake: 0,
            waterGoal: 8,
            badges: {
                calmStreak: true,
                stepChamp: false,
                moodMaster: true,
                hydrationHero: false
            },
            notifications: {
                water: true,
                mood: true,
                meal: true
            },
            profileData: {},
            cvInsight: {
                isDetecting: false,
                emotionData: {
                    happy: 0,
                    sad: 0,
                    angry: 0,
                    fearful: 0,
                    disgusted: 0,
                    surprised: 0,
                    neutral: 0
                },
                emotionHistory: [],
                stressLevel: 20,
                currentMood: 'neutral'
            },
            releasingRitual: {
                beforeMood: null,
                afterMood: null,
                emotion: null,
                text: '',
                mode: 'float'
            }
        };

        // Daily Quotes
        const dailyQuotes = [
            "The greatest wealth is health. - Virgil",
            "Take care of your body. It's the only place you have to live. - Jim Rohn",
            "Health is not about the weight you lose, but about the life you gain. - Josh Cox",
            "A healthy outside starts from the inside. - Robert Urich",
            "Your body hears everything your mind says. Stay positive!",
            "The first wealth is health. - Ralph Waldo Emerson",
            "Health is a state of complete harmony of the body, mind and spirit. - B.K.S. Iyengar",
            "To keep the body in good health is a duty... otherwise we shall not be able to keep our mind strong and clear. - Buddha",
            "A fit body, a calm mind, a house full of love. These things cannot be bought. - Naval Ravikant",
            "Physical fitness is the first requisite of happiness. - Joseph Pilates"
        ];

        // Daily Affirmations
        const dailyAffirmations = [
            "You are capable of amazing things.",
            "Your body is a temple, keep it pure and clean for the soul to reside in.",
            "You are strong enough to handle your challenges.",
            "Every day is a fresh start. Make the most of it.",
            "You are worthy of love and respect.",
            "Your potential is limitless.",
            "You are in charge of your health and well-being.",
            "You have the power to create change.",
            "You are enough just as you are.",
            "Your health is an investment, not an expense."
        ];

        // Emotion-based affirmations for Releasing Ritual
        const emotionAffirmations = {
            sad: "You are allowed to heal at your own pace.",
            anxious: "This feeling is temporary. You have overcome challenges before.",
            guilty: "Forgiveness is freedom, not permission.",
            angry: "Your calm is your power.",
            confused: "Even in uncertainty, growth is happening."
        };

        // DOM Elements
        const splashScreen = document.getElementById('splashScreen');
        const authContainer = document.getElementById('authContainer');
        const appContainer = document.getElementById('appContainer');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const guestLoginBtn = document.getElementById('guestLoginBtn');
        const guestSignupBtn = document.getElementById('guestSignupBtn');
        const themeToggle = document.getElementById('themeToggle');
        const logoutBtn = document.getElementById('logoutBtn');
        const settingsLogoutBtn = document.getElementById('settingsLogoutBtn');
        const navTabs = document.querySelectorAll('.nav-tab');
        const contentSections = document.querySelectorAll('.content-section');
        const modalCloseBtns = document.querySelectorAll('.modal-close');
        const userName = document.getElementById('userName');
        const userAvatar = document.getElementById('userAvatar');
        const greetingName = document.getElementById('greetingName');
        const dailyQuote = document.getElementById('dailyQuote');
        const toastContainer = document.getElementById('toastContainer');

        // Initialize App
        function initApp() {
            // Show splash screen for 3 seconds
            setTimeout(() => {
                splashScreen.classList.add('hidden');
                authContainer.classList.add('active');
            }, 3000);

            // Set random daily quote
            const randomQuote = dailyQuotes[Math.floor(Math.random() * dailyQuotes.length)];
            dailyQuote.textContent = randomQuote;

            // Event Listeners
            loginForm.addEventListener('submit', handleLogin);
            signupForm.addEventListener('submit', handleSignup);
            guestLoginBtn.addEventListener('click', handleGuestLogin);
            guestSignupBtn.addEventListener('click', handleGuestLogin);
            themeToggle.addEventListener('click', toggleTheme);
            logoutBtn.addEventListener('click', handleLogout);
            settingsLogoutBtn.addEventListener('click', handleLogout);
            
            // Auth tabs
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const authType = tab.dataset.auth;
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                    tab.classList.add('active');
                    document.getElementById(`${authType}Form`).classList.add('active');
                });
            });

            // Username input for signup - auto-generate email
            const signupUsername = document.getElementById('signupUsername');
            const generatedEmail = document.getElementById('generatedEmail');
            
            if (signupUsername && generatedEmail) {
                signupUsername.addEventListener('input', (e) => {
                    const username = e.target.value.trim();
                    if (username) {
                        const email = `${username}@email.com`;
                        generatedEmail.textContent = `Your email will be: ${email}`;
                        generatedEmail.style.display = 'block';
                    } else {
                        generatedEmail.style.display = 'none';
                    }
                });
            }

            // Navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });

            // Modal Close Buttons
            modalCloseBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const modalId = btn.dataset.modal;
                    document.getElementById(modalId).classList.remove('active');
                });
            });

            // Dashboard Cards
            document.querySelectorAll('.dashboard-card').forEach(card => {
                card.addEventListener('click', () => {
                    const section = card.dataset.section;
                    switchTab(section);
                });
            });

            // Feature Cards
            document.querySelectorAll('.health-feature, .mental-feature').forEach(card => {
                card.addEventListener('click', () => {
                    const feature = card.dataset.feature;
                    openFeatureModal(feature);
                });
            });

            // Settings Toggles
            document.getElementById('waterToggle')?.addEventListener('click', function() {
                this.classList.toggle('active');
                appState.notifications.water = this.classList.contains('active');
                showToast('Water reminders ' + (appState.notifications.water ? 'enabled' : 'disabled'), 'info');
            });

            document.getElementById('moodToggle')?.addEventListener('click', function() {
                this.classList.toggle('active');
                appState.notifications.mood = this.classList.contains('active');
                showToast('Mood reminders ' + (appState.notifications.mood ? 'enabled' : 'disabled'), 'info');
            });

            document.getElementById('mealToggle')?.addEventListener('click', function() {
                this.classList.toggle('active');
                appState.notifications.meal = this.classList.contains('active');
                showToast('Meal reminders ' + (appState.notifications.meal ? 'enabled' : 'disabled'), 'info');
            });

            document.getElementById('darkModeToggle')?.addEventListener('click', function() {
                this.classList.toggle('active');
                toggleTheme();
            });

            // Initialize Feature Modals
            initCVInsight();
            initReleasingRitual();
            initMindfulHub();
            initMindVault();
            initMindGarden();
            initMindAssessment();
            initCalorieSmart();
            initRecipeGenerator();
            initPostureTracker();
            initWellnessCheck();
            initAboutMe();
            initHealthCard();
            initReports();
            initDashboardCharts();
            
            // Load saved data
            loadUserData();
            
            // Set up reminders
            setupReminders();
        }

        // Authentication Functions
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Check if user exists in localStorage
            const userData = localStorage.getItem(`healthara_${email}`);
            
            if (userData) {
                const user = JSON.parse(userData);
                
                // Verify password (in a real app, you'd use proper password hashing)
                if (user.password === password) {
                    // Set user state
                    appState.user = {
                        email: email,
                        name: user.name,
                        username: user.username
                    };
                    
                    // Update UI
                    userName.textContent = user.name;
                    userAvatar.textContent = user.name.charAt(0).toUpperCase();
                    greetingName.textContent = user.name;
                    
                    // Load user data
                    loadUserData();
                    
                    // Switch to app
                    authContainer.classList.remove('active');
                    appContainer.classList.add('active');
                    
                    // Show welcome toast
                    showToast(`Welcome back, ${user.name}!`, 'success');
                } else {
                    showToast('Invalid email or password', 'error');
                }
            } else {
                showToast('No account found with this email. Please sign up first.', 'error');
            }
        }

        function handleSignup(e) {
            e.preventDefault();
            const username = document.getElementById('signupUsername').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // Validation
            if (!username) {
                showToast('Please enter a username', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showToast('Please agree to the terms and conditions', 'error');
                return;
            }
            
            // Generate email
            const email = `${username}@email.com`;
            
            // Check if user already exists
            const existingUser = localStorage.getItem(`healthara_${email}`);
            if (existingUser) {
                showToast('An account with this username already exists', 'error');
                return;
            }
            
            // Create user account
            const formattedName = username.replace(/[^a-zA-Z0-9]/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            const userAccount = {
                email: email,
                username: username,
                name: formattedName,
                password: password, // In a real app, this should be hashed
                createdAt: new Date().toISOString()
            };
            
            // Save user account
            localStorage.setItem(`healthara_${email}`, JSON.stringify(userAccount));
            
            // Set user state
            appState.user = {
                email: email,
                name: formattedName,
                username: username
            };
            
            // Update UI
            userName.textContent = formattedName;
            userAvatar.textContent = formattedName.charAt(0).toUpperCase();
            greetingName.textContent = formattedName;
            
            // Initialize user data
            initializeUserData();
            
            // Switch to app
            authContainer.classList.remove('active');
            appContainer.classList.add('active');
            
            // Show welcome toast
            showToast(`Account created successfully! Welcome, ${formattedName}!`, 'success');
        }

        function handleGuestLogin() {
            // Set guest user state
            appState.user = {
                email: 'guest',
                name: 'Guest User',
                username: 'Guest'
            };
            
            // Update UI
            userName.textContent = 'Guest';
            userAvatar.textContent = 'G';
            greetingName.textContent = 'Guest';
            
            // Switch to app
            authContainer.classList.remove('active');
            appContainer.classList.add('active');
            
            // Show welcome toast
            showToast('Welcome, Guest!', 'success');
        }

        function handleLogout() {
            // Save user data before logout
            saveUserData();
            
            // Reset user state
            appState.user = null;
            appContainer.classList.remove('active');
            authContainer.classList.add('active');
            
            // Reset forms
            loginForm.reset();
            signupForm.reset();
            document.getElementById('generatedEmail').style.display = 'none';
            
            // Show logout toast
            showToast('You have been logged out', 'info');
        }

        // Theme Toggle
        function toggleTheme() {
            appState.theme = appState.theme === 'dark' ? 'light' : 'dark';
            document.body.classList.toggle('light-mode');
            themeToggle.innerHTML = appState.theme === 'dark' ? 
                '<i class="fas fa-moon"></i>' : 
                '<i class="fas fa-sun"></i>';
        }

        // Navigation
        function switchTab(tabName) {
            // Update active tab
            navTabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === tabName);
            });
            
            // Update active content
            contentSections.forEach(section => {
                section.classList.toggle('active', section.id === tabName);
            });
        }

        // Feature Modals
        function openFeatureModal(feature) {
            const modalId = `${feature}Modal`;
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
            }
        }

        // Toast Notifications
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            else if (type === 'warning') icon = 'fa-exclamation-triangle';
            else if (type === 'error') icon = 'fa-times-circle';
            
            toast.innerHTML = `
                <div class="toast-icon"><i class="fas ${icon}"></i></div>
                <div class="toast-message">${message}</div>
                <button class="toast-close"><i class="fas fa-times"></i></button>
            `;
            
            toastContainer.appendChild(toast);
            
            // Add close functionality
            toast.querySelector('.toast-close').addEventListener('click', () => {
                toast.remove();
            });
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                toast.remove();
            }, 5000);
        }

        // Dashboard Charts
        function initDashboardCharts() {
            // Weekly Calm Score Chart
            const weeklyActivityCtx = document.getElementById('weeklyActivityChart');
            if (weeklyActivityCtx) {
                new Chart(weeklyActivityCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Calm Score',
                            data: [65, 78, 90, 81, 56, 85, 92],
                            borderColor: '#BC13FE',
                            backgroundColor: 'rgba(188, 19, 254, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#b8c1ec'
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b8c1ec'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b8c1ec'
                                }
                            }
                        }
                    }
                });
            }

            // Sleep vs. Mood Chart
            const sleepMoodCtx = document.getElementById('sleepMoodChart');
            if (sleepMoodCtx) {
                new Chart(sleepMoodCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Sleep (hours)',
                            data: [7, 8, 6, 7.5, 8, 9, 8.5],
                            backgroundColor: '#6366f1',
                            yAxisID: 'y'
                        }, {
                            label: 'Mood Score',
                            data: [7, 8, 6, 9, 8, 9, 8],
                            type: 'line',
                            borderColor: '#A855F7',
                            backgroundColor: 'rgba(168, 85, 247, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#b8c1ec'
                                }
                            }
                        },
                        scales: {
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'Sleep (hours)',
                                    color: '#b8c1ec'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b8c1ec'
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: 'Mood Score',
                                    color: '#b8c1ec'
                                },
                                grid: {
                                    drawOnChartArea: false
                                },
                                ticks: {
                                    color: '#b8c1ec'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b8c1ec'
                                }
                            }
                        }
                    }
                });
            }

            // Daily Stability Score Chart
            const stabilityCtx = document.getElementById('stabilityChart');
            if (stabilityCtx) {
                new Chart(stabilityCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Physical', 'Mental', 'Nutrition', 'Sleep', 'Hydration', 'Activity'],
                        datasets: [{
                            label: 'Current Week',
                            data: [85, 78, 92, 75, 88, 90],
                            backgroundColor: 'rgba(188, 19, 254, 0.2)',
                            borderColor: '#BC13FE',
                            pointBackgroundColor: '#BC13FE'
                        }, {
                            label: 'Previous Week',
                            data: [75, 82, 85, 70, 80, 85],
                            backgroundColor: 'rgba(168, 85, 247, 0.2)',
                            borderColor: '#A855F7',
                            pointBackgroundColor: '#A855F7'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#b8c1ec'
                                }
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                pointLabels: {
                                    color: '#b8c1ec'
                                },
                                ticks: {
                                    color: '#b8c1ec',
                                    backdropColor: 'transparent'
                                }
                            }
                        }
                    }
                });
            }

            // Calories vs. Goal Chart
            const caloriesCtx = document.getElementById('caloriesChart');
            if (caloriesCtx) {
                new Chart(caloriesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Consumed', 'Remaining'],
                        datasets: [{
                            data: [1500, 500],
                            backgroundColor: [
                                '#BC13FE',
                                'rgba(255, 255, 255, 0.1)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#b8c1ec',
                                    padding: 15
                                }
                            }
                        },
                        cutout: '70%'
                    }
                });
            }
        }

        // CV-Insight Feature
        function initCVInsight() {
            const startCvBtn = document.getElementById('startCvBtn');
            const stopCvBtn = document.getElementById('stopCvBtn');
            const cvSnapshotBtn = document.getElementById('cvSnapshotBtn');
            const cvCameraPreview = document.getElementById('cvCameraPreview');
            const stressIndicator = document.getElementById('stressIndicator');
            const stressValue = document.getElementById('stressValue');
            const currentMood = document.getElementById('currentMood');
            
            let video;
            let detectionInterval;
            
            // Start CV detection
            if (startCvBtn) {
                startCvBtn.addEventListener('click', async () => {
                    try {
                        // Request camera access
                        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                        
                        // Create video element
                        video = document.createElement('video');
                        video.srcObject = stream;
                        video.autoplay = true;
                        video.width = 640;
                        video.height = 480;
                        
                        // Replace placeholder with video
                        cvCameraPreview.innerHTML = '';
                        cvCameraPreview.appendChild(video);
                        
                        // Load face-api models
                        showToast('Loading emotion detection models...', 'info');
                        await faceapi.nets.tinyFaceDetector.loadFromUri('https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.12/model');
                        await faceapi.nets.faceExpressionNet.loadFromUri('https://cdn.jsdelivr.net/npm/@vladmandic/face-api@1.7.12/model');
                        
                        // Start detection
                        appState.cvInsight.isDetecting = true;
                        startCvBtn.disabled = true;
                        stopCvBtn.disabled = false;
                        cvSnapshotBtn.disabled = false;
                        
                        showToast('Emotion detection started!', 'success');
                        
                        // Start detection interval
                        detectionInterval = setInterval(async () => {
                            if (!appState.cvInsight.isDetecting) return;
                            
                            try {
                                // Detect faces and expressions
                                const detections = await faceapi
                                    .detectAllFaces(video, new faceapi.TinyFaceDetectorOptions())
                                    .withFaceExpressions();
                                
                                if (detections.length > 0) {
                                    // Get the first face's expressions
                                    const expressions = detections[0].expressions;
                                    
                                    // Update emotion data
                                    appState.cvInsight.emotionData = {
                                        happy: expressions.happy,
                                        sad: expressions.sad,
                                        angry: expressions.angry,
                                        fearful: expressions.fearful,
                                        disgusted: expressions.disgusted,
                                        surprised: expressions.surprised,
                                        neutral: expressions.neutral
                                    };
                                    
                                    // Calculate stress level
                                    const stress = (expressions.sad + expressions.fearful + expressions.angry) - expressions.happy;
                                    appState.cvInsight.stressLevel = Math.max(0, Math.min(100, stress * 100));
                                    
                                    // Determine current mood
                                    const maxExpression = Object.keys(expressions).reduce((a, b) => 
                                        expressions[a] > expressions[b] ? a : b
                                    );
                                    appState.cvInsight.currentMood = maxExpression;
                                    
                                    // Update UI
                                    updateCVInsightUI(stressIndicator, stressValue, currentMood);
                                }
                            } catch (error) {
                                console.error('Detection error:', error);
                            }
                        }, 1000); // Update every second
                    } catch (error) {
                        console.error('Camera access error:', error);
                        showToast('Failed to access camera. Please check permissions.', 'error');
                    }
                });
            }
            
            // Stop CV detection
            if (stopCvBtn) {
                stopCvBtn.addEventListener('click', () => {
                    appState.cvInsight.isDetecting = false;
                    startCvBtn.disabled = false;
                    stopCvBtn.disabled = true;
                    cvSnapshotBtn.disabled = true;
                    
                    // Stop camera stream
                    if (video && video.srcObject) {
                        const tracks = video.srcObject.getTracks();
                        tracks.forEach(track => track.stop());
                    }
                    
                    // Clear detection interval
                    if (detectionInterval) {
                        clearInterval(detectionInterval);
                    }
                    
                    // Reset camera preview
                    cvCameraPreview.innerHTML = '<div class="cv-camera-placeholder"><i class="fas fa-video"></i></div>';
                    
                    showToast('Emotion detection stopped', 'info');
                });
            }
            
            // Capture snapshot
            if (cvSnapshotBtn) {
                cvSnapshotBtn.addEventListener('click', () => {
                    // Create a canvas to capture the current frame
                    const canvas = document.createElement('canvas');
                    canvas.width = video.width;
                    canvas.height = video.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
                    
                    // Convert to data URL and download
                    canvas.toBlob(blob => {
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `emotion-snapshot-${new Date().toISOString().split('T')[0]}.png`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    });
                    
                    showToast('Emotion snapshot captured!', 'success');
                });
            }
        }

        function updateCVInsightUI(stressIndicator, stressValue, currentMood) {
            // Update stress indicator
            if (stressIndicator) {
                stressIndicator.style.left = `${appState.cvInsight.stressLevel}%`;
            }
            
            // Update stress value
            if (stressValue) {
                const stressLevel = Math.round(appState.cvInsight.stressLevel);
                stressValue.textContent = `${stressLevel}%`;
                
                // Update color based on stress level
                stressValue.className = 'stress-value';
                if (stressLevel < 33) {
                    stressValue.classList.add('low');
                } else if (stressLevel < 66) {
                    stressValue.classList.add('medium');
                } else {
                    stressValue.classList.add('high');
                }
            }
            
            // Update current mood
            if (currentMood) {
                const moodEmojis = {
                    happy: 'ðŸ˜Š',
                    sad: 'ðŸ˜¢',
                    angry: 'ðŸ˜ ',
                    fearful: 'ðŸ˜¨',
                    disgusted: 'ðŸ¤¢',
                    surprised: 'ðŸ˜²',
                    neutral: 'ðŸ˜'
                };
                
                const moodLabels = {
                    happy: 'Happy',
                    sad: 'Sad',
                    angry: 'Angry',
                    fearful: 'Fearful',
                    disgusted: 'Disgusted',
                    surprised: 'Surprised',
                    neutral: 'Neutral'
                };
                
                currentMood.textContent = `Current Mood: ${moodLabels[appState.cvInsight.currentMood]} ${moodEmojis[appState.cvInsight.currentMood]}`;
            }
        }

        // Releasing Ritual Feature
        function initReleasingRitual() {
            const emotionInput = document.getElementById('emotionInput');
            const moodOptions = document.querySelectorAll('.mood-option');
            const releaseBtn = document.getElementById('releaseBtn');
            const releaseAnimation = document.getElementById('releaseAnimation');
            const burnText = document.getElementById('burnText');
            const fireContainer = document.getElementById('fireContainer');
            const lanternContainer = document.getElementById('lanternContainer');
            const breathingStep = document.getElementById('breathingStep');
            const affirmationStep = document.getElementById('affirmationStep');
            const affirmationText = document.getElementById('affirmationText');
            const moodAfterStep = document.getElementById('moodAfterStep');
            const saveRitualBtn = document.getElementById('saveRitualBtn');
            const moodAfterBtns = document.querySelectorAll('.mood-emoji-btn');
            
            let selectedMood = null;
            let beforeMood = null;
            let afterMood = null;
            
            // Mood selection
            moodOptions.forEach(option => {
                option.addEventListener('click', () => {
                    moodOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    selectedMood = option.dataset.mood;
                    appState.releasingRitual.emotion = selectedMood;
                });
            });
            
            // Release button
            if (releaseBtn) {
                releaseBtn.addEventListener('click', () => {
                    const text = emotionInput.value.trim();
                    
                    if (!text) {
                        showToast('Please express what you want to release', 'warning');
                        return;
                    }
                    
                    if (!selectedMood) {
                        showToast('Please select your current mood', 'warning');
                        return;
                    }
                    
                    // Save the text and mood
                    appState.releasingRitual.text = text;
                    appState.releasingRitual.emotion = selectedMood;
                    
                    // Show release animation
                    releaseAnimation.classList.add('active');
                    burnText.textContent = text;
                    
                    // Start burning animation
                    setTimeout(() => {
                        burnText.classList.add('burning');
                        
                        // Create fire flames
                        createFireFlames(fireContainer);
                        fireContainer.classList.add('active');
                    }, 500);
                    
                    // After burning, show lanterns
                    setTimeout(() => {
                        fireContainer.classList.remove('active');
                        createFloatingLanterns(lanternContainer);
                        lanternContainer.classList.add('active');
                    }, 3000);
                    
                    // Show breathing step after animation starts
                    setTimeout(() => {
                        breathingStep.style.display = 'block';
                    }, 1000);
                    
                    // Show affirmation step after breathing
                    setTimeout(() => {
                        affirmationStep.style.display = 'block';
                        
                        // Set affirmation based on mood
                        if (emotionAffirmations[selectedMood]) {
                            affirmationText.textContent = emotionAffirmations[selectedMood];
                        }
                    }, 6000);
                    
                    // Show mood tracking step
                    setTimeout(() => {
                        moodAfterStep.style.display = 'block';
                    }, 8000);
                });
            }
            
            // Mood after buttons
            moodAfterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const moodType = btn.dataset.mood;
                    const isBefore = btn.parentElement.parentElement.querySelector('.mood-after-label').textContent === 'Before:';
                    
                    if (isBefore) {
                        // Remove previous selection
                        moodAfterBtns.forEach(b => {
                            if (b.parentElement.parentElement.querySelector('.mood-after-label').textContent === 'Before:') {
                                b.classList.remove('selected');
                            }
                        });
                        
                        // Add selection
                        btn.classList.add('selected');
                        beforeMood = moodType;
                        appState.releasingRitual.beforeMood = beforeMood;
                    } else {
                        // Remove previous selection
                        moodAfterBtns.forEach(b => {
                            if (b.parentElement.parentElement.querySelector('.mood-after-label').textContent === 'After:') {
                                b.classList.remove('selected');
                            }
                        });
                        
                        // Add selection
                        btn.classList.add('selected');
                        afterMood = moodType;
                        appState.releasingRitual.afterMood = afterMood;
                    }
                });
            });
            
            // Save ritual button
            if (saveRitualBtn) {
                saveRitualBtn.addEventListener('click', () => {
                    if (!beforeMood || !afterMood) {
                        showToast('Please select your mood before and after the ritual', 'warning');
                        return;
                    }
                    
                    // Save ritual data
                    const ritualData = {
                        date: new Date().toISOString(),
                        text: appState.releasingRitual.text,
                        emotion: appState.releasingRitual.emotion,
                        beforeMood: beforeMood,
                        afterMood: afterMood
                    };
                    
                    // Add to saved reports
                    saveReport('Releasing Ritual', ritualData);
                    
                    // Show success message
                    showToast('Ritual saved successfully! You can view it in Reports.', 'success');
                    
                    // Reset form
                    emotionInput.value = '';
                    moodOptions.forEach(opt => opt.classList.remove('selected'));
                    releaseAnimation.classList.remove('active');
                    breathingStep.style.display = 'none';
                    affirmationStep.style.display = 'none';
                    moodAfterStep.style.display = 'none';
                    moodAfterBtns.forEach(btn => btn.classList.remove('selected'));
                    
                    selectedMood = null;
                    beforeMood = null;
                    afterMood = null;
                });
            }
        }

        function createFireFlames(container) {
            // Clear existing flames
            container.innerHTML = '';
            
            // Create multiple flames
            for (let i = 0; i < 15; i++) {
                const flame = document.createElement('div');
                flame.className = 'flame';
                flame.style.left = `${10 + Math.random() * 80}%`;
                flame.style.height = `${20 + Math.random() * 30}px`;
                flame.style.width = `${10 + Math.random() * 15}px`;
                flame.style.animationDelay = `${Math.random() * 0.5}s`;
                container.appendChild(flame);
            }
        }

        function createFloatingLanterns(container) {
            // Clear existing lanterns
            container.innerHTML = '';
            
            // Create multiple lanterns
            for (let i = 0; i < 5; i++) {
                const lantern = document.createElement('div');
                lantern.className = 'lantern';
                lantern.style.left = `${15 + i * 15}%`;
                lantern.style.animationDelay = `${i * 0.5}s`;
                
                const lanternBody = document.createElement('div');
                lanternBody.className = 'lantern-body';
                
                const lanternGlow = document.createElement('div');
                lanternGlow.className = 'lantern-glow';
                
                lanternBody.appendChild(lanternGlow);
                lantern.appendChild(lanternBody);
                container.appendChild(lantern);
            }
        }

        // Mindful Hub Feature
        function initMindfulHub() {
            const playBtns = document.querySelectorAll('.play-btn');
            const startBreathingBtn = document.getElementById('startBreathingBtn');
            const stopBreathingBtn = document.getElementById('stopBreathingBtn');
            const breathingModes = document.querySelectorAll('.breathing-mode');
            const breathingCircle = document.getElementById('breathingCircle');
            const breathingResult = document.getElementById('breathingResult');
            
            let breathingInterval;
            let currentMode = '30sec';
            
            // Meditation tracks
            playBtns.forEach(btn => {
                playBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const track = btn.dataset.track;
                    const isPlaying = btn.textContent === 'Play';

                    // Reset all buttons
                    playBtns.forEach(b => b.textContent = 'Play');

                    if (isPlaying) {
                        btn.textContent = 'Stop';
                        showToast(`Playing ${track} meditation track...`, 'success');
                    } else {
                        showToast(`Stopped ${track} meditation track`, 'info');
                    }
                });
            });


            });
            
            // Breathing modes
            breathingModes.forEach(mode => {
                mode.addEventListener('click', () => {
                    breathingModes.forEach(m => m.classList.remove('active'));
                    mode.classList.add('active');
                    currentMode = mode.dataset.mode;
                });
            });
            
            // Start breathing exercise
            if (startBreathingBtn) {
                startBreathingBtn.addEventListener('click', () => {
                    if (breathingInterval) clearInterval(breathingInterval);
                    
                    let phase = 'inhale';
                    let count = 0;
                    let maxCount;
                    
                    if (currentMode === '30sec') {
                        maxCount = 6; // 6 cycles of 5 seconds each
                    } else if (currentMode === '1min') {
                        maxCount = 12; // 12 cycles of 5 seconds each
                    } else if (currentMode === '478') {
                        maxCount = 4; // 4 cycles of 4-7-8 breathing
                    }
                    
                    breathingCircle.classList.remove('inhale', 'hold', 'exhale');
                    breathingCircle.classList.add('inhale');
                    breathingCircle.textContent = 'Inhale';
                    
                    if (currentMode === '478') {
                        // 4-7-8 breathing technique
                        let step = 0;
                        breathingInterval = setInterval(() => {
                            if (step === 0) {
                                breathingCircle.classList.remove('hold', 'exhale');
                                breathingCircle.classList.add('inhale');
                                breathingCircle.textContent = 'Inhale (4s)';
                                step = 1;
                            } else if (step === 1) {
                                breathingCircle.classList.remove('inhale', 'exhale');
                                breathingCircle.classList.add('hold');
                                breathingCircle.textContent = 'Hold (7s)';
                                step = 2;
                            } else if (step === 2) {
                                breathingCircle.classList.remove('inhale', 'hold');
                                breathingCircle.classList.add('exhale');
                                breathingCircle.textContent = 'Exhale (8s)';
                                step = 3;
                            } else {
                                count++;
                                step = 0;
                                
                                if (count >= maxCount) {
                                    clearInterval(breathingInterval);
                                    breathingCircle.classList.remove('inhale', 'hold', 'exhale');
                                    breathingCircle.textContent = 'Complete!';
                                    breathingResult.classList.add('active');
                                    
                                    // Unlock badge if not already unlocked
                                    if (!appState.badges.breathingMaster) {
                                        appState.badges.breathingMaster = true;
                                        unlockBadge('breathingMaster');
                                    }
                                }
                            }
                        }, currentMode === '478' ? 1000 : 5000); // 1s intervals for 4-7-8, 5s for others
                    } else {
                        // Regular breathing
                        breathingInterval = setInterval(() => {
                            if (phase === 'inhale') {
                                breathingCircle.classList.remove('exhale');
                                breathingCircle.classList.add('inhale');
                                breathingCircle.textContent = 'Inhale';
                                phase = 'exhale';
                            } else {
                                breathingCircle.classList.remove('inhale');
                                breathingCircle.classList.add('exhale');
                                breathingCircle.textContent = 'Exhale';
                                phase = 'inhale';
                                count++;
                                
                                if (count >= maxCount) {
                                    clearInterval(breathingInterval);
                                    breathingCircle.classList.remove('inhale', 'exhale');
                                    breathingCircle.textContent = 'Complete!';
                                    breathingResult.classList.add('active');
                                    
                                    // Unlock badge if not already unlocked
                                    if (!appState.badges.breathingMaster) {
                                        appState.badges.breathingMaster = true;
                                        unlockBadge('breathingMaster');
                                    }
                                }
                            }
                        }, 2500); // 2.5 seconds for each phase
                    }
                });
            }
            
            // Stop breathing exercise
            if (stopBreathingBtn) {
                stopBreathingBtn.addEventListener('click', () => {
                    if (breathingInterval) clearInterval(breathingInterval);
                    breathingCircle.classList.remove('inhale', 'hold', 'exhale');
                    breathingCircle.textContent = 'Breathe';
                    breathingResult.classList.remove('active');
                });
            }
        }

        // Mind Vault Feature
        function initMindVault() {
            const moodOptions = document.querySelectorAll('.mood-option');
            const saveJournalBtn = document.getElementById('saveJournalBtn');
            const downloadJournalBtn = document.getElementById('downloadJournalBtn');
            
            moodOptions.forEach(option => {
                option.addEventListener('click', () => {
                    moodOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    appState.selectedMood = option.dataset.mood;
                });
            });
            
            if (saveJournalBtn) {
                saveJournalBtn.addEventListener('click', () => {
                    const gratitudeText = document.getElementById('gratitudeText').value;
                    const moodText = document.getElementById('moodText').value;
                    
                    if ((gratitudeText || moodText) && appState.selectedMood) {
                        // Save journal entry
                        const journalEntry = {
                            date: new Date().toISOString(),
                            mood: appState.selectedMood,
                            gratitude: gratitudeText,
                            moodEntry: moodText
                        };
                        
                        appState.journalEntries.push(journalEntry);
                        saveUserData();
                        
                        // Show success message
                        showToast('Journal entry saved successfully!', 'success');
                        
                        // Clear form
                        document.getElementById('gratitudeText').value = '';
                        document.getElementById('moodText').value = '';
                        moodOptions.forEach(opt => opt.classList.remove('selected'));
                        appState.selectedMood = null;
                    } else {
                        showToast('Please select a mood and write something', 'warning');
                    }
                });
            }
            
            if (downloadJournalBtn) {
                downloadJournalBtn.addEventListener('click', () => {
                    const gratitudeText = document.getElementById('gratitudeText').value;
                    const moodText = document.getElementById('moodText').value;
                    
                    if ((gratitudeText || moodText) && appState.selectedMood) {
                        // Create a text file with the journal entry
                        const moodLabels = {
                            'very-happy': 'Very Happy',
                            'happy': 'Happy',
                            'neutral': 'Neutral',
                            'sad': 'Sad',
                            'very-sad': 'Very Sad'
                        };
                        
                        const content = `Date: ${new Date().toLocaleDateString()}\nMood: ${moodLabels[appState.selectedMood]}\n\nGratitude:\n${gratitudeText || 'Not specified'}\n\nMood Journal:\n${moodText || 'Not specified'}`;
                        
                        const blob = new Blob([content], { type: 'text/plain' });
                        const url = URL.createObjectURL(blob);
                        
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `journal-entry-${new Date().toISOString().split('T')[0]}.txt`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                        
                        // Show success message
                        showToast('Journal entry downloaded!', 'success');
                    } else {
                        showToast('Please select a mood and write something', 'warning');
                    }
                });
            }
        }

        // Mind Garden Feature
        function initMindGarden() {
            const addDeedBtn = document.getElementById('addDeedBtn');
            const deedInput = document.getElementById('deedInput');
            const gardenContainer = document.getElementById('gardenContainer');
            const refreshAffirmationBtn = document.getElementById('refreshAffirmationBtn');
            const affirmationText = document.getElementById('affirmationText');
            
            // Set initial affirmation
            if (affirmationText) {
                const randomAffirmation = dailyAffirmations[Math.floor(Math.random() * dailyAffirmations.length)];
                affirmationText.textContent = `"${randomAffirmation}"`;
            }
            
            if (addDeedBtn) {
                addDeedBtn.addEventListener('click', () => {
                    const deed = deedInput.value.trim();
                    if (deed) {
                        // Calculate position for equal spacing
                        const flowerCount = appState.gardenFlowers.length;
                        const maxFlowers = 10;
                        const spacing = 80 / maxFlowers; // 80% of container width
                        const leftPosition = 10 + (flowerCount % maxFlowers) * spacing;
                        const rowPosition = Math.floor(flowerCount / maxFlowers);
                        const bottomPosition = 100 + rowPosition * 80;
                        
                        // Add flower to garden
                        const flower = document.createElement('div');
                        flower.className = 'flower';
                        flower.style.left = `${leftPosition}%`;
                        flower.style.bottom = `${bottomPosition}px`;
                        
                        const flowerStem = document.createElement('div');
                        flowerStem.className = 'flower-stem';
                        
                        const flowerHead = document.createElement('div');
                        flowerHead.className = 'flower-head';
                        flowerHead.textContent = ['ðŸŒ¸', 'ðŸŒº', 'ðŸŒ»', 'ðŸŒ·', 'ðŸŒ¹', 'ðŸŒ¼', 'ðŸŒµ', 'ðŸŒ¾'][Math.floor(Math.random() * 8)];
                        
                        const flowerTooltip = document.createElement('div');
                        flowerTooltip.className = 'flower-tooltip';
                        flowerTooltip.textContent = deed;
                        
                        flower.appendChild(flowerStem);
                        flower.appendChild(flowerHead);
                        flower.appendChild(flowerTooltip);
                        
                        gardenContainer.appendChild(flower);
                        
                        // Clear input
                        deedInput.value = '';
                        
                        // Add to state
                        appState.gardenFlowers.push(deed);
                        saveUserData();
                        
                        // Show success message
                        showToast('Good deed added to your garden! ðŸŒ±', 'success');
                    }
                });
            }
            
            if (refreshAffirmationBtn) {
                refreshAffirmationBtn.addEventListener('click', () => {
                    const randomAffirmation = dailyAffirmations[Math.floor(Math.random() * dailyAffirmations.length)];
                    affirmationText.style.opacity = '0';
                    
                    setTimeout(() => {
                        affirmationText.textContent = `"${randomAffirmation}"`;
                        affirmationText.style.opacity = '1';
                    }, 300);
                });
            }
        }

        // Mind Assessment Feature
        function initMindAssessment() {
            const assessmentQuestions = document.getElementById('assessmentQuestions');
            const submitAssessmentBtn = document.getElementById('submitAssessmentBtn');
            
            // Assessment questions
            const questions = [
                {
                    question: 'How would you rate your sleep quality last night?',
                    options: ['Excellent - I woke up refreshed', 'Good - I slept well', 'Fair - I had some trouble sleeping', 'Poor - I barely slept']
                },
                {
                    question: 'How would you describe your stress level today?',
                    options: ['Very relaxed', 'Slightly stressed', 'Moderately stressed', 'Very stressed']
                },
                {
                    question: 'How productive have you been today?',
                    options: ['Very productive', 'Somewhat productive', 'Not very productive', 'Not productive at all']
                },
                {
                    question: 'How often do you feel overwhelmed?',
                    options: ['Rarely', 'Sometimes', 'Often', 'Almost always']
                },
                {
                    question: 'How would you rate your overall mood today?',
                    options: ['Very positive', 'Somewhat positive', 'Neutral', 'Negative']
                },
                {
                    question: 'How often do you practice mindfulness or meditation?',
                    options: ['Daily', 'A few times a week', 'Rarely', 'Never']
                },
                {
                    question: 'How satisfied are you with your social connections?',
                    options: ['Very satisfied', 'Somewhat satisfied', 'Not very satisfied', 'Not satisfied at all']
                },
                {
                    question: 'How often do you engage in physical activity?',
                    options: ['Daily', 'A few times a week', 'Rarely', 'Never']
                },
                {
                    question: 'How would you rate your ability to cope with challenges?',
                    options: ['Excellent', 'Good', 'Fair', 'Poor']
                },
                {
                    question: 'How often do you feel anxious?',
                    options: ['Rarely', 'Sometimes', 'Often', 'Almost always']
                },
                {
                    question: 'How would you describe your energy levels today?',
                    options: ['Very high', 'High', 'Moderate', 'Low']
                },
                {
                    question: 'How often do you take time for self-care?',
                    options: ['Daily', 'A few times a week', 'Rarely', 'Never']
                },
                {
                    question: 'How would you rate your ability to focus?',
                    options: ['Excellent', 'Good', 'Fair', 'Poor']
                },
                {
                    question: 'How often do you experience negative thoughts?',
                    options: ['Rarely', 'Sometimes', 'Often', 'Almost always']
                },
                {
                    question: 'How satisfied are you with your work-life balance?',
                    options: ['Very satisfied', 'Somewhat satisfied', 'Not very satisfied', 'Not satisfied at all']
                }
            ];
            
            // Populate questions
            if (assessmentQuestions) {
                questions.forEach((q, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'assessment-question';
                    questionDiv.innerHTML = `
                        <div class="assessment-question-text">${index + 1}. ${q.question}</div>
                        <div class="assessment-options">
                            ${q.options.map((option, optIndex) => 
                                `<div class="assessment-option" data-question="${index}" data-value="${3-optIndex}">${option}</div>`
                            ).join('')}
                        </div>
                    `;
                    assessmentQuestions.appendChild(questionDiv);
                });
                
                // Add event listeners to options
                document.querySelectorAll('.assessment-option').forEach(option => {
                    option.addEventListener('click', () => {
                        const question = option.dataset.question;
                        document.querySelectorAll(`.assessment-option[data-question="${question}"]`).forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        option.classList.add('selected');
                    });
                });
            }
            
            if (submitAssessmentBtn) {
                submitAssessmentBtn.addEventListener('click', () => {
                    // Calculate score
                    const selectedOptions = document.querySelectorAll('.assessment-option.selected');
                    let totalScore = 0;
                    
                    selectedOptions.forEach(option => {
                        totalScore += parseInt(option.dataset.value);
                    });
                    
                    const maxScore = questions.length * 3;
                    const percentage = Math.round((totalScore / maxScore) * 100);
                    
                    // Generate recommendations based on score
                    let recommendations = [];
                    
                    if (percentage < 40) {
                        recommendations = [
                            'Consider speaking with a mental health professional',
                            'Practice daily mindfulness exercises for 10 minutes',
                            'Establish a consistent sleep schedule',
                            'Try journaling to express your thoughts and feelings',
                            'Reach out to friends or family for support'
                        ];
                    } else if (percentage < 70) {
                        recommendations = [
                            'Incorporate stress management techniques into your routine',
                            'Set aside time for activities you enjoy',
                            'Practice gratitude by listing three things you\'re thankful for each day',
                            'Consider limiting screen time before bed',
                            'Try deep breathing exercises when feeling overwhelmed'
                        ];
                    } else {
                        recommendations = [
                            'Continue maintaining your healthy mental habits',
                            'Share your coping strategies with others who might benefit',
                            'Consider setting new personal growth goals',
                            'Practice self-compassion during difficult times',
                            'Maintain your social connections and support network'
                        ];
                    }
                    
                    // Update UI
                    document.getElementById('mentalHealthScore').textContent = `Mental Health Score: ${percentage}/100`;
                    document.getElementById('assessmentRecommendations').innerHTML = 
                        recommendations.map(rec => `<li>${rec}</li>`).join('');
                    
                    // Show result
                    document.getElementById('assessmentResult').classList.add('active');
                    
                    // Save report
                    saveReport('Mind Assessment', {
                        date: new Date().toISOString(),
                        score: percentage,
                        recommendations: recommendations
                    });
                    
                    // Show success message
                    showToast('Assessment completed! Check your results.', 'success');
                });
            }
        }

        // CalorieSmart Feature
        function initCalorieSmart() {
            const calculateCaloriesBtn = document.getElementById('calculateCaloriesBtn');
            const analyzeMealBtn = document.getElementById('analyzeMealBtn');
            const mealCameraPreview = document.getElementById('mealCameraPreview');
            const mealImageUpload = document.getElementById('mealImageUpload');
            const addWaterBtn = document.getElementById('addWaterBtn');
            const resetWaterBtn = document.getElementById('resetWaterBtn');
            const waterFill = document.getElementById('waterFill');
            const waterAmount = document.getElementById('waterAmount');
            const calorieAlert = document.getElementById('calorieAlert');
            
            // Initialize calorie chart
            const calorieCtx = document.getElementById('calorieChart');
            if (calorieCtx) {
                appState.calorieChart = new Chart(calorieCtx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [0, appState.dailyCalorieGoal],
                            backgroundColor: [
                                '#BC13FE',
                                'rgba(255, 255, 255, 0.1)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        cutout: '70%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });
            }
            
            // Handle image upload
            if (mealImageUpload) {
                mealImageUpload.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            appState.uploadedMealImage = event.target.result;
                            mealCameraPreview.innerHTML = `<img src="${appState.uploadedMealImage}" alt="Meal" style="width: 100%; height: 100%; object-fit: cover;">`;
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
            
            // Calculate personalized calorie budget
            if (calculateCaloriesBtn) {
                calculateCaloriesBtn.addEventListener('click', () => {
                    const name = document.getElementById('calorieNameInput').value;
                    const age = parseInt(document.getElementById('ageInput').value);
                    const gender = document.getElementById('genderSelect').value;
                    const weight = parseFloat(document.getElementById('weightInput').value);
                    const height = parseFloat(document.getElementById('heightInput').value);
                    const activity = document.getElementById('activitySelect').value;
                    const goal = document.getElementById('goalSelect').value;
                    
                    if (name && age && gender && weight && height && activity && goal) {
                        // Calculate BMR (Basal Metabolic Rate)
                        let bmr;
                        if (gender === 'male') {
                            bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
                        } else {
                            bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
                        }
                        
                        // Calculate TDEE (Total Daily Energy Expenditure)
                        let activityMultiplier;
                        switch (activity) {
                            case 'sedentary': activityMultiplier = 1.2; break;
                            case 'light': activityMultiplier = 1.375; break;
                            case 'moderate': activityMultiplier = 1.55; break;
                            case 'active': activityMultiplier = 1.725; break;
                            case 'very-active': activityMultiplier = 1.9; break;
                        }
                        
                        let tdee = bmr * activityMultiplier;
                        
                        // Adjust based on goal
                        if (goal === 'lose') {
                            tdee -= 500; // 500 calorie deficit for weight loss
                        } else if (goal === 'gain') {
                            tdee += 500; // 500 calorie surplus for weight gain
                        }
                        
                        const suggestedCalories = Math.round(tdee);
                        appState.dailyCalorieGoal = suggestedCalories;
                        document.getElementById('calorieTotal').textContent = `${suggestedCalories} kcal`;
                        
                        // Update chart
                        updateCalorieChart();
                        
                        // Show success message
                        showToast(`Calorie budget calculated: ${suggestedCalories} kcal/day`, 'success');
                    } else {
                        showToast('Please fill in all fields', 'warning');
                    }
                });
            }
            
            if (analyzeMealBtn) {
                analyzeMealBtn.addEventListener('click', () => {
                    const mealName = document.getElementById('mealNameInput').value || 'Meal';
                    
                    // Simulate meal analysis with image or name
                    analyzeMealBtn.disabled = true;
                    analyzeMealBtn.textContent = 'Analyzing...';
                    
                    setTimeout(() => {
                        // Generate random nutrition data based on meal name
                        const mealData = generateNutritionData(mealName);
                        
                        // Update nutrition data
                        appState.nutritionData.calories += mealData.calories;
                        appState.nutritionData.proteins += mealData.proteins;
                        appState.nutritionData.carbs += mealData.carbs;
                        appState.nutritionData.fats += mealData.fats;
                        appState.nutritionData.sugar += mealData.sugar;
                        appState.consumedCalories += mealData.calories;
                        
                        // Add to daily meals
                        appState.dailyMeals.push({
                            name: mealName,
                            calories: mealData.calories,
                            time: new Date().toLocaleTimeString()
                        });
                        
                        // Update UI
                        updateNutritionDisplay();
                        updateMealsList();
                        updateCalorieChart();
                        
                        // Check if over budget
                        if (appState.consumedCalories > appState.dailyCalorieGoal) {
                            calorieAlert.style.display = 'block';
                            showToast('âš ï¸ You\'re over your daily calorie budget!', 'warning');
                        } else {
                            calorieAlert.style.display = 'none';
                        }
                        
                        // Reset button
                        analyzeMealBtn.disabled = false;
                        analyzeMealBtn.textContent = 'ðŸ“¸ Analyze Meal';
                        
                        // Show success message
                        showToast('Meal analyzed successfully!', 'success');
                    }, 2000);
                });
            }
            
            // Water tracker
            if (addWaterBtn) {
                addWaterBtn.addEventListener('click', () => {
                    if (appState.waterIntake < appState.waterGoal) {
                        appState.waterIntake++;
                        updateWaterDisplay();
                        
                        // Show success message
                        if (appState.waterIntake === appState.waterGoal) {
                            showToast('ðŸŽ‰ Daily water goal achieved!', 'success');
                            
                            // Unlock badge if not already unlocked
                            if (!appState.badges.hydrationHero) {
                                appState.badges.hydrationHero = true;
                                unlockBadge('hydrationHero');
                            }
                        } else {
                            showToast(`Water intake: ${appState.waterIntake}/${appState.waterGoal} glasses`, 'info');
                        }
                    } else {
                        showToast('You\'ve already reached your daily water goal!', 'info');
                    }
                });
            }
            
            if (resetWaterBtn) {
                resetWaterBtn.addEventListener('click', () => {
                    appState.waterIntake = 0;
                    updateWaterDisplay();
                    showToast('Water tracker reset', 'info');
                });
            }
        }

        // Generate nutrition data based on meal name
        function generateNutritionData(mealName) {
            // This is a simplified version - in a real app, you would use a nutrition API
            // Base nutrition values
            let calories = 300;
            let proteins = 15;
            let carbs = 40;
            let fats = 10;
            let sugar = 8;
            
            // Adjust based on meal name keywords
            const name = mealName.toLowerCase();
            
            if (name.includes('salad') || name.includes('vegetable')) {
                calories = Math.floor(calories * 0.7);
                proteins = Math.floor(proteins * 0.8);
                carbs = Math.floor(carbs * 0.6);
                fats = Math.floor(fats * 0.5);
                sugar = Math.floor(sugar * 0.5);
            } else if (name.includes('burger') || name.includes('pizza') || name.includes('fried')) {
                calories = Math.floor(calories * 1.8);
                proteins = Math.floor(proteins * 1.2);
                carbs = Math.floor(carbs * 1.3);
                fats = Math.floor(fats * 2.0);
                sugar = Math.floor(sugar * 1.2);
            } else if (name.includes('chicken') || name.includes('meat') || name.includes('fish')) {
                calories = Math.floor(calories * 1.2);
                proteins = Math.floor(proteins * 1.8);
                carbs = Math.floor(carbs * 0.8);
                fats = Math.floor(fats * 1.1);
            } else if (name.includes('rice') || name.includes('pasta') || name.includes('bread')) {
                calories = Math.floor(calories * 1.3);
                proteins = Math.floor(proteins * 0.7);
                carbs = Math.floor(carbs * 1.5);
                fats = Math.floor(fats * 0.8);
            } else if (name.includes('dessert') || name.includes('cake') || name.includes('ice cream')) {
                calories = Math.floor(calories * 1.5);
                proteins = Math.floor(proteins * 0.5);
                carbs = Math.floor(carbs * 1.4);
                fats = Math.floor(fats * 1.2);
                sugar = Math.floor(sugar * 2.5);
            }
            
            // Add some randomness
            calories += Math.floor(Math.random() * 100) - 50;
            proteins += Math.floor(Math.random() * 10) - 5;
            carbs += Math.floor(Math.random() * 15) - 7;
            fats += Math.floor(Math.random() * 8) - 4;
            sugar += Math.floor(Math.random() * 5) - 2;
            
            // Ensure minimum values
            calories = Math.max(100, calories);
            proteins = Math.max(5, proteins);
            carbs = Math.max(10, carbs);
            fats = Math.max(3, fats);
            sugar = Math.max(1, sugar);
            
            return {
                calories,
                proteins,
                carbs,
                fats,
                sugar
            };
        }

        function updateCalorieChart() {
            if (appState.calorieChart) {
                const remaining = Math.max(0, appState.dailyCalorieGoal - appState.consumedCalories);
                appState.calorieChart.data.datasets[0].data = [appState.consumedCalories, remaining];
                appState.calorieChart.update();
            }
        }

        function updateNutritionDisplay() {
            document.getElementById('totalCalories').textContent = `${appState.nutritionData.calories} kcal`;
            document.getElementById('totalProteins').textContent = `${appState.nutritionData.proteins}g`;
            document.getElementById('totalCarbs').textContent = `${appState.nutritionData.carbs}g`;
            document.getElementById('totalFats').textContent = `${appState.nutritionData.fats}g`;
            document.getElementById('totalSugar').textContent = `${appState.nutritionData.sugar}g`;
            document.getElementById('calorieConsumed').textContent = appState.consumedCalories;
        }

        function updateMealsList() {
            const mealsList = document.getElementById('mealsList');
            if (mealsList) {
                mealsList.innerHTML = '';
                appState.dailyMeals.forEach(meal => {
                    const mealItem = document.createElement('div');
                    mealItem.className = 'meal-item';
                    mealItem.innerHTML = `
                        <span class="meal-name">${meal.name}</span>
                        <span class="meal-calories">${meal.calories} kcal</span>
                    `;
                    mealsList.appendChild(mealItem);
                });
            }
        }

        function updateWaterDisplay() {
            if (waterFill) {
                const percentage = (appState.waterIntake / appState.waterGoal) * 100;
                waterFill.style.height = `${percentage}%`;
            }
            
            if (waterAmount) {
                waterAmount.textContent = `${appState.waterIntake}/${appState.waterGoal} glasses`;
            }
        }

        // Recipe Generator Feature
        function initRecipeGenerator() {
            const ingredientsGrid = document.getElementById('ingredientsGrid');
            const generateRecipeBtn = document.getElementById('generateRecipeBtnModal');
            const cravingSelect = document.getElementById('cravingSelect');
            const cookNowBtn = document.getElementById('cookNowBtn');
            
            // Expanded ingredients list
            const ingredients = [
                'Chicken', 'Beef', 'Fish', 'Eggs', 'Tofu', 'Paneer', 'Rice', 'Pasta', 'Bread',
                'Potatoes', 'Tomatoes', 'Onions', 'Garlic', 'Carrots', 'Broccoli', 'Spinach',
                'Mushrooms', 'Bell Peppers', 'Cucumber', 'Lettuce', 'Avocado', 'Banana', 'Apple',
                'Orange', 'Berries', 'Yogurt', 'Milk', 'Cheese', 'Beans', 'Lentils', 'Nuts',
                'Olive Oil', 'Butter', 'Flour', 'Sugar', 'Corn', 'Peas', 'Cauliflower', 'Cabbage',
                'Zucchini', 'Eggplant', 'Sweet Potato', 'Quinoa', 'Oats'
            ];
            
            // Populate ingredients
            if (ingredientsGrid) {
                ingredients.forEach(ingredient => {
                    const ingredientDiv = document.createElement('div');
                    ingredientDiv.className = 'ingredient-checkbox';
                    ingredientDiv.innerHTML = `
                        <input type="checkbox" id="ingredient-${ingredient}" value="${ingredient}">
                        <label for="ingredient-${ingredient}">${ingredient}</label>
                    `;
                    ingredientsGrid.appendChild(ingredientDiv);
                });
            }
            
            if (generateRecipeBtn) {
                generateRecipeBtn.addEventListener('click', () => {
                    const selectedIngredients = Array.from(document.querySelectorAll('.ingredient-checkbox input:checked'))
                        .map(input => input.value);
                    const craving = cravingSelect.value;
                    
                    if (selectedIngredients.length > 0 || craving) {
                        generateRecipe(selectedIngredients, craving);
                    } else {
                        showToast('Please select ingredients or a craving', 'warning');
                    }
                });
            }
            
            if (cookNowBtn) {
                cookNowBtn.addEventListener('click', () => {
                    showToast('Recipe instructions ready! Happy cooking! ðŸ‘¨â€ðŸ³', 'success');
                });
            }
        }

        function generateRecipe(ingredients, craving) {
            const recipeResult = document.getElementById('recipeResult');
            const recipeTitle = document.getElementById('recipeTitle');
            const recipeIngredients = document.getElementById('recipeIngredients');
            const recipeInstructions = document.getElementById('recipeInstructions');
            const recipeCalories = document.getElementById('recipeCalories');
            const recipeProtein = document.getElementById('recipeProtein');
            const recipeCarbs = document.getElementById('recipeCarbs');
            const recipeFiber = document.getElementById('recipeFiber');
            const healthScore = document.getElementById('healthScore');
            
            // Generate recipe based on ingredients and craving
            let title, ingredientsList, instructions, score, calories, protein, carbs, fiber;
            
            if (craving) {
                // Generate healthy alternative for craving
                const alternatives = {
                    'ice-cream': {
                        title: 'Frozen Banana Nice Cream',
                        ingredients: ['Bananas', 'Vanilla extract', 'A pinch of salt'],
                        instructions: [
                            'Peel and slice bananas, freeze for 4 hours',
                            'Blend frozen bananas in a food processor',
                            'Add vanilla and salt, blend until creamy',
                            'Serve immediately or freeze for later'
                        ],
                        score: 9.0,
                        calories: 120,
                        protein: 2,
                        carbs: 25,
                        fiber: 3
                    },
                    'chocolate': {
                        title: 'Dark Chocolate Avocado Mousse',
                        ingredients: ['Avocado', 'Cocoa powder', 'Maple syrup', 'Vanilla extract'],
                        instructions: [
                            'Blend avocado until smooth',
                            'Add cocoa powder, maple syrup, and vanilla',
                            'Blend until creamy',
                            'Chill for 30 minutes before serving'
                        ],
                        score: 8.5,
                        calories: 180,
                        protein: 3,
                        carbs: 15,
                        fiber: 8
                    },
                    'chips': {
                        title: 'Baked Kale Chips',
                        ingredients: ['Kale', 'Olive oil', 'Salt', 'Paprika'],
                        instructions: [
                            'Preheat oven to 350Â°F (175Â°C)',
                            'Tear kale into bite-sized pieces',
                            'Toss with olive oil and seasonings',
                            'Bake for 10-15 minutes until crispy'
                        ],
                        score: 9.2,
                        calories: 80,
                        protein: 3,
                        carbs: 8,
                        fiber: 2
                    },
                    'pizza': {
                        title: 'Cauliflower Pizza Crust',
                        ingredients: ['Cauliflower', 'Egg', 'Cheese', 'Italian herbs'],
                        instructions: [
                            'Grate cauliflower and microwave for 5 minutes',
                            'Squeeze out excess water',
                            'Mix with egg, cheese, and herbs',
                            'Press into pizza shape and bake for 15 minutes',
                            'Add toppings and bake until cheese melts'
                        ],
                        score: 8.0,
                        calories: 150,
                        protein: 8,
                        carbs: 10,
                        fiber: 3
                    },
                    'burger': {
                        title: 'Black Bean Burger',
                        ingredients: ['Black beans', 'Bread crumbs', 'Onion', 'Garlic', 'Spices'],
                        instructions: [
                            'Mash black beans in a bowl',
                            'Add bread crumbs, diced onion, garlic, and spices',
                            'Form into patties',
                            'Pan-fry or bake until golden brown'
                        ],
                        score: 8.7,
                        calories: 200,
                        protein: 10,
                        carbs: 25,
                        fiber: 8
                    },
                    'soda': {
                        title: 'Infused Sparkling Water',
                        ingredients: ['Sparkling water', 'Fresh fruits', 'Herbs'],
                        instructions: [
                            'Choose your favorite fruits (berries, citrus, melon)',
                            'Add fruits and herbs to a pitcher',
                            'Pour sparkling water over fruits',
                            'Let infuse for 30 minutes before serving'
                        ],
                        score: 9.5,
                        calories: 20,
                        protein: 0,
                        carbs: 5,
                        fiber: 1
                    },
                    'candy': {
                        title: 'Date Energy Balls',
                        ingredients: ['Dates', 'Nuts', 'Cocoa powder', 'Coconut flakes'],
                        instructions: [
                            'Pit dates and soak in warm water for 10 minutes',
                            'Blend dates with nuts and cocoa powder',
                            'Form into small balls',
                            'Roll in coconut flakes and refrigerate'
                        ],
                        score: 8.8,
                        calories: 100,
                        protein: 3,
                        carbs: 18,
                        fiber: 2
                    },
                    'fried-food': {
                        title: 'Air-Fried Vegetables',
                        ingredients: ['Vegetables of choice', 'Olive oil', 'Spices'],
                        instructions: [
                            'Cut vegetables into bite-sized pieces',
                            'Toss with olive oil and spices',
                            'Air fry at 400Â°F (200Â°C) for 15-20 minutes',
                            'Shake basket halfway through cooking'
                        ],
                        score: 9.0,
                        calories: 120,
                        protein: 3,
                        carbs: 15,
                        fiber: 4
                    }
                };
                
                const alternative = alternatives[craving];
                title = alternative.title;
                ingredientsList = alternative.ingredients;
                instructions = alternative.instructions;
                score = alternative.score;
                calories = alternative.calories;
                protein = alternative.protein;
                carbs = alternative.carbs;
                fiber = alternative.fiber;
            } else {
                // Generate recipe based on ingredients
                const mainIngredient = ingredients[0];
                const secondaryIngredients = ingredients.slice(1, 4);
                
                // Determine recipe type based on main ingredient
                let recipeType = 'stir-fry';
                if (mainIngredient === 'Chicken' || mainIngredient === 'Beef' || mainIngredient === 'Fish') {
                    recipeType = 'grilled';
                } else if (mainIngredient === 'Pasta' || mainIngredient === 'Rice') {
                    recipeType = 'dish';
                } else if (mainIngredient === 'Eggs') {
                    recipeType = 'omelette';
                } else if (mainIngredient === 'Tofu' || mainIngredient === 'Paneer') {
                    recipeType = 'scramble';
                }
                
                // Generate title
                title = `Healthy ${mainIngredient} ${recipeType.charAt(0).toUpperCase() + recipeType.slice(1)}`;
                
                // Generate ingredients list
                ingredientsList = [
                    mainIngredient,
                    ...secondaryIngredients,
                    'Olive oil',
                    'Salt and pepper to taste',
                    'Herbs and spices of choice'
                ];
                
                // Generate instructions based on recipe type
                if (recipeType === 'stir-fry') {
                    instructions = [
                        'Heat oil in a pan over medium-high heat',
                        `Add ${mainIngredient} and cook until golden`,
                        'Add vegetables and stir-fry for 5 minutes',
                        'Season with salt, pepper, and herbs',
                        'Serve hot with rice or quinoa'
                    ];
                } else if (recipeType === 'grilled') {
                    instructions = [
                        'Preheat grill to medium-high heat',
                        `Season ${mainIngredient} with salt, pepper, and herbs`,
                        'Grill for 4-6 minutes per side until cooked through',
                        'Let rest for 5 minutes before serving',
                        'Serve with grilled vegetables'
                    ];
                } else if (recipeType === 'dish') {
                    instructions = [
                        'Cook pasta or rice according to package directions',
                        `In a separate pan, sautÃ© ${mainIngredient} until cooked`,
                        'Add vegetables and cook until tender',
                        'Combine with pasta or rice',
                        'Season and serve hot'
                    ];
                } else if (recipeType === 'omelette') {
                    instructions = [
                        'Beat eggs with a splash of milk',
                        'Heat oil in a non-stick pan',
                        `Add ${mainIngredient} and other ingredients to the pan`,
                        'Pour eggs over ingredients',
                        'Cook until set, then fold and serve'
                    ];
                } else if (recipeType === 'scramble') {
                    instructions = [
                        'Heat oil in a pan over medium heat',
                        `Crumble ${mainIngredient} into the pan`,
                        'Add vegetables and cook until tender',
                        'Season with spices and herbs',
                        'Cook until heated through and serve'
                    ];
                }
                
                // Calculate health score based on ingredients
                score = 8.0;
                if (ingredients.includes('Vegetables') || ingredients.includes('Spinach') || 
                    ingredients.includes('Broccoli') || ingredients.includes('Tomatoes')) {
                    score += 0.5;
                }
                if (ingredients.includes('Olive Oil')) {
                    score += 0.3;
                }
                if (ingredients.includes('Fish')) {
                    score += 0.4;
                }
                if (ingredients.includes('Tofu') || ingredients.includes('Paneer')) {
                    score += 0.3;
                }
                if (ingredients.includes('Butter') || ingredients.includes('Sugar')) {
                    score -= 0.3;
                }
                
                score = Math.min(10, Math.max(5, score));
                
                // Generate nutrition values
                calories = 250 + Math.floor(Math.random() * 150);
                protein = 10 + Math.floor(Math.random() * 15);
                carbs = 20 + Math.floor(Math.random() * 20);
                fiber = 3 + Math.floor(Math.random() * 7);
            }
            
            // Update UI
            recipeTitle.textContent = title;
            recipeIngredients.innerHTML = ingredientsList.map(ing => `<li>${ing}</li>`).join('');
            recipeInstructions.innerHTML = instructions.map(inst => `<li>${inst}</li>`).join('');
            recipeCalories.textContent = `${calories} kcal`;
            recipeProtein.textContent = `${protein}g`;
            recipeCarbs.textContent = `${carbs}g`;
            recipeFiber.textContent = `${fiber}g`;
            healthScore.textContent = `${score.toFixed(1)}/10`;
            
            // Show result
            recipeResult.classList.add('active');
        }

        // Posture Tracker Feature
        function initPostureTracker() {
            const startPostureTracking = document.getElementById('startPostureTracking');
            const postureCamera = document.getElementById('postureCamera');
            const postureStatus = document.getElementById('postureStatus');
            
            if (startPostureTracking) {
                startPostureTracking.addEventListener('click', () => {
                    appState.postureTracking = !appState.postureTracking;
                    
                    if (appState.postureTracking) {
                        startPostureTracking.textContent = 'Stop Tracking';
                        
                        // Simulate camera activation
                        postureCamera.innerHTML = `
                            <video id="postureVideo" autoplay style="width: 100%; height: 100%; object-fit: cover;"></video>
                            <canvas id="postureCanvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas>
                        `;
                        
                        // Try to access camera
                        navigator.mediaDevices.getUserMedia({ video: true })
                            .then(stream => {
                                const video = document.getElementById('postureVideo');
                                video.srcObject = stream;
                                
                                // Simulate posture detection
                                const postureInterval = setInterval(() => {
                                    if (!appState.postureTracking) {
                                        clearInterval(postureInterval);
                                        stream.getTracks().forEach(track => track.stop());
                                        return;
                                    }
                                    
                                    // Simulate random posture detection
                                    const isGoodPosture = Math.random() > 0.3;
                                    postureStatus.textContent = isGoodPosture ? 
                                        'Perfect Posture ðŸŒŸ' : 
                                        'Keep your back straight & shoulders open ðŸ”„';
                                    postureStatus.className = isGoodPosture ? 
                                        'posture-status good' : 
                                        'posture-status bad';
                                    
                                    // Draw posture outline (simplified)
                                    const canvas = document.getElementById('postureCanvas');
                                    const ctx = canvas.getContext('2d');
                                    canvas.width = video.videoWidth || 640;
                                    canvas.height = video.videoHeight || 480;
                                    
                                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                                    ctx.strokeStyle = isGoodPosture ? '#4ade80' : '#f87171';
                                    ctx.lineWidth = 3;
                                    
                                    // Draw simplified posture outline
                                    ctx.beginPath();
                                    // Head
                                    ctx.arc(canvas.width / 2, canvas.height * 0.2, 30, 0, 2 * Math.PI);
                                    // Body
                                    ctx.moveTo(canvas.width / 2, canvas.height * 0.23);
                                    ctx.lineTo(canvas.width / 2, canvas.height * 0.6);
                                    // Arms
                                    ctx.moveTo(canvas.width / 2, canvas.height * 0.3);
                                    ctx.lineTo(canvas.width * 0.3, canvas.height * 0.5);
                                    ctx.moveTo(canvas.width / 2, canvas.height * 0.3);
                                    ctx.lineTo(canvas.width * 0.7, canvas.height * 0.5);
                                    // Legs
                                    ctx.moveTo(canvas.width / 2, canvas.height * 0.6);
                                    ctx.lineTo(canvas.width * 0.4, canvas.height * 0.9);
                                    ctx.moveTo(canvas.width / 2, canvas.height * 0.6);
                                    ctx.lineTo(canvas.width * 0.6, canvas.height * 0.9);
                                    ctx.stroke();
                                }, 3000);
                            })
                            .catch(err => {
                                console.error('Error accessing camera:', err);
                                // Fallback to placeholder
                                postureCamera.innerHTML = '<div class="camera-placeholder"><i class="fas fa-video"></i></div>';
                                
                                // Simulate posture detection without camera
                                const postureInterval = setInterval(() => {
                                    if (!appState.postureTracking) {
                                        clearInterval(postureInterval);
                                        return;
                                    }
                                    
                                    const isGoodPosture = Math.random() > 0.3;
                                    postureStatus.textContent = isGoodPosture ? 
                                        'Perfect Posture ðŸŒŸ' : 
                                        'Keep your back straight & shoulders open ðŸ”„';
                                    postureStatus.className = isGoodPosture ? 
                                        'posture-status good' : 
                                        'posture-status bad';
                                }, 3000);
                            });
                    } else {
                        startPostureTracking.textContent = 'Start Tracking';
                        postureCamera.innerHTML = '<div class="camera-placeholder"><i class="fas fa-video"></i></div>';
                    }
                });
            }
        }

        // Daily Wellness Check Feature
        function initWellnessCheck() {
            const wellnessQuestionsContainer = document.getElementById('wellnessQuestionsContainer');
            const submitWellnessCheck = document.getElementById('submitWellnessCheck');
            
            // Wellness questions
            const wellnessQuestions = [
                'Did you stay hydrated today?',
                'Did you get at least 7 hours of sleep?',
                'Did you engage in physical activity?',
                'Did you eat at least 3 balanced meals?',
                'Did you take breaks from screen time?',
                'Did you practice mindfulness or meditation?',
                'Did you connect with friends or family?',
                'Did you spend time outdoors?',
                'Did you avoid processed foods?',
                'Did you manage stress effectively?'
            ];
            
            // Populate questions
            if (wellnessQuestionsContainer) {
                wellnessQuestions.forEach((question, index) => {
                    const questionCard = document.createElement('div');
                    questionCard.className = 'question-card';
                    questionCard.innerHTML = `
                        <div class="question-text">${index + 1}. ${question}</div>
                        <div class="answer-options">
                            <button class="answer-btn" data-question="${index}" data-answer="yes">Yes</button>
                            <button class="answer-btn" data-question="${index}" data-answer="no">No</button>
                            <button class="answer-btn" data-question="${index}" data-answer="somewhat">Somewhat</button>
                        </div>
                    `;
                    wellnessQuestionsContainer.appendChild(questionCard);
                });
                
                // Add event listeners to answer buttons
                document.querySelectorAll('.answer-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const question = btn.dataset.question;
                        document.querySelectorAll(`.answer-btn[data-question="${question}"]`).forEach(b => {
                            b.classList.remove('selected');
                        });
                        btn.classList.add('selected');
                    });
                });
            }
            
            if (submitWellnessCheck) {
                submitWellnessCheck.addEventListener('click', () => {
                    // Calculate wellness score
                    const selectedAnswers = document.querySelectorAll('.answer-btn.selected');
                    let score = 0;
                    
                    selectedAnswers.forEach(btn => {
                        const answer = btn.dataset.answer;
                        if (answer === 'yes') score += 10;
                        else if (answer === 'somewhat') score += 5;
                    });
                    
                    const percentage = Math.round((score / (wellnessQuestions.length * 10)) * 100);
                    
                    // Generate recommendations based on score
                    let recommendations = [];
                    
                    if (percentage < 50) {
                        recommendations = [
                            'Focus on establishing a consistent sleep schedule',
                            'Try to drink more water throughout the day',
                            'Incorporate short walks into your daily routine',
                            'Practice deep breathing exercises for stress management'
                        ];
                    } else if (percentage < 80) {
                        recommendations = [
                            'Continue building on your healthy habits',
                            'Try to increase your physical activity gradually',
                            'Consider adding more vegetables to your meals',
                            'Make time for social connections'
                        ];
                    } else {
                        recommendations = [
                            'Maintain your excellent wellness routine',
                            'Share your healthy habits with friends and family',
                            'Consider setting new health goals',
                            'Continue prioritizing self-care'
                        ];
                    }
                    
                    // Update UI
                    document.getElementById('wellnessScore').textContent = `${percentage}%`;
                    document.getElementById('wellnessRecommendations').innerHTML = 
                        recommendations.map(rec => `<li>${rec}</li>`).join('');
                    
                    // Show report
                    document.getElementById('wellnessReport').classList.add('active');
                    
                    // Save report
                    saveReport('Daily Wellness Check', {
                        date: new Date().toISOString(),
                        score: percentage,
                        recommendations: recommendations
                    });
                    
                    // Show success message
                    showToast('Wellness check completed! Check your results.', 'success');
                });
            }
        }

        // Know About Me Feature
        function initAboutMe() {
            const saveProfileBtn = document.getElementById('saveProfileBtn');
            
            if (saveProfileBtn) {
                saveProfileBtn.addEventListener('click', () => {
                    // Get form values
                    const profileData = {
                        favFood: document.getElementById('favFood').value,
                        guiltyPleasure: document.getElementById('guiltyPleasure').value,
                        favRestaurant: document.getElementById('favRestaurant').value,
                        favDish: document.getElementById('favDish').value,
                        favSnack: document.getElementById('favSnack').value,
                        myRecipe: document.getElementById('myRecipe').value,
                        healthPhilosophy: document.getElementById('healthPhilosophy').value
                    };
                    
                    // Save to app state
                    appState.profileData = profileData;
                    saveUserData();
                    
                    // Update profile card
                    document.getElementById('profileFavFood').textContent = profileData.favFood || 'Not specified';
                    document.getElementById('profileGuiltyPleasure').textContent = profileData.guiltyPleasure || 'Not specified';
                    document.getElementById('profileFavRestaurant').textContent = profileData.favRestaurant || 'Not specified';
                    document.getElementById('profileFavDish').textContent = profileData.favDish || 'Not specified';
                    document.getElementById('profileFavSnack').textContent = profileData.favSnack || 'Not specified';
                    document.getElementById('profileMyRecipe').textContent = profileData.myRecipe || 'Not specified';
                    document.getElementById('profileHealthPhilosophy').textContent = profileData.healthPhilosophy || 'Not specified';
                    
                    // Show profile card
                    document.getElementById('aboutMeCard').classList.add('active');
                    
                    // Show success message
                    showToast('Profile saved successfully!', 'success');
                });
            }
            
            // Load existing profile data if available
            if (appState.profileData && Object.keys(appState.profileData).length > 0) {
                document.getElementById('favFood').value = appState.profileData.favFood || '';
                document.getElementById('guiltyPleasure').value = appState.profileData.guiltyPleasure || '';
                document.getElementById('favRestaurant').value = appState.profileData.favRestaurant || '';
                document.getElementById('favDish').value = appState.profileData.favDish || '';
                document.getElementById('favSnack').value = appState.profileData.favSnack || '';
                document.getElementById('myRecipe').value = appState.profileData.myRecipe || '';
                document.getElementById('healthPhilosophy').value = appState.profileData.healthPhilosophy || '';
                
                // Show profile card
                document.getElementById('profileFavFood').textContent = appState.profileData.favFood || 'Not specified';
                document.getElementById('profileGuiltyPleasure').textContent = appState.profileData.guiltyPleasure || 'Not specified';
                document.getElementById('profileFavRestaurant').textContent = appState.profileData.favRestaurant || 'Not specified';
                document.getElementById('profileFavDish').textContent = appState.profileData.favDish || 'Not specified';
                document.getElementById('profileFavSnack').textContent = appState.profileData.favSnack || 'Not specified';
                document.getElementById('profileMyRecipe').textContent = appState.profileData.myRecipe || 'Not specified';
                document.getElementById('profileHealthPhilosophy').textContent = appState.profileData.healthPhilosophy || 'Not specified';
                
                document.getElementById('aboutMeCard').classList.add('active');
            }
        }

        // Health Card Feature
        function initHealthCard() {
            const healthCardForm = document.getElementById('healthCardForm');
            const generatedCard = document.getElementById('generatedCard');
            const downloadCardBtn = document.getElementById('downloadCardBtn');
            
            if (healthCardForm) {
                healthCardForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    // Get form values
                    const name = document.getElementById('cardName').value;
                    const age = document.getElementById('cardAge').value;
                    const gender = document.getElementById('cardGender').value;
                    const weight = document.getElementById('cardWeight').value;
                    const height = document.getElementById('cardHeight').value;
                    const bloodGroup = document.getElementById('cardBloodGroup').value;
                    const allergies = document.getElementById('cardAllergies').value || 'None';
                    const activityLevel = document.getElementById('cardActivityLevel').value;
                    const healthGoal = document.getElementById('cardHealthGoal').value;
                    
                    // Calculate BMI
                    const heightM = height / 100;
                    const bmi = (weight / (heightM * heightM)).toFixed(1);
                    
                    // Determine BMI category
                    let bmiCategory;
                    if (bmi < 18.5) {
                        bmiCategory = 'Underweight';
                    } else if (bmi < 25) {
                        bmiCategory = 'Normal';
                    } else if (bmi < 30) {
                        bmiCategory = 'Overweight';
                    } else {
                        bmiCategory = 'Obese';
                    }
                    
                    // Populate card
                    document.getElementById('cardDate').textContent = new Date().toLocaleDateString();
                    document.getElementById('cardInfoName').textContent = name;
                    document.getElementById('cardInfoAge').textContent = age;
                    document.getElementById('cardInfoGender').textContent = gender.charAt(0).toUpperCase() + gender.slice(1);
                    document.getElementById('cardInfoBloodGroup').textContent = bloodGroup;
                    document.getElementById('cardInfoAllergies').textContent = allergies;
                    document.getElementById('cardInfoActivityLevel').textContent = activityLevel.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
                    document.getElementById('bmiValue').textContent = bmi;
                    document.getElementById('bmiCategory').textContent = bmiCategory;
                    document.getElementById('cardInfoHealthGoal').textContent = healthGoal;
                    
                    // Show card and download button
                    generatedCard.classList.add('active');
                    downloadCardBtn.style.display = 'block';
                    
                    // Show success message
                    showToast('Health card generated successfully!', 'success');
                });
            }
            
            if (downloadCardBtn) {
                downloadCardBtn.addEventListener('click', () => {
                    // Generate PDF
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Add content to PDF
                    doc.setFontSize(20);
                    doc.setTextColor(255, 46, 181);
                    doc.text('Healthara Health Card', 105, 20, { align: 'center' });
                    
                    doc.setFontSize(12);
                    doc.setTextColor(0, 0, 0);
                    doc.text(`Date: ${document.getElementById('cardDate').textContent}`, 20, 40);
                    doc.text(`Name: ${document.getElementById('cardInfoName').textContent}`, 20, 50);
                    doc.text(`Age: ${document.getElementById('cardInfoAge').textContent}`, 20, 60);
                    doc.text(`Gender: ${document.getElementById('cardInfoGender').textContent}`, 20, 70);
                    doc.text(`Blood Group: ${document.getElementById('cardInfoBloodGroup').textContent}`, 20, 80);
                    doc.text(`Allergies: ${document.getElementById('cardInfoAllergies').textContent}`, 20, 90);
                    doc.text(`Activity Level: ${document.getElementById('cardInfoActivityLevel').textContent}`, 20, 100);
                    doc.text(`BMI: ${document.getElementById('bmiValue').textContent} (${document.getElementById('bmiCategory').textContent})`, 20, 110);
                    doc.text(`Health Goal: ${document.getElementById('cardInfoHealthGoal').textContent}`, 20, 120);
                    
                    // Save PDF
                    doc.save('healthara-health-card.pdf');
                    
                    // Show success message
                    showToast('Health card downloaded!', 'success');
                });
            }
        }

        // Reports Section
        function initReports() {
            // pH Test Report
            const connectPhSensorBtn = document.getElementById('connectPhSensorBtn');
            const phIndicator = document.getElementById('phIndicator');
            const phValue = document.getElementById('phValue');
            
            if (connectPhSensorBtn) {
                connectPhSensorBtn.addEventListener('click', () => {
                    // Simulate pH sensor connection
                    const ph = (Math.random() * 1.5 + 5).toFixed(1);
                    const position = ((ph - 4.5) / 4.5) * 100;
                    
                    phIndicator.style.left = `${position}%`;
                    phValue.textContent = ph;
                    
                    connectPhSensorBtn.textContent = 'Sensor Connected!';
                    setTimeout(() => {
                        connectPhSensorBtn.textContent = 'Connect pH Sensor';
                    }, 2000);
                    
                    // Show success message
                    showToast('pH sensor connected successfully!', 'success');
                });
            }
            
            // Load saved reports
            loadSavedReports();
        }

        function saveReport(type, data) {
            const report = {
                id: Date.now(),
                type: type,
                data: data,
                date: new Date().toISOString()
            };
            
            appState.savedReports.push(report);
            saveUserData();
            loadSavedReports();
        }

        function loadSavedReports() {
            const reportsList = document.getElementById('reportsList');
            if (reportsList) {
                reportsList.innerHTML = '';
                
                if (appState.savedReports.length === 0) {
                    reportsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No saved reports yet.</p>';
                    return;
                }
                
                appState.savedReports.forEach(report => {
                    const reportItem = document.createElement('div');
                    reportItem.className = 'report-item';
                    
                    const reportDate = new Date(report.date).toLocaleDateString();
                    
                    reportItem.innerHTML = `
                        <div class="report-info">
                            <div class="report-name">${report.type}</div>
                            <div class="report-date">${reportDate}</div>
                        </div>
                        <div class="report-actions">
                            <button class="view-report-btn" data-report-id="${report.id}">View</button>
                            <button class="download-report-btn" data-report-id="${report.id}">Download</button>
                        </div>
                    `;
                    
                    reportsList.appendChild(reportItem);
                });
                
                // Add event listeners to report buttons
                document.querySelectorAll('.view-report-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const reportId = parseInt(btn.dataset.reportId);
                        const report = appState.savedReports.find(r => r.id === reportId);
                        if (report) {
                            viewReport(report);
                        }
                    });
                });
                
                document.querySelectorAll('.download-report-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const reportId = parseInt(btn.dataset.reportId);
                        const report = appState.savedReports.find(r => r.id === reportId);
                        if (report) {
                            downloadReport(report);
                        }
                    });
                });
            }
        }

        function viewReport(report) {
            // Create a modal to view the report
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <button class="modal-close">
                        <i class="fas fa-times"></i>
                    </button>
                    <h2 class="modal-title">${report.type} Report</h2>
                    <div class="report-content">
                        <p><strong>Date:</strong> ${new Date(report.date).toLocaleDateString()}</p>
                        ${report.data.score ? `<p><strong>Score:</strong> ${report.data.score}%</p>` : ''}
                        ${report.data.recommendations ? `
                            <h3>Recommendations:</h3>
                            <ul>
                                ${report.data.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                            </ul>
                        ` : ''}
                        ${report.data.beforeMood && report.data.afterMood ? `
                            <h3>Mood Change:</h3>
                            <p><strong>Before:</strong> ${report.data.beforeMood}</p>
                            <p><strong>After:</strong> ${report.data.afterMood}</p>
                        ` : ''}
                        ${report.data.text ? `
                            <h3>Released Thoughts:</h3>
                            <p>${report.data.text}</p>
                        ` : ''}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Add close functionality
            modal.querySelector('.modal-close').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        function downloadReport(report) {
            // Generate PDF for the report
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add content to PDF
            doc.setFontSize(20);
            doc.setTextColor(255, 46, 181);
            doc.text(`${report.type} Report`, 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setTextColor(0, 0, 0);
            doc.text(`Date: ${new Date(report.date).toLocaleDateString()}`, 20, 40);
            
            if (report.data.score) {
                doc.text(`Score: ${report.data.score}%`, 20, 50);
            }
            
            if (report.data.recommendations) {
                doc.text('Recommendations:', 20, 60);
                let yPosition = 70;
                report.data.recommendations.forEach(rec => {
                    doc.text(`â€¢ ${rec}`, 25, yPosition);
                    yPosition += 10;
                });
            }
            
            if (report.data.beforeMood && report.data.afterMood) {
                doc.text('Mood Change:', 20, yPosition + 10);
                doc.text(`Before: ${report.data.beforeMood}`, 25, yPosition + 20);
                doc.text(`After: ${report.data.afterMood}`, 25, yPosition + 30);
            }
            
            if (report.data.text) {
                doc.text('Released Thoughts:', 20, yPosition + 40);
                const splitText = doc.splitTextToSize(report.data.text, 170);
                doc.text(splitText, 25, yPosition + 50);
            }
            
            // Save PDF
            doc.save(`${report.type.replace(/\s+/g, '-').toLowerCase()}-report.pdf`);
            
            // Show success message
            showToast('Report downloaded!', 'success');
        }

        // Badge System
        function unlockBadge(badgeId) {
            const badgeElement = document.querySelector(`.badge[data-badge="${badgeId}"]`);
            if (badgeElement && !badgeElement.classList.contains('unlocked')) {
                badgeElement.classList.add('unlocked');
                
                // Create confetti
                createConfetti();
                
                // Show success message
                const badgeNames = {
                    calmStreak: 'Calm Streak',
                    stepChamp: 'Step Champ',
                    moodMaster: 'Mood Master',
                    hydrationHero: 'Hydration Hero',
                    breathingMaster: 'Breathing Master'
                };
                
                showToast(`ðŸŽ‰ Achievement Unlocked: ${badgeNames[badgeId]}!`, 'success');
            }
        }

        function createConfetti() {
            const colors = ['#BC13FE', '#A855F7', '#4ade80', '#fbbf24', '#06b6d4'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        document.body.removeChild(confetti);
                    }, 3000);
                }, i * 30);
            }
        }

        // Reminders System
        function setupReminders() {
            // Water reminder
            if (appState.notifications.water) {
                setInterval(() => {
                    if (appState.waterIntake < appState.waterGoal) {
                        showToast('ðŸ’§ Time for a glass of water!', 'info');
                    }
                }, 3600000); // Every hour
            }
            
            // Mood check reminder
            if (appState.notifications.mood) {
                setInterval(() => {
                    showToast('ðŸ§  Mood check reminder!', 'info');
                }, 21600000); // Every 6 hours
            }
            
            // Meal logging reminder
            if (appState.notifications.meal) {
                setInterval(() => {
                    showToast('ðŸ½ Don\'t forget to log your meal!', 'info');
                }, 14400000); // Every 4 hours
            }
        }

        // Data Persistence
        function initializeUserData() {
            if (appState.user && appState.user.email !== 'guest') {
                const userData = {
                    user: appState.user,
                    gardenFlowers: [],
                    dailyMeals: [],
                    nutritionData: {
                        calories: 0,
                        proteins: 0,
                        carbs: 0,
                        fats: 0,
                        sugar: 0
                    },
                    consumedCalories: 0,
                    dailyCalorieGoal: 2000,
                    journalEntries: [],
                    waterIntake: 0,
                    badges: {
                        calmStreak: true,
                        stepChamp: false,
                        moodMaster: true,
                        hydrationHero: false
                    },
                    notifications: {
                        water: true,
                        mood: true,
                        meal: true
                    },
                    profileData: {},
                    savedReports: []
                };
                
                localStorage.setItem(`healthara_${appState.user.email}`, JSON.stringify(userData));
            }
        }

        function saveUserData() {
            if (appState.user && appState.user.email !== 'guest') {
                const userData = {
                    user: appState.user,
                    gardenFlowers: appState.gardenFlowers,
                    dailyMeals: appState.dailyMeals,
                    nutritionData: appState.nutritionData,
                    consumedCalories: appState.consumedCalories,
                    dailyCalorieGoal: appState.dailyCalorieGoal,
                    journalEntries: appState.journalEntries,
                    waterIntake: appState.waterIntake,
                    badges: appState.badges,
                    notifications: appState.notifications,
                    profileData: appState.profileData,
                    savedReports: appState.savedReports
                };
                
                localStorage.setItem(`healthara_${appState.user.email}`, JSON.stringify(userData));
            }
        }

        function loadUserData() {
            if (appState.user && appState.user.email !== 'guest') {
                const savedData = localStorage.getItem(`healthara_${appState.user.email}`);
                if (savedData) {
                    const userData = JSON.parse(savedData);
                    
                    // Restore app state
                    appState.gardenFlowers = userData.gardenFlowers || [];
                    appState.dailyMeals = userData.dailyMeals || [];
                    appState.nutritionData = userData.nutritionData || {
                        calories: 0,
                        proteins: 0,
                        carbs: 0,
                        fats: 0,
                        sugar: 0
                    };
                    appState.consumedCalories = userData.consumedCalories || 0;
                    appState.dailyCalorieGoal = userData.dailyCalorieGoal || 2000;
                    appState.journalEntries = userData.journalEntries || [];
                    appState.waterIntake = userData.waterIntake || 0;
                    appState.badges = userData.badges || {
                        calmStreak: true,
                        stepChamp: false,
                        moodMaster: true,
                        hydrationHero: false
                    };
                    appState.notifications = userData.notifications || {
                        water: true,
                        mood: true,
                        meal: true
                    };
                    appState.profileData = userData.profileData || {};
                    appState.savedReports = userData.savedReports || [];
                    
                    // Update UI
                    updateNutritionDisplay();
                    updateMealsList();
                    updateCalorieChart();
                    updateWaterDisplay();
                    loadSavedReports();
                    
                    // Update badges in UI
                    document.querySelectorAll('.badge').forEach(badge => {
                        const badgeType = badge.querySelector('.badge-name').textContent.toLowerCase().replace(' ', '');
                        if (appState.badges[badgeType]) {
                            badge.classList.add('unlocked');
                        }
                    });
                    
                    // Update notification toggles
                    document.getElementById('waterToggle').classList.toggle('active', appState.notifications.water);
                    document.getElementById('moodToggle').classList.toggle('active', appState.notifications.mood);
                    document.getElementById('mealToggle').classList.toggle('active', appState.notifications.meal);
                }
            }
        }

        
        // ============================================
        // HEALTH QUIZ - Event Listeners
        // ============================================
        document.getElementById('startHealthQuizBtn')?.addEventListener('click', () => {
            document.getElementById('healthQuizModal').style.display = 'flex';
        });
        
        document.getElementById('closeHealthQuiz')?.addEventListener('click', () => {
            closeHealthQuizModal();
        });
        
        // ============================================
        // MOOD-TO-MUSIC System
        // ============================================
        const moodPlaylists = {
            happy: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOeiKm4sgNOknGvNjby9efdf',
                activities: [
                    'Dance to your favorite song for 2 minutes',
                    'Share your happiness - call a friend',
                    "Journal 3 things you're grateful for"
                ]
            },
            sad: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOdYrH5lMcZqJZmVrvchSJFg',
                activities: [
                    'Take a 5-minute gentle walk outside',
                    'Practice deep breathing for 3 minutes',
                    'Write down your feelings in a journal'
                ]
            },
            stressed: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOdHpqPDdCGvFFVUVrJMT7Bp',
                activities: [
                    'Do 10 jumping jacks to release tension',
                    'Stretch your arms and neck for 2 minutes',
                    'Practice the 4-7-8 breathing technique'
                ]
            },
            angry: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOd3Zy-0TRFlm9WdWdgNCrJ1',
                activities: [
                    'Do 20 push-ups or jumping jacks',
                    "Write an angry letter (don't send it)",
                    'Listen to loud music and move your body'
                ]
            },
            lonely: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOfD8R0ikpR9z1qBbX5k2gG0',
                activities: [
                    'Call or text someone you care about',
                    'Join an online community or forum',
                    'Practice self-compassion meditation'
                ]
            },
            tired: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOcTjVvk7XW6ZYC5qZfqS9cH',
                activities: [
                    'Take a 10-minute power nap',
                    'Drink a glass of water',
                    'Do light stretching for 3 minutes'
                ]
            },
            energetic: {
                playlist: 'https://www.youtube.com/embed/videoseries?list=PLrAXtmErZgOeiKm4sgNOknGvNjby9efdf',
                activities: [
                    'Go for a brisk 10-minute walk or jog',
                    'Complete a high-intensity 5-minute workout',
                    'Clean or organize one area of your space'
                ]
            }
        };
        
        function selectMood(mood) {
            if (!mood) return;
            
            const data = moodPlaylists[mood];
            const resultDiv = document.getElementById('moodMusicResult');
            const musicPlayer = document.getElementById('musicPlayer');
            const suggestions = document.getElementById('activitySuggestions');
            
            musicPlayer.innerHTML = `
                <iframe width="100%" height="315" src="${data.playlist}" 
                    frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen style="border-radius: 15px;"></iframe>
            `;
            
            suggestions.innerHTML = data.activities.map((activity, i) => `
                <div class="activity-card">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">${i + 1}</div>
                    <p>${activity}</p>
                </div>
            `).join('');
            
            resultDiv.style.display = 'block';
            showToast('Mood music loaded! ðŸŽµ', 'success');
        }
        
        // ============================================
        // DRAWING CANVAS Implementation
        // ============================================
        let canvas, ctx;
        let isDrawing = false;
        let currentTool = 'brush';
        let currentColor = '#BC13FE';
        let brushSize = 5;
        
        function initDrawingCanvas() {
            canvas = document.getElementById('drawingCanvas');
            if (!canvas) return;
            
            ctx = canvas.getContext('2d');
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch support
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousedown', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });
            
            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });
            
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                const mouseEvent = new MouseEvent('mouseup', {});
                canvas.dispatchEvent(mouseEvent);
            });
        }
        
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            ctx.lineWidth = brushSize;
            ctx.strokeStyle = currentTool === 'eraser' ? 'white' : currentColor;
            ctx.lineTo(x, y);
            ctx.stroke();
        }
        
        function stopDrawing() {
            isDrawing = false;
            ctx.beginPath();
        }
        
        function setDrawingTool(tool) {
            currentTool = tool;
            showToast(tool === 'brush' ? 'Brush selected' : 'Eraser selected', 'info');
        }
        
        function setDrawingColor(color) {
            currentColor = color;
            currentTool = 'brush';
        }
        
        function setBrushSize(size) {
            brushSize = parseInt(size);
        }
        
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            showToast('Canvas cleared', 'info');
        }
        
        function saveDrawing() {
            canvas.toBlob((blob) => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `healthara-drawing-${Date.now()}.png`;
                a.click();
                URL.revokeObjectURL(url);
                showToast('Drawing saved!', 'success');
            });
        }
        
        // ============================================
        // TO-DO LIST with Hourly Reminders
        // ============================================
        let todoReminderInterval;
        
        function addTodoTask() {
            const input = document.getElementById('newTodoInput');
            const task = input.value.trim();
            
            if (!task) {
                showToast('Please enter a task', 'warning');
                return;
            }
            
            if (!appState.todos) appState.todos = [];
            
            const newTask = {
                id: Date.now(),
                text: task,
                completed: false,
                date: new Date().toLocaleDateString()
            };
            
            appState.todos.push(newTask);
            input.value = '';
            renderTodoList();
            saveUserData();
            showToast('Task added!', 'success');
            
            // Start reminder if not already running
            if (!todoReminderInterval) {
                startTodoReminders();
            }
        }
        
        function renderTodoList() {
            const list = document.getElementById('todoList');
            if (!list || !appState.todos) return;
            
            const today = new Date().toLocaleDateString();
            const todayTasks = appState.todos.filter(t => t.date === today);
            
            list.innerHTML = todayTasks.map(task => `
                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">
                    <input type="checkbox" ${task.completed ? 'checked' : ''} 
                        onchange="toggleTodo(${task.id})" 
                        style="width: 20px; height: 20px; cursor: pointer; accent-color: var(--accent);">
                    <span style="flex: 1; ${task.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${task.text}</span>
                    <button onclick="deleteTodo(${task.id})" style="background: none; border: none; color: var(--danger); cursor: pointer; font-size: 1.2rem;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('') || '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No tasks for today. Add one above!</p>';
            
            checkTodoCompletion(todayTasks);
        }
        
        function toggleTodo(id) {
            const task = appState.todos.find(t => t.id === id);
            if (task) {
                task.completed = !task.completed;
                renderTodoList();
                saveUserData();
            }
        }
        
        function deleteTodo(id) {
            appState.todos = appState.todos.filter(t => t.id !== id);
            renderTodoList();
            saveUserData();
            showToast('Task deleted', 'info');
        }
        
        function checkTodoCompletion(tasks) {
            const statusDiv = document.getElementById('todoStatus');
            if (!statusDiv || tasks.length === 0) return;
            
            const allCompleted = tasks.every(t => t.completed);
            const hour = new Date().getHours();
            const isEndOfDay = hour >= 21; // After 9 PM
            
            if (allCompleted && tasks.length > 0) {
                statusDiv.innerHTML = `
                    <div style="color: var(--success); font-size: 1.2rem; font-weight: 600;">
                        âœ¨ Waoo! You are so ambitious and consistent! Keep shining âœ¨
                    </div>
                `;
                statusDiv.style.display = 'block';
            } else if (isEndOfDay && !allCompleted && tasks.length > 0) {
                statusDiv.innerHTML = `
                    <div style="color: var(--warning); font-size: 1.1rem;">
                        ðŸ’ª You need to focus more on your daily tasks. You've got this â€” try again tomorrow.
                    </div>
                `;
                statusDiv.style.display = 'block';
            } else {
                statusDiv.style.display = 'none';
            }
        }
        
        function startTodoReminders() {
            // Play reminder sound every hour
            todoReminderInterval = setInterval(() => {
                if (appState.todos && appState.todos.length > 0) {
                    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBi+J1OvOeDEGH2Sx5bGpYBwKSJ3c8LlwJAUsi9Ht0YY6BxlfsvSxqmIcCkWb2+66cSYGK4nU7dKFOwgXZ7TotqllHAhCm9vwuXMnBiyJ0+3ShjwIGGay5LSpZhsIQ5zb77l1KAYrhNLr0IU8CBllsuS0qmYbCEOc3O+5dykGLI');
                    audio.volume = 0.3;
                    audio.play().catch(() => {});
                    showToast("â° Don't forget to check your to-do list!", 'info');
                }
            }, 3600000); // Every hour
        }
        
        // ============================================
        // HABIT BOOSTER (Habit Stacking)
        // ============================================
        function saveHabitStack() {
            const existing = document.getElementById('existingHabit').value.trim();
            const newHabit = document.getElementById('newHabit').value.trim();
            
            if (!existing || !newHabit) {
                showToast('Please fill in both fields', 'warning');
                return;
            }
            
            if (!appState.habitStacks) appState.habitStacks = [];
            
            appState.habitStacks.push({
                id: Date.now(),
                existing,
                newHabit: newHabit,
                created: new Date().toLocaleDateString()
            });
            
            document.getElementById('existingHabit').value = '';
            document.getElementById('newHabit').value = '';
            
            renderHabitStacks();
            saveUserData();
            showToast('Habit stack saved!', 'success');
        }
        
        function renderHabitStacks() {
            const container = document.getElementById('habitStacks');
            if (!container || !appState.habitStacks) return;
            
            container.innerHTML = appState.habitStacks.map(habit => `
                <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px; border-left: 4px solid var(--accent);">
                    <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                        <strong>After I</strong> ${habit.existing},
                    </p>
                    <p style="font-size: 1.1rem; margin-bottom: 0.5rem;">
                        <strong>I will</strong> ${habit.newHabit}
                    </p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                        <small style="color: var(--text-secondary);">Created: ${habit.created}</small>
                        <button onclick="deleteHabitStack(${habit.id})" style="background: none; border: none; color: var(--danger); cursor: pointer;">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('') || '<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No habit stacks yet. Create your first one above!</p>';
        }
        
        function deleteHabitStack(id) {
            appState.habitStacks = appState.habitStacks.filter(h => h.id !== id);
            renderHabitStacks();
            saveUserData();
            showToast('Habit stack deleted', 'info');
        }
        
        // ============================================
        // Feature Modal Opening Functions
        // ============================================
        function openFeatureModal(feature) {
            const modal = document.getElementById(feature + 'Modal');
            if (modal) {
                modal.style.display = 'flex';
                
                // Initialize feature-specific functionality
                if (feature === 'drawingcanvas') {
                    setTimeout(initDrawingCanvas, 100);
                } else if (feature === 'todolist') {
                    renderTodoList();
                } else if (feature === 'habitbooster') {
                    renderHabitStacks();
                } else if (feature === 'motivideo') {
                    setTimeout(startMotivationRotation, 100);
                }
            }
        }
        
        function closeModal(feature) {
            const modal = document.getElementById(feature + 'Modal');
            if (modal) {
                modal.style.display = 'none';
                
                // Cleanup feature-specific functionality
                if (feature === 'motivideo') {
                    stopMotivationRotation();
                }
            }
        }
        
        
        // ============================================
        // DIET PLAN GENERATOR
        // ============================================
        let currentDietPlan = null;
        let currentDietDay = 1;
        
        function generateDietPlan() {
            const name = document.getElementById('dietName').value.trim();
            const age = document.getElementById('dietAge').value;
            const height = document.getElementById('dietHeight').value;
            const weight = document.getElementById('dietWeight').value;
            const meals = document.getElementById('dietMeals').value;
            const type = document.getElementById('dietType').value;
            const allergies = document.getElementById('dietAllergies').value.trim();
            
            if (!name || !age || !height || !weight || !meals || !type) {
                showToast('Please fill all required fields', 'warning');
                return;
            }
            
            // Generate 7-day diet plan
            const plan = {
                name,
                age,
                height,
                weight,
                meals: parseInt(meals),
                type,
                allergies,
                created: new Date().toLocaleDateString(),
                days: []
            };
            
            const mealTypes = {
                veg: {
                    morning: ['Green Tea', 'Lemon Water', 'Herbal Tea'],
                    breakfast: ['Oatmeal with fruits', 'Whole grain toast with avocado', 'Smoothie bowl', 'Vegetable poha', 'Idli with sambar'],
                    lunch: ['Mixed vegetable salad', 'Brown rice with dal', 'Quinoa bowl', 'Vegetable curry with roti', 'Paneer tikka'],
                    snack: ['Fruit salad', 'Nuts and seeds mix', 'Yogurt', 'Vegetable sticks with hummus'],
                    dinner: ['Grilled vegetables', 'Lentil soup', 'Stir-fried tofu', 'Vegetable khichdi', 'Palak paneer']
                },
                nonveg: {
                    morning: ['Green Tea', 'Black Coffee', 'Lemon Water'],
                    breakfast: ['Eggs and toast', 'Chicken sandwich', 'Protein smoothie', 'Egg bhurji with roti'],
                    lunch: ['Grilled chicken salad', 'Fish curry with rice', 'Chicken breast with vegetables', 'Mutton curry'],
                    snack: ['Boiled eggs', 'Chicken strips', 'Greek yogurt', 'Protein bar'],
                    dinner: ['Grilled fish', 'Chicken soup', 'Lean meat with quinoa', 'Egg curry with roti']
                },
                vegan: {
                    morning: ['Herbal Tea', 'Lemon Water', 'Green Juice'],
                    breakfast: ['Smoothie bowl', 'Chia pudding', 'Quinoa porridge', 'Tofu scramble'],
                    lunch: ['Buddha bowl', 'Lentil soup', 'Chickpea curry', 'Vegetable stir-fry with rice'],
                    snack: ['Fruit', 'Nuts', 'Energy balls', 'Vegetable sticks with tahini'],
                    dinner: ['Grilled tofu', 'Black bean soup', 'Vegetable curry', 'Zucchini noodles']
                }
            };
            
            const mealPlan = mealTypes[type];
            
            for (let i = 1; i <= 7; i++) {
                const day = {
                    day: i,
                    morning: mealPlan.morning[Math.floor(Math.random() * mealPlan.morning.length)],
                    breakfast: mealPlan.breakfast[Math.floor(Math.random() * mealPlan.breakfast.length)],
                    lunch: mealPlan.lunch[Math.floor(Math.random() * mealPlan.lunch.length)],
                    snack: plan.meals >= 4 ? mealPlan.snack[Math.floor(Math.random() * mealPlan.snack.length)] : null,
                    dinner: mealPlan.dinner[Math.floor(Math.random() * mealPlan.dinner.length)]
                };
                plan.days.push(day);
            }
            
            currentDietPlan = plan;
            currentDietDay = 1;
            
            // Save plan
            if (!appState.dietPlans) appState.dietPlans = [];
            appState.dietPlans.push(plan);
            saveUserData();
            
            // Display plan
            document.getElementById('dietPlanForm').style.display = 'none';
            document.getElementById('dietPlanResult').style.display = 'block';
            displayDietDay();
            showToast('7-Day Diet Plan Generated!', 'success');
        }
        
        function displayDietDay() {
            if (!currentDietPlan) return;
            
            const day = currentDietPlan.days[currentDietDay - 1];
            document.getElementById('dietPlanTitle').textContent = `${currentDietPlan.name}'s Diet - Day ${currentDietDay}`;
            
            let html = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">â˜€ï¸ Morning Drink</h4>
                    <p style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">${day.morning}</p>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">ðŸ³ Breakfast</h4>
                    <p style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">${day.breakfast}</p>
                </div>
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">ðŸ½ï¸ Lunch</h4>
                    <p style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">${day.lunch}</p>
                </div>
            `;
            
            if (day.snack) {
                html += `
                    <div style="margin-bottom: 1.5rem;">
                        <h4 style="color: var(--accent); margin-bottom: 0.5rem;">ðŸŽ Evening Snack</h4>
                        <p style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">${day.snack}</p>
                    </div>
                `;
            }
            
            html += `
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">ðŸŒ™ Dinner</h4>
                    <p style="padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 10px;">${day.dinner}</p>
                </div>
            `;
            
            document.getElementById('dietDayContent').innerHTML = html;
            
            // Update button states
            document.getElementById('prevDietDay').disabled = currentDietDay === 1;
            document.getElementById('nextDietDay').disabled = currentDietDay === 7;
        }
        
        function changeDietDay(direction) {
            currentDietDay += direction;
            if (currentDietDay < 1) currentDietDay = 1;
            if (currentDietDay > 7) currentDietDay = 7;
            displayDietDay();
        }
        
        // ============================================
        // DAILY MOTIVATION VIDEO ROTATOR
        // ============================================
        const motivationVideos = [
            'https://youtu.be/2kab91mDojo?si=UANo8DMm7nZKB2LL',  // Motivational speech
            'https://youtu.be/xyQY8a-ng6g?si=YZpZvHN7G_4Czh5q',  // Never give up
            'https://youtu.be/2sFSIu-Afek?si=g0hbQY2zx2L-yxII',  // Fitness motivation
            'https://youtu.be/brjAjq4zEIE?si=h128BiQUod3vFhsC',  // Mindset motivation
            'https://youtu.be/sEeFPcl9Nco?si=rGBXBYLkoQnlc_hp',  // Success motivation
            'https://youtu.be/svVDEkBQxpU?si=CFF-oUtQvUhhSQiM',  // Morning motivation
            'https://youtu.be/0zYjgZD2aG8?si=_T-ZyE4cBJsr4Pg8'   // Daily inspiration
        ];
        
        let currentMotivationIndex = 0;
        let motivationRotationInterval = null;
        
        function loadMotivationVideo(index) {
            const videoUrl = motivationVideos[index];
            document.getElementById('motivationVideoPlayer').innerHTML = `
                <iframe width="100%" height="400" src="${videoUrl}" 
                    frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen style="border-radius: 15px;"></iframe>
            `;
        }
        
        function startMotivationRotation() {
            // Start with today's video
            currentMotivationIndex = new Date().getDate() % motivationVideos.length;
            loadMotivationVideo(currentMotivationIndex);
            
            // Clear any existing interval
            if (motivationRotationInterval) {
                clearInterval(motivationRotationInterval);
            }
            
            // Auto-rotate every 45 seconds
            motivationRotationInterval = setInterval(() => {
                currentMotivationIndex = (currentMotivationIndex + 1) % motivationVideos.length;
                loadMotivationVideo(currentMotivationIndex);
            }, 45000);
        }
        
        function stopMotivationRotation() {
            if (motivationRotationInterval) {
                clearInterval(motivationRotationInterval);
                motivationRotationInterval = null;
            }
        }


        // Wire up all feature cards
        document.querySelectorAll('[data-feature]').forEach(card => {
            card.addEventListener('click', () => {
                const feature = card.dataset.feature;
                openFeatureModal(feature);
            });
        });



        // ============================================
        // HEALTH QUIZ FEATURE
        // ============================================
        const quizQuestions = [
            {
                id: 1,
                question: "What is your main struggle?",
                options: [
                    { text: "A: Consistency with habits", value: "A" },
                    { text: "B: Mood swings / overthinking", value: "B" },
                    { text: "C: Low energy / fatigue", value: "C" },
                    { text: "D: Sleep schedule issues", value: "D" }
                ]
            },
            {
                id: 2,
                question: "When do you feel the lowest?",
                options: [
                    { text: "A: Morning", value: "A" },
                    { text: "B: Afternoon", value: "B" },
                    { text: "C: Night", value: "C" },
                    { text: "D: Random times", value: "D" }
                ]
            },
            {
                id: 3,
                question: "What's your eating pattern?",
                options: [
                    { text: "A: Regular meals", value: "A" },
                    { text: "B: Skip meals", value: "B" },
                    { text: "C: Crave junk/snacks", value: "C" },
                    { text: "D: Emotional eating", value: "D" }
                ]
            },
            {
                id: 4,
                question: "How would you describe your emotional support level?",
                options: [
                    { text: "A: Strong support system", value: "A" },
                    { text: "B: Some support but still feel alone sometimes", value: "B" },
                    { text: "C: Rarely share feelings", value: "C" },
                    { text: "D: Feel disconnected from everyone", value: "D" }
                ]
            },
            {
                id: 5,
                question: "What do you want more of?",
                options: [
                    { text: "A: Motivation & consistency", value: "A" },
                    { text: "B: Emotional calm & mental stability", value: "B" },
                    { text: "C: More energy & physical strength", value: "C" },
                    { text: "D: Peaceful routines & balance", value: "D" }
                ]
            },
            {
                id: 6,
                question: "How do you cope with stress?",
                options: [
                    { text: "A: Journaling / talking", value: "A" },
                    { text: "B: Distracting with music/screens", value: "B" },
                    { text: "C: Bottling it up", value: "C" },
                    { text: "D: Cry or shut down", value: "D" }
                ]
            },
            {
                id: 7,
                question: "What growth direction do you want?",
                options: [
                    { text: "A: Become more disciplined", value: "A" },
                    { text: "B: Become emotionally stable", value: "B" },
                    { text: "C: Become active & fit", value: "C" },
                    { text: "D: Become calm & mindful", value: "D" }
                ]
            },
            {
                id: 8,
                question: "How ready are you for self-improvement?",
                options: [
                    { text: "A: Fully ready and committed", value: "A" },
                    { text: "B: Trying but inconsistent", value: "B" },
                    { text: "C: Want to start but don't know how", value: "C" },
                    { text: "D: Tired but want things to change", value: "D" }
                ]
            }
        ];

        let quizAnswers = {};
        let quizUserName = '';

        function openHealthQuiz() {
            document.getElementById('healthQuizModal').style.display = 'flex';
            quizAnswers = {};
            quizUserName = '';
            document.getElementById('quizUserName').value = '';
            document.getElementById('quizNameScreen').style.display = 'block';
            document.getElementById('quizQuestionsContainer').innerHTML = '';
            document.getElementById('quizResults').classList.remove('active');
        }

        function closeHealthQuiz() {
            document.getElementById('healthQuizModal').style.display = 'none';
        }

        function startQuiz() {
            const nameInput = document.getElementById('quizUserName');
            quizUserName = nameInput.value.trim();
            
            if (!quizUserName) {
                showToast('Please enter your name to continue', 'warning');
                return;
            }

            document.getElementById('quizNameScreen').style.display = 'none';
            renderQuizQuestions();
        }

        function renderQuizQuestions() {
            const container = document.getElementById('quizQuestionsContainer');
            container.innerHTML = '';

            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question-screen';
                questionDiv.id = `question-${q.id}`;
                if (index === 0) questionDiv.classList.add('active');

                const optionsHtml = q.options.map(opt => `
                    <div class="quiz-option" onclick="selectQuizAnswer(${q.id}, '${opt.value}', this)">
                        ${opt.text}
                    </div>
                `).join('');

                questionDiv.innerHTML = `
                    <h3 class="quiz-question">Question ${q.id} of ${quizQuestions.length}</h3>
                    <p class="quiz-question">${q.question}</p>
                    <div class="quiz-options">
                        ${optionsHtml}
                    </div>
                    <div class="quiz-progress">
                        ${index < quizQuestions.length - 1 ? 
                            `<button class="btn" onclick="nextQuestion(${q.id})" id="nextBtn-${q.id}" style="margin-top: 1.5rem; max-width: 200px;" disabled>Next</button>` :
                            `<button class="btn" onclick="showQuizResults()" id="nextBtn-${q.id}" style="margin-top: 1.5rem; max-width: 200px;" disabled>See Results</button>`
                        }
                    </div>
                `;

                container.appendChild(questionDiv);
            });
        }

        function selectQuizAnswer(questionId, answer, element) {
            const questionDiv = document.getElementById(`question-${questionId}`);
            const options = questionDiv.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');

            quizAnswers[questionId] = answer;

            const nextBtn = document.getElementById(`nextBtn-${questionId}`);
            if (nextBtn) nextBtn.disabled = false;
        }

        function nextQuestion(currentId) {
            document.getElementById(`question-${currentId}`).classList.remove('active');
            const nextQuestion = document.getElementById(`question-${currentId + 1}`);
            if (nextQuestion) {
                nextQuestion.classList.add('active');
            }
        }

        function showQuizResults() {
            const answerCounts = { A: 0, B: 0, C: 0, D: 0 };
            Object.values(quizAnswers).forEach(ans => {
                answerCounts[ans] = (answerCounts[ans] || 0) + 1;
            });

            const dominantAnswer = Object.keys(answerCounts).reduce((a, b) => 
                answerCounts[a] > answerCounts[b] ? a : b
            );

            const recommendationsMap = {
                A: [
                    "Daily Habit Tracker - Build consistency with streak tracking",
                    "Progress Dashboard with streaks + encouragement - Visualize your journey",
                    "Daily Affirmations Push Notifications - Stay motivated",
                    "Habit Booster - Stack your habits for better results",
                    "Smart Calorie Tracker - Structure your nutrition",
                    "Daily To-Do List - Organize your daily tasks"
                ],
                B: [
                    "Mood Journal + Emotional Reflection Space - Track your emotional patterns",
                    "Guided Breathing & Mindfulness Sessions - Find your calm",
                    "AI Support Chat - Get grounding and motivation when you need it",
                    "Daily Affirmations Push Notifications - Positive reinforcement",
                    "Releasing Ritual - Let it go, glow again",
                    "Mind Garden - Grow your positivity"
                ],
                C: [
                    "Hydration & Nutrition Monitor - Track your water and food intake",
                    "Gentle Movement / Stretch Routine Plans - Build energy gradually",
                    "Sleep Routine Helper + Night Diary - Improve your rest quality",
                    "Smart Calorie Tracker - Optimize your energy through nutrition",
                    "Daily Wellness Check - Monitor your physical health",
                    "Posture Tracker - Stay energized with better posture"
                ],
                D: [
                    "Sleep Routine Helper + Night Diary - Create peaceful sleep habits",
                    "Guided Breathing & Mindfulness Sessions - Find inner peace",
                    "Gentle Movement / Stretch Routine Plans - Peaceful movement flows",
                    "Mood Journal + Emotional Reflection Space - Gentle self-check-ins",
                    "Mind Garden - Create your peaceful sanctuary",
                    "Releasing Ritual - Release stress, embrace calm"
                ]
            };

            const recommendations = recommendationsMap[dominantAnswer];

            document.getElementById('quizQuestionsContainer').style.display = 'none';
            document.getElementById('resultUserName').textContent = quizUserName;
            document.getElementById('recommendationsList').innerHTML = 
                recommendations.map(rec => `<li>${rec}</li>`).join('');
            document.getElementById('quizResults').classList.add('active');

            showToast('Quiz completed! Check your personalized recommendations', 'success');
        }

        // Add event listener for Start Health Quiz button
        document.addEventListener('DOMContentLoaded', function() {
            const startQuizBtn = document.getElementById('startHealthQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', openHealthQuiz);
            }
        });

        // ============================================
        // DAILY MOTIVATION VIDEO WITH THUMBNAILS
        // ============================================
        const dailyMotivationVideos = [
            { url: 'https://youtu.be/2sFSIu-Afek?si=g0hbQY2zx2L-yxII', id: '2sFSIu-Afek' },
            { url: 'https://youtu.be/xyQY8a-ng6g?si=YZpZvHN7G_4Czh5q', id: 'xyQY8a-ng6g' },
            { url: 'https://youtu.be/2kab91mDojo?si=UANo8DMm7nZKB2LL', id: '2kab91mDojo' }
        ];

        function loadDailyMotivationVideo() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 86400000);
            const videoIndex = dayOfYear % dailyMotivationVideos.length;
            const video = dailyMotivationVideos[videoIndex];

            const container = document.getElementById('dailyVideoContainer');
            const dateDiv = document.getElementById('motivationDate');
            
            if (container && dateDiv) {
                const formattedDate = today.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
                
                dateDiv.textContent = `${formattedDate} - Today's Motivational Video`;

                container.innerHTML = `
                    <div class="video-thumbnail-container" onclick="window.open('${video.url}', '_blank')">
                        <img src="https://img.youtube.com/vi/${video.id}/maxresdefault.jpg" 
                             alt="Daily Motivation Video" 
                             class="video-thumbnail"
                             onerror="this.src='https://img.youtube.com/vi/${video.id}/hqdefault.jpg'">
                        <div class="video-play-overlay">
                            <i class="fas fa-play"></i>
                        </div>
                    </div>
                `;
            }
        }

        // Load video when page loads and when switching to Physical Health tab
        document.addEventListener('DOMContentLoaded', function() {
            loadDailyMotivationVideo();
            
            // Reload when switching to physical health tab
            const physicalTab = document.querySelector('[data-tab="physical"]');
            if (physicalTab) {
                physicalTab.addEventListener('click', function() {
                    setTimeout(loadDailyMotivationVideo, 100);
                });
            }
        });


        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
    

    <!-- Health Quiz Modal -->
    
    <!-- Mood-to-Music Modal -->
    
    <!-- Drawing Canvas Modal -->
    
    <!-- To-Do List Modal -->
    
    <!-- Habit Booster Modal -->
    
    <!-- Diet Plan Generator Modal -->
    
    <!-- Daily Motivation Modal -->
    <!--<div class="modal" id="motivideoModal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <h2 class="modal-title">
                <span class="modal-icon">ðŸŽ¬</span>
                Daily Motivation
            </h2>
            <button class="modal-close" onclick="closeModal('motivideo')">&times;</button>
            
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px;">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1.5rem;">
                    Today's motivational video to inspire your journey
                </p>
                <div id="motivationVideoPlayer" style="margin-bottom: 1rem;">
                    </div>
                <p style="text-align: center; color: var(--text-secondary); font-size: 0.9rem;">
                    <i class="fas fa-sync-alt"></i> Video changes daily to keep you inspired
                </p>
            </div>
        </div>
    </div>-->

    <div class="modal" id="dietplanModal" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <h2 class="modal-title">
                <span class="modal-icon">ðŸ¥—</span>
                7-Day Personalized Diet Planner
            </h2>
            <button class="modal-close" onclick="closeModal('dietplan')">&times;</button>
            
            <div id="dietPlanForm" style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px; margin-bottom: 1.5rem;">
                <h3 style="margin-bottom: 1.5rem;">Tell us about yourself</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                    <input type="text" id="dietName" placeholder="Your Name" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    <input type="number" id="dietAge" placeholder="Age" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    <input type="number" id="dietHeight" placeholder="Height (cm)" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    <input type="number" id="dietWeight" placeholder="Weight (kg)" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1.5rem;">
                    <select id="dietMeals" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                        <option value="">Meals per day</option>
                        <option value="2">2 meals</option>
                        <option value="3">3 meals</option>
                        <option value="4">4 meals</option>
                        <option value="5">5 meals</option>
                    </select>
                    <select id="dietType" style="padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                        <option value="">Diet Type</option>
                        <option value="veg">Vegetarian</option>
                        <option value="nonveg">Non-Vegetarian</option>
                        <option value="vegan">Vegan</option>
                    </select>
                </div>
                <input type="text" id="dietAllergies" placeholder="Allergies (optional)" style="width: 100%; padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem; margin-bottom: 1.5rem;">
                <button class="btn" onclick="generateDietPlan()" style="width: 100%;"><i class="fas fa-utensils"></i> Generate My 7-Day Plan</button>
            </div>
            
            <div id="dietPlanResult" style="display: none;">
                <h3 id="dietPlanTitle" style="text-align: center; margin-bottom: 1.5rem;"></h3>
                <div id="dietDayContent" style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px; margin-bottom: 1rem;"></div>
                <div style="display: flex; justify-content: space-between; gap: 1rem;">
                    <button class="btn btn-secondary" onclick="changeDietDay(-1)" id="prevDietDay" style="flex: 1;"><i class="fas fa-chevron-left"></i> Previous Day</button>
                    <button class="btn btn-secondary" onclick="changeDietDay(1)" id="nextDietDay" style="flex: 1;">Next Day <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="habitboosterModal" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">
                <span class="modal-icon">ðŸ”—</span>
                Habit Booster - Stack Your Habits
            </h2>
            <button class="modal-close" onclick="closeModal('habitbooster')">&times;</button>
            
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px; margin-bottom: 1.5rem;">
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6;">Build powerful habits by linking new behaviors to existing routines. Complete the sentence below:</p>
                
                <div style="display: flex; flex-direction: column; gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <span style="color: var(--text-primary); font-weight: 600;">After I</span>
                        <input type="text" id="existingHabit" placeholder="wake up, eat lunch, etc." style="flex: 1; min-width: 200px; padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    </div>
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <span style="color: var(--text-primary); font-weight: 600;">I will</span>
                        <input type="text" id="newHabit" placeholder="meditate for 5 minutes, drink water, etc." style="flex: 1; min-width: 200px; padding: 0.8rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    </div>
                </div>
                
                <button class="btn" onclick="saveHabitStack()" style="width: 100%;"><i class="fas fa-save"></i> Save Habit Stack</button>
            </div>
            
            <div id="habitStackList" style="display: flex; flex-direction: column; gap: 1rem;">
                <h3 style="margin-bottom: 1rem;">Your Habit Stacks</h3>
                <div id="habitStacks">
                    <!-- Saved habit stacks will appear here -->
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="todolistModal" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">
                <span class="modal-icon">âœ…</span>
                Daily To-Do List
            </h2>
            <button class="modal-close" onclick="closeModal('todolist')">&times;</button>
            
            <div style="background: rgba(255,255,255,0.05); padding: 2rem; border-radius: 15px;">
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                    <input type="text" id="newTodoInput" placeholder="Add a new task..." style="flex: 1; padding: 1rem; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); border-radius: 10px; color: var(--text-primary); font-size: 1rem;">
                    <button class="btn" onclick="addTodoTask()" style="white-space: nowrap;"><i class="fas fa-plus"></i> Add</button>
                </div>
                
                <div id="todoList" style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Tasks will be added here -->
                </div>
                
                <div id="todoStatus" style="margin-top: 2rem; padding: 1rem; background: rgba(255,255,255,0.03); border-radius: 10px; text-align: center; display: none;">
                    <!-- Status message will appear here -->
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="drawingcanvasModal" style="display: none;">
        <div class="modal-content" style="max-width: 900px;">
            <h2 class="modal-title">
                <span class="modal-icon">ðŸŽ¨</span>
                Emotional Expression Canvas
            </h2>
            <button class="modal-close" onclick="closeModal('drawingcanvas')">&times;</button>
            
            <div style="background: rgba(255,255,255,0.05); padding: 1.5rem; border-radius: 15px; margin-bottom: 1.5rem;">
                <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1rem;">
                    <button class="btn btn-secondary" onclick="setDrawingTool('brush')" style="flex: 1; min-width: 120px;"><i class="fas fa-paintbrush"></i> Brush</button>
                    <button class="btn btn-secondary" onclick="setDrawingTool('eraser')" style="flex: 1; min-width: 120px;"><i class="fas fa-eraser"></i> Eraser</button>
                    <input type="color" id="colorPicker" value="#BC13FE" onchange="setDrawingColor(this.value)" style="padding: 0.5rem; border: none; border-radius: 10px; cursor: pointer;">
                    <input type="range" id="brushSize" min="1" max="20" value="5" onchange="setBrushSize(this.value)" style="flex: 1; min-width: 150px;">
                    <button class="btn btn-secondary" onclick="clearCanvas()" style="flex: 1; min-width: 120px;"><i class="fas fa-trash"></i> Clear</button>
                    <button class="btn" onclick="saveDrawing()" style="flex: 1; min-width: 120px;"><i class="fas fa-save"></i> Save</button>
                </div>
                <canvas id="drawingCanvas" width="800" height="500" style="border: 2px solid var(--glass-border); border-radius: 15px; background: white; cursor: crosshair; width: 100%; height: auto; display: block;"></canvas>
            </div>
        </div>
    </div>

    <div class="modal" id="moodmusicModal" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">
                <span class="modal-icon">ðŸŽµ</span>
                Mood-to-Music
            </h2>
            <button class="modal-close" onclick="closeModal('moodmusic')">&times;</button>
            
            <div class="mood-music-container">
                <h3 style="margin-bottom: 1.5rem;">How are you feeling right now?</h3>
                <select id="moodSelect" class="mood-dropdown" onchange="selectMood(this.value)">
                    <option value="">Select your mood...</option>
                    <option value="happy">ðŸ˜Š Happy - Feeling joyful and energetic</option>
                    <option value="sad">ðŸ˜¢ Sad - Feeling down or melancholic</option>
                    <option value="stressed">ðŸ˜° Stressed - Feeling anxious or overwhelmed</option>
                    <option value="angry">ðŸ˜  Angry - Feeling frustrated or irritated</option>
                    <option value="lonely">ðŸ˜” Lonely - Feeling isolated or disconnected</option>
                    <option value="tired">ðŸ˜´ Tired - Feeling exhausted or drained</option>
                    <option value="energetic">âš¡ Energetic - Feeling pumped and motivated</option>
                </select>
                
                <div id="moodMusicResult" style="display: none; margin-top: 2rem;">
                    <div id="musicPlayer" style="margin-bottom: 2rem;"></div>
                    <div id="activitySuggestions" class="activity-suggestions"></div>
                </div>
            </div>
        </div>
    </div>


<script>
/* Universal modal close handler â€” closes modals whether they were shown via class 'active' or inline style.display */
(function(){
  function hideModalElement(modal){
    if(!modal) return;
    // If modal was dynamically created and appended without id, handle removal
    if(modal.parentElement && modal.parentElement.tagName === 'BODY' && modal.classList.contains('modal') && modal.classList.contains('active') && modal.querySelector('.modal-content') && modal.dataset.dynamic === 'true'){
      // remove entirely if it was marked dynamic (some modals appended dynamically)
      modal.remove();
      return;
    }
    try {
      modal.classList.remove('active');
    } catch(e){}
    try {
      modal.style.display = 'none';
    } catch(e){}
  }

  // Close when clicking the overlay (works for static and dynamic modals)
  document.addEventListener('click', function(e){
    // if the click target is the overlay itself (the element with class 'modal'), close it
    if(e.target && e.target.classList && e.target.classList.contains('modal')){
      hideModalElement(e.target);
    }
  }, true); // capture to ensure overlay clicks are caught early

  // Delegate modal-close buttons to close their modal reliably
  document.addEventListener('click', function(e){
    const btn = e.target.closest && e.target.closest('.modal-close');
    if(!btn) return;
    // Prefer data-modal attribute if present
    const modalId = btn.getAttribute('data-modal');
    if(modalId){
      const modal = document.getElementById(modalId);
      if(modal) { hideModalElement(modal); return; }
    }
    // Otherwise find nearest ancestor with class 'modal'
    const modalAncestor = btn.closest('.modal');
    if(modalAncestor){
      hideModalElement(modalAncestor);
      return;
    }
    // If still not found, try to infer id from inline onclick handlers like closeModal('name')
    // (This helps where buttons call closeModal('motivideo') etc.)
    const onclick = btn.getAttribute('onclick');
    if(onclick){
      // extract the first string argument inside the parentheses
      const match = onclick.match(/closeModal\(['"]?([^'")]+)['"]?\)/);
      if(match && match[1]){
        const inferred = document.getElementById(match[1] + 'Modal');
        if(inferred){
          hideModalElement(inferred);
          return;
        }
      }
    }
    // As a last resort, if the button is inside a modal-content but modal isn't ancestor, search document for visible modals and hide them
    document.querySelectorAll('.modal').forEach(m => {
      if(m.classList.contains('active') || (m.style && m.style.display && m.style.display !== 'none')) hideModalElement(m);
    });
  }, true);

  // Make openFeatureModal/closeModal functions consistent with the universal handler
  window.openFeatureModal = function(feature){
    const modal = document.getElementById(feature + 'Modal');
    if(modal){
      modal.classList.add('active');
      modal.style.display = 'flex';
      // mark as not dynamic
      modal.dataset.dynamic = 'false';
      // initialize feature-specific functions if they exist elsewhere
      if(typeof window.initDrawingCanvas === 'function' && feature === 'drawingcanvas') setTimeout(initDrawingCanvas, 100);
      if(feature === 'todolist' && typeof window.renderTodoList === 'function') renderTodoList();
      if(feature === 'habitbooster' && typeof window.renderHabitStacks === 'function') renderHabitStacks();
      if(feature === 'motivideo' && typeof window.startMotivationRotation === 'function') setTimeout(startMotivationRotation, 100);
    }
  };

  window.closeModal = function(feature){
    const modal = document.getElementById(feature + 'Modal');
    if(modal){
      hideModalElement(modal);
      // cleanup feature-specific if needed
      if(feature === 'motivideo' && typeof window.stopMotivationRotation === 'function') stopMotivationRotation();
    }
  };

  // For modals created dynamically (like viewReport) mark them so they can be removed entirely when closed by overlay or close button
  const originalAppend = Document.prototype.appendChild;
  Document.prototype.appendChild = function(child){
    // If a modal is appended directly to body and has class 'modal', mark as dynamic
    try {
      if(child && child.classList && child.classList.contains && child.classList.contains('modal') && this === document){
        child.dataset.dynamic = 'true';
        // ensure clicking overlay works for dynamically added modals (they are already covered by document listener)
      }
    } catch(e){}
    return originalAppend.call(this, child);
  };
})();
</script>


    <!-- Health Quiz Modal -->
    <div class="modal" id="healthQuizModal" style="display: none;">
        <div class="modal-content quiz-modal-content">
            <button class="modal-close" onclick="closeHealthQuiz()">&times;</button>
            
            <!-- Name Input Screen -->
            <div id="quizNameScreen" class="quiz-name-screen">
                <h2 class="modal-title">Welcome to Your Health Journey</h2>
                <p style="color: var(--text-secondary); margin: 1rem 0;">Let's get to know you better</p>
                <input type="text" id="quizUserName" class="quiz-name-input" placeholder="Enter your name" />
                <button class="btn" onclick="startQuiz()" style="margin-top: 1rem;">Start Quiz</button>
            </div>

            <!-- Quiz Questions Screens -->
            <div id="quizQuestionsContainer"></div>

            <!-- Results Screen -->
            <div id="quizResults" class="quiz-results">
                <h3>Hey <span id="resultUserName"></span>!</h3>
                <p style="color: var(--text-secondary); margin: 1.5rem 0;">Based on your responses, here are the top features we recommend for you to explore in Healthara:</p>
                <div class="quiz-recommendations">
                    <h4>Your Personalized Recommendations</h4>
                    <ul id="recommendationsList"></ul>
                </div>
                <p style="color: var(--text-secondary); margin-top: 1.5rem; font-size: 0.9rem;">These features match your current emotional and physical needs and will support you in progressing gently and steadily ðŸ’›</p>
                <button class="btn" onclick="closeHealthQuiz()" style="margin-top: 2rem;">Get Started</button>
            </div>
        </div>
    </div>

</body>
</html>
